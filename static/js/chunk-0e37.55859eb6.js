(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0e37"],{"8Acb":function(e,t,r){"use strict";var n=r("4d7F"),o=r.n(n),a=r("vDqi"),u=r.n(a),i=r("XJYT"),l=r("Q2AE"),s=r("kkBN"),c=r("Qyje"),m=r.n(c),d=u.a.create({timeout:5e3});d.interceptors.request.use(function(e){return"get"===e.method&&(e.paramsSerializer=function(e){return m.a.stringify(e,{arrayFormat:"repeat"})}),l.a.getters.token&&(e.headers.Authorization="bearer"+Object(s.a)()),e},function(e){o.a.reject(e)}),d.interceptors.response.use(function(e){var t=e;return 200!==t.status?(Object(i.Message)({message:t.message,type:"error",duration:5e3}),o.a.reject("error")):403===t.data.code?(Object(i.Message)({message:t.data.message,type:"error",duration:5e3}),o.a.reject("error")):401===t.data.code?(i.MessageBox.confirm("你的登录信息已过期，请重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.dispatch("FedLogOut").then(function(){location.reload()})}),o.a.reject("error")):e.data},function(e){switch(e.response.status){case 403:i.MessageBox.confirm("你的登录信息已过期，请重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.dispatch("FedLogOut").then(function(){location.reload()})});break;case 500:Object(i.Message)({message:e.response.data.message,type:"error",duration:5e3})}});var f=d,h="http://bzy.hhotel.com",p=h+"/bzy-upms/";t.a={login:function(e){return f({method:"post",url:h+"login",data:e})},logout:function(e){return f({method:"get",url:h+"rios-auth/logouting",params:e})},getLoginUserInfo:function(){return f({method:"post",url:h+"rios-auth/user"})},addMenu:function(e){return f({method:"POST",url:p+"menu",data:e})},getMenuList:function(e){return f({method:"get",url:p+"menu/tree",params:e})},updateMenuList:function(e){return f({method:"PUT",url:p+"menu",data:e})},deleteMenuList:function(e){return f({method:"DELETE",url:p+"menu/"+e})},getAuthUserMenu:function(){return f({method:"GET",url:p+"authUser/findMenu"})},getMenuDetail:function(e){return f({method:"get",url:p+"menu/"+e})},getRoleList:function(){return f({method:"get",url:p+"role/list"})},addRole:function(e){return f({method:"POST",url:p+"role",data:e})},updateRole:function(e){return f({method:"PUT",url:p+"role",data:e})},getRoleDetail:function(e){return f({method:"get",url:p+"role/"+e})},verifyRoleCode:function(e){return f({method:"get",url:p+"role/validateCode/"+e})},verifyRoleName:function(e){return f({method:"get",url:p+"role/validateName/"+e})},deleteRole:function(e){return f({method:"DELETE",url:p+"role/"+e})},getUserList:function(e){return f({method:"get",url:p+"authUser/list",params:e})},addUser:function(e){return f({method:"POST",url:p+"authUser",data:e})},getUser:function(e){return f({method:"GET",url:p+"authUser/"+e})},updateUser:function(e){return f({method:"PUT",url:p+"authUser",data:e})},deleteUser:function(e){return f({method:"DELETE",url:p+"authUser/"+e})},disabledUser:function(e){return f({method:"PUT",url:p+"authUser/forbidden/"+e})},validateUser:function(e){return f({method:"GET",url:p+"authUser/validate",params:e})},getUserInfo:function(){return f({method:"GET",url:p+"authUser/info"})},modifyUserInfo:function(e){return f({method:"PUT",url:p+"authUser/update",data:e})},findRolesByUserId:function(){return f({method:"GET",url:p+"authUser/findRolesByUserId"})},modifyUserPassword:function(e){return f({method:"PUT",url:p+"authUser/updatePassword",data:e})},validatePassword:function(e,t){return f({method:"GET",url:p+"authUser/validatePassword",params:t})},getDepartmentList:function(){return f({method:"get",url:p+"department/list"})}}},"9fMV":function(e,t,r){"use strict";r.r(t);var n=r("8Acb"),o={name:"Userset",data:function(){var e=this;return{ruleForm:{phone:"",account:"",name:"",email:"",id:"",oldAccount:""},rules:{account:[{required:!0,message:"账号不能为空",trigger:"blur"},{validator:function(t,r,n){return r?""!==e.ruleForm.id&&e.ruleForm.account===e.ruleForm.oldAccount?n():void e.validate("ACCOUNT",r,function(e){e?n():n(new Error("账号已被使用"))}):n(new Error("请输入账号"))},trigger:"blur"}],name:[{required:!0,message:"用户名不能为空",trigger:"blur"},{validator:function(t,r,n){return r?""!==e.ruleForm.id&&e.ruleForm.name===e.ruleForm.oldName?n():void e.validate("NAME",r,function(e){e?n():n(new Error("用户姓名已被使用"))}):n(new Error("请输入用户姓名"))},trigger:"blur"}],phone:[{required:!0,validator:function(t,r,n){if(!r)return n(new Error("请输入手机号"));if(/^1[3|4|5|6|7|8|9]\d{9}$/.test(r)){if(""!==e.ruleForm.id&&e.ruleForm.phone===e.ruleForm.oldPhone)return n();e.validate("PHONE",r,function(e){e?n():n(new Error("手机号已被占用"))})}else n(new Error("请输入正确的手机号"))},trigger:"blur"}]}}},created:function(){this.getUserInfo()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.modifyInfo()})},resetForm:function(e){this.$refs[e].resetFields()},getUserInfo:function(){var e=this,t=localStorage.getItem("TOKEN");n.a.getUserInfo(t).then(function(t){e.ruleForm.account=t.data.account,e.ruleForm.oldAccount=t.data.account,e.ruleForm.phone=t.data.phone,e.ruleForm.oldPhone=t.data.phone,e.ruleForm.email=t.data.email,e.ruleForm.name=t.data.name,e.ruleForm.oldName=t.data.name,e.ruleForm.id=t.data.id})},modifyInfo:function(){var e=this,t={account:this.ruleForm.account,email:this.ruleForm.email,name:this.ruleForm.name,phone:this.ruleForm.phone};n.a.modifyUserInfo(t).then(function(t){e.$Message.success("修改用户信息成功!")})},goback:function(){this.$router.go(-1)},validate:function(e,t,r){var o={validateType:e,text:t},a=void 0;n.a.validateUser(o).then(function(e){a=e.data.hasCanUsable,r(a)}).catch()}}},a=(r("wmUm"),r("KHd+")),u=Object(a.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"400px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"账号",prop:"account"}},[r("el-input",{model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:e.goback}},[e._v("返回")])],1)],1)],1)},[],!1,null,"2a746bd8",null);u.options.__file="userSet.vue";t.default=u.exports},aUUe:function(e,t,r){},wmUm:function(e,t,r){"use strict";var n=r("aUUe");r.n(n).a}}]);