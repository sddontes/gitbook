(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-754c"],{"/8lg":function(t,e,n){"use strict";n.d(e,"q",function(){return s}),n.d(e,"r",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"i",function(){return i}),n.d(e,"g",function(){return l}),n.d(e,"u",function(){return u}),n.d(e,"v",function(){return c}),n.d(e,"f",function(){return p}),n.d(e,"a",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"h",function(){return m}),n.d(e,"l",function(){return f}),n.d(e,"n",function(){return b}),n.d(e,"m",function(){return g}),n.d(e,"k",function(){return y}),n.d(e,"s",function(){return v}),n.d(e,"o",function(){return _}),n.d(e,"p",function(){return C}),n.d(e,"t",function(){return w}),n.d(e,"c",function(){return z}),n.d(e,"d",function(){return O}),n.d(e,"b",function(){return j});var a=n("CcjM");function s(t){return Object(a.a)({url:"bzy-upms/authUser/list",method:"get",params:t})}function r(t){return Object(a.a)({url:"bzy-upms/authUser/findUsersByRoleCode",method:"post",data:t})}function o(t){return Object(a.a)({url:"bzy-upms/authUser/getAllUser",method:"get",params:t})}function i(t){return Object(a.a)({url:"bzy-hotel/hotel/listEffective",method:"post",data:t})}function l(t){return Object(a.a)({url:"bzy-hotel/city/hotelAreaResourceList",method:"get",params:t})}function u(t){return Object(a.a)({url:"bzy-upms/user/hotelResource",method:"post",data:t})}function c(t){return Object(a.a)({url:"bzy-upms/user/hotelResource",method:"put",data:t})}function p(t){return Object(a.a)({url:"bzy-upms/user/hotelResource/getResourcesByUserForm",method:"post",data:t})}function h(t,e,n){var s="1"===t?"bzy-upms/user/hotelResource/"+e:"bzy-upms/user/hotelResource/"+e+"?allocationObject="+n;return Object(a.a)({url:s,method:"delete"})}function d(t){return Object(a.a)({url:"bzy-hotel/resource/getReleation/"+t,method:"get"})}function m(){return Object(a.a)({url:"bzy-upms/department/list",method:"get"})}function f(){return Object(a.a)({url:"bzy-upms/department/getSubDepartmentList",method:"get"})}function b(){return Object(a.a)({url:"bzy-upms/department/getSubUserRoleList",method:"get"})}function g(t){return Object(a.a)({url:"bzy-upms/user/hotelResource/querySubUserHotelResourceList",method:"post",data:t})}function y(){return Object(a.a)({url:"bzy-hotel/resource/getReleationHotelEffective",method:"get"})}function v(){return Object(a.a)({url:"bzy-hotel/city/hotelAreaPermissionResourceList",method:"get"})}function _(t){return Object(a.a)({url:"bzy-upms/theater/subList/"+t,method:"get"})}function C(t){return Object(a.a)({url:"bzy-upms/theater/getTheaterNodeDetails/"+t,method:"get",data:t})}function w(t){return Object(a.a)({url:"/bzy-upms/theater",method:"post",data:t})}function z(t){return Object(a.a)({url:"/bzy-upms/theater",method:"put",data:t})}function O(){return Object(a.a)({url:"bzy-upms/theater/queryAll",method:"get"})}function j(t){return Object(a.a)({url:"bzy-upms/theater/"+t,method:"delete"})}},"/W7A":function(t,e,n){"use strict";n.r(e);var a=n("gDS+"),s=n.n(a),r=n("/8lg"),o=n("CcjM");var i={name:"CompanyInfoList",mixins:[n("t2Y8").a],data:function(){return{PATH:"company-info/list",users:[],managList:[],hotelNameOrCode:"",companyName:"",creator:"",status:"",rangeType:"",page:1,size:20,hotelTotal:"",total:0,totalPages:1,showDeleteDialog:!1,newFormVisible:!1,formInputWidth:"168px",companyStatus:[{value:1,label:"正常"},{value:0,label:"禁用"}],useStatus:[{value:1,label:"全国"},{value:0,label:"单店"}]}},created:function(){this._getCompanyManageList(),this._getUserList()},methods:{closeDialog:function(){this.newFormVisible=!1},handleSizeChange:function(t){this.size=t,this._getCompanyManageList()},handleCurrentChange:function(t){this.page=t,this._getCompanyManageList()},search:function(){this.page=1,this._getCompanyManageList()},_getUserList:function(){var t=this;Object(r.e)().then(function(e){t.users=e.data})},selectUser:function(t){if(t){var e=this.users.filter(function(e){return e.code===t});"{}"!==s()(e[0])&&(this.userInfo=e[0])}},unbundling:function(t){var e=this;this.row=t,this.$confirm("确定更改企业客户信息状态么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-sub",type:"warning"}).then(function(){e.okDelete()}).catch(function(){e.cancel()})},serchDetails:function(t){this.row=t;var e=this.$router.resolve({path:"/company-info/basicInfo?row="+s()(t)});window.open(e.href,"_blank")},cancel:function(){this.showDeleteDialog=!1,this.$message({type:"info",message:"已取消"})},okDelete:function(){this.showDeleteDialog=!1,this._unBindRelation()},_getCompanyManageList:function(){var t=this;this.managList=[];var e,n={hotelNameOrCode:this.hotelNameOrCode,companyName:this.companyName,creator:this.creator,status:this.status,rangeType:this.rangeType,page:this.page,size:this.size};(e=n,Object(o.a)({url:"bzy-sk/hotelCompany/list",method:"post",data:e})).then(function(e){t.managList=e.data.list,t.hotelTotal=t.managList&&t.managList.length?t.managList[0].hotelTotal:0,t.totalPages=e.data.pages,t.total=e.data.total})},_unBindRelation:function(){var t,e=this,n=this.row,a=n.id,s=n.status;(t={id:a,status:s},Object(o.a)({url:"bzy-sk/hotelCompany/updateStatus",method:"post",data:t})).then(function(t){e._getCompanyManageList(),e.$message({type:"success",message:"修改成功"})})}}},l=(n("DUNA"),n("KHd+")),u=Object(l.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hotel layout",attrs:{id:"company"}},[n("div",{staticClass:"tab-head"},[n("div",{staticClass:"tab-head-list"},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("酒店名称")]),t._v(" "),n("el-input",{style:{width:t.formInputWidth},attrs:{clearable:"",placeholder:"酒店名称/编号"},model:{value:t.hotelNameOrCode,callback:function(e){t.hotelNameOrCode=e},expression:"hotelNameOrCode"}})],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("客户名称")]),t._v(" "),n("el-input",{style:{width:t.formInputWidth},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.companyName,callback:function(e){t.companyName=e},expression:"companyName"}})],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("签约人")]),t._v(" "),n("el-select",{style:{width:t.formInputWidth},attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:t.selectUser},model:{value:t.creator,callback:function(e){t.creator=e},expression:"creator"}},t._l(t.users,function(t){return n("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)])],1),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"tab-list-item"},[n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("生效范围")]),t._v(" "),n("el-select",{style:{width:t.formInputWidth},attrs:{clearable:"",placeholder:"请选择"},model:{value:t.rangeType,callback:function(e){t.rangeType=e},expression:"rangeType"}},t._l(t.useStatus,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("状态")]),t._v(" "),n("el-select",{style:{width:t.formInputWidth},attrs:{clearable:"",placeholder:"请选择"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.companyStatus,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])],1)],1)],1)]),t._v(" "),n("div",{staticClass:"table-content"},[n("el-table",{staticStyle:{width:"100%","border-radius":"8px"},attrs:{data:t.managList,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{fixed:"",prop:"hotelName",label:"酒店名称","min-width":"150"}}),t._v(" "),n("el-table-column",{staticStyle:{"text-align":"left"},attrs:{prop:"companyName,status",label:"客户名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",{staticStyle:{"line-height":"14px"}},[0===e.row.status?n("i",{staticClass:"iconfont iconic_jinyong",staticStyle:{color:"#FF4E36"}}):t._e(),t._v(" "),1===e.row.status?n("i",{staticClass:"iconfont iconic_zhengchang",staticStyle:{color:"#006072"}}):t._e(),t._v("\n            "+t._s(e.row.companyName)+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"录入时间","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"creator",label:"签约人","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"rangeType",label:"生效范围","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1===e.row.rangeType?"全国":"单店"))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"preferentialValue,preferentialType",label:"协议价格","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.preferentialValue)+t._s(2===e.row.preferentialType?"元":"折"))]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.buttonFilter("edit",t.btnArr)?n("el-button",{staticClass:"btn-form-primary",attrs:{size:"mini"},on:{click:function(n){t.unbundling(e.row)}}},[t._v("修改状态")]):t._e(),t._v(" "),t.buttonFilter("view",t.btnArr)?n("el-button",{staticClass:"btn-form-sub",attrs:{size:"mini"},on:{click:function(n){t.serchDetails(e.row)}}},[t._v("查看详情")]):t._e()]}}])})],1)],1),t._v(" "),n("div",{staticClass:"sum"},[t._v("共计"+t._s(t.hotelTotal)+"家酒店  "+t._s(t.total)+"个企业客户")]),t._v(" "),n("div",{staticClass:"pagination-content"},[n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,40,80,100],"page-size":t.size,"page-count":t.totalPages,layout:" sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},[],!1,null,"65ff1704",null);u.options.__file="list.vue";e.default=u.exports},"3X/3":function(t,e,n){},DUNA:function(t,e,n){"use strict";var a=n("3X/3");n.n(a).a},"gDS+":function(t,e,n){t.exports={default:n("oh+g"),__esModule:!0}},"oh+g":function(t,e,n){var a=n("WEpk"),s=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},t2Y8:function(t,e,n){"use strict";var a=n("QbLZ"),s=n.n(a),r=n("L2JU");function o(t,e){return e.includes(t)}e.a={computed:s()({},Object(r.b)(["name","btnPermissionRoles"])),created:function(){this._initBtnPermission()},methods:{_initBtnPermission:function(){var t=function(t,e){var n=[];if(t.length)return t.map(function(t){var a=t.split(":")[0],s=t.split(":")[1];a===e&&n.push(s)}),n}(this.btnPermissionRoles,this.PATH);this.btnArr=t,this.buttonFilter=o}}}}}]);