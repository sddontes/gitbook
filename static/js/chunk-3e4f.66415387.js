(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3e4f"],{"5OVc":function(t,e,s){},"6aKk":function(t,e,s){"use strict";s.d(e,"p",function(){return n}),s.d(e,"r",function(){return l}),s.d(e,"q",function(){return i}),s.d(e,"o",function(){return o}),s.d(e,"n",function(){return r}),s.d(e,"v",function(){return c}),s.d(e,"a",function(){return u}),s.d(e,"k",function(){return d}),s.d(e,"h",function(){return h}),s.d(e,"l",function(){return m}),s.d(e,"m",function(){return p}),s.d(e,"b",function(){return b}),s.d(e,"d",function(){return f}),s.d(e,"c",function(){return g}),s.d(e,"e",function(){return v}),s.d(e,"j",function(){return y}),s.d(e,"g",function(){return _}),s.d(e,"f",function(){return A}),s.d(e,"s",function(){return C}),s.d(e,"i",function(){return x}),s.d(e,"t",function(){return E}),s.d(e,"u",function(){return j});var a=s("CcjM");function n(t){return Object(a.a)({url:"bzy-csg-settlement/settlementModel/pageList",method:"post",data:t})}function l(t){return Object(a.a)({url:"bzy-csg-settlement/settlementSubject/rule/pageList",method:"post",data:t})}function i(t){return Object(a.a)({url:"bzy-csg-settlement/settlementSubject/rule/detail/"+t,method:"get"})}function o(t){return Object(a.a)({url:"bzy-csg-settlement/bill/list",method:"post",data:t})}function r(t){return Object(a.a)({url:"bzy-csg-settlement/bill/queryBillDetail/"+t,method:"get"})}function c(t){return Object(a.a)({url:"bzy-csg-settlement/dataSync/serviceFeeExcel",method:"post",data:t})}function u(t){return Object(a.a)({url:"bzy-csg-settlement/settlementSubject/mini/achievement",method:"post",data:t})}function d(t){return Object(a.a)({url:"bzy-csg-settlement/billInfoAdjust/listByMultiselect",method:"post",data:t})}function h(t){return Object(a.a)({url:"bzy-csg-settlement/email/sendLog",method:"post",data:t})}function m(t){return Object(a.a)({url:"bzy-csg-settlement/paybill/pageList",method:"post",data:t})}function p(t){return Object(a.a)({url:"bzy-csg-settlement/email",method:"post",data:t})}function b(t){return Object(a.a)({url:"bzy-csg-settlement/billInfoAdjust/addBillInfoAdjust",method:"post",data:t})}function f(t){return Object(a.a)({url:"bzy-csg-settlement/billExtendConf?"+t,method:"get"})}function g(t){return Object(a.a)({url:"bzy-csg-settlement/billExtendConf",method:"post",data:t})}function v(t,e){return Object(a.a)({url:"bzy-csg-settlement/billExtendConf/"+t,data:e,method:"put",headers:{"Content-Type":"text/plain;charset=UTF-8"}})}function y(t){return Object(a.a)({url:"bzy-csg-settlement/dataSync/billExtend",method:"post",data:t})}function _(t){return Object(a.a)({url:"bzy-csg-settlement/billExtend/hierarchy",params:t,method:"get"})}function A(t){return Object(a.a)({url:"bzy-csg-settlement/billExtend/hotel",params:t,method:"get"})}function C(t){return Object(a.a)({url:"bzy-csg-settlement/settlementModel/list",data:t,method:"post"})}function x(t){return Object(a.a)({url:"bzy-csg-settlement/billInfoAdjust/importBillAdjustExcel",data:t,method:"post"})}function E(t){return Object(a.a)({url:"bzy-csg-settlement/transaction/payment",data:t,headers:{"Content-Type":"text/plain;charset=UTF-8"},method:"post"})}function j(t){return Object(a.a)({url:"bzy-csg-settlement/transaction/receipt",data:t,headers:{"Content-Type":"text/plain;charset=UTF-8"},method:"post"})}},MO4u:function(t,e,s){"use strict";var a={name:"FetchSuggestions",props:{hotelList:{type:Array,required:!0},searchTitle:{type:String,required:!0}},data:function(){return{code:"",searchCode:""}},methods:{blurSearch:function(){var t=this;if(this.code){var e=this.hotelList.find(function(e){return e.name===t.code||e.code===t.code});this.searchCode=e?e.code:this.code,this.$emit("getFetchCode",this.searchCode)}else this.$emit("getFetchCode",this.code)},handleSelect:function(t){this.searchCode=t.code,this.$emit("getFetchCode",this.searchCode)},querySearch:function(t,e){var s=this.hotelList;e(t?s.filter(this.createFilter(t)):s)},createFilter:function(t){return function(e){return e.name.indexOf(t)>-1}}}},n=(s("aT9M"),s("KHd+")),l=Object(n.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-list-item"},[t.searchTitle?s("span",{staticStyle:{display:"inline-block",flex:"0 0 70px","margin-right":"10px","text-align":"right"}},[t._v(t._s(t.searchTitle))]):t._e(),t._v(" "),s("el-autocomplete",{staticStyle:{width:"168px",flex:"0 1 atuo"},attrs:{"fetch-suggestions":t.querySearch,clearable:"","value-key":"name",placeholder:"酒店名称/编号"},on:{select:t.handleSelect,blur:t.blurSearch,clear:t.blurSearch},nativeOn:{change:function(e){return t.blurSearch(e)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)},[],!1,null,"cff8e71e",null);l.options.__file="index.vue";e.a=l.exports},OMKw:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACdklEQVRYR+2Yv4sTQRTHv29AovgDrPQqGzltYpHMbCT2WongISLaWHnN/QFq7/0BNtpYidp4KNddn9PszEIwjT+uVyvh7kAjm3ky4sJmL5usyW4IYVNm58dn3ve9N28eYc5/lORrt9vLQoh1IroM4FjB/PvMvEVED6WUH4ftNQDY6XSWwzB8D+BkwWDJ5X/0+/2LjUbjc/LDAKDW+jURXQfw1lq76nnetyJBfd8/LYR4AuAaM28opVZGAhpj9pys1tqlouEikG63e6rX6zlD7Espj48DZDdASnnAN4u0pDEmdd8BkFEDS8AU5RbDglrrFhE185CZmbeVUpfia03tg0EQtJh5fgHzsNyoNaa2YAm48HmwjOKFl7iM4lLiKX2gvEmmNCBcMWKtRbLKcevORT046oCZALPcJMPqvETNtwRgDcANAGcA9Jl5h4g2ATyWUn4d+y5Oc9Ys9eAoQK31ChE9A3AixVq7RHS3Xq9vzPxVFwTBTWZ+AUCM8VXLzLeVUq/i4zJJPGkQGGOcrK6lMWA5a+3fkl8I0UqsvQvgfFzuogEfAbifPGD07o5cKvF9XUr5IPqvaMAvAM7+J2BXSnlhVoC/ARxymzlZPc/bHuYuvu83Y3L/klIemRXgTwCH//lbs1arvZsWMNfmkTHmA4BqbhLH2m9vKpXKarVa/T5pBLt5xph8gySvBmaUtF2aYeZPRDTQVhNCNMMwpGSaYeY9IjqXmmbcqWMt4CsAjk5iwfitorW+RUTPMybqO0qpl6mJehKYLHMcJICnSUtGc53lANxLwh2oZrJsNukYJ7cQYs1aezWWG3eEEJvW2mzFwqSbFznvDwSr4Th1V6xnAAAAAElFTkSuQmCC"},TegB:function(t,e,s){},Wczr:function(t,e,s){"use strict";s.r(e);var a=s("P2sY"),n=s.n(a),l=s("6aKk"),i=s("Q2AE"),o=s("MO4u"),r=s("t2Y8"),c=s("kkBN"),u={name:"ShopAssignRecord",components:{FetchSuggestions:o.a},mixins:[r.a],data:function(){return{PATH:"settle-accounts/payment-collection",formLabelWidth:"100px",formInputWidth:"100px",dialogFormVisible:!1,imagePath:s("OMKw"),oosUrl:"",adjustSubitem:"",formData:{projectType:"4"},headers:{Authorization:"bearer"+Object(c.a)()},sortObj:{orderType:"",orderColumn:""},hotelList:[],searchForm:{hotelCodeOrName:"",batchNo:"",updater:""},aceiptStatus:"",statusList:[{label:"全部",value:""},{label:"未结",value:"0"},{label:"已结",value:"1"}],batchNo:"",dataTypeList:[],importDataType:[],assigns:[],dialogIndex:0,action:"",limit:1,loading:!1,currentPage:1,size:20,totalPages:1,total:0}},created:function(){this.action="https://bzy-fs.hhotel.com/bzy-file-server/uploadfile";var t=new Date,e=t.getMonth();t.getDate()>3?this.searchForm.batchNo=t.getFullYear()+""+(e>9?e:"0"+e):this.searchForm.batchNo=t.getFullYear()+""+(e-1>9?e-1:"0"+(e-1)),this._listByMultiselect(),this._getRemoteData()},methods:{search:function(){this.currentPage=1,this._listByMultiselect()},sortColumn:function(t){this.sortObj.orderColumn=t.prop,"ascending"===t.order?this.sortObj.orderType="asc":"descending"===t.order?this.sortObj.orderType="desc":(this.sortObj.orderType=void 0,this.sortObj.orderColumn=void 0),this.page=1,this._listByMultiselect()},getFetchCode:function(t){this.searchForm.hotelCodeOrName=t},_listByMultiselect:function(){var t=this,e=n()(this.searchForm,{page:this.currentPage,size:this.size});this.loading=!0,Object(l.k)(e).then(function(e){t.loading=!1,t.assigns=e.data.list,t.totalPages=e.data.pages,t.total=e.data.total})},_getRemoteData:function(){var t=this;i.a.dispatch("getHotelList").then(function(e){t.hotelList=e})},handleSizeChange:function(t){this.size=t,this._listByMultiselect()},handleCurrentChange:function(t){this.currentPage=t,this._listByMultiselect()},handleSelectionChange:function(t){this.multipleSelection=t},_exportAdjustBillExcelTemp:function(){var t=1===this.dialogIndex?"https://bzy-pro-file.oss-cn-shanghai.aliyuncs.com/csg/bzy-csg-settlement/%E7%BA%BF%E4%B8%8B%E6%89%93%E6%AC%BE%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx":"https://bzy-pro-file.oss-cn-shanghai.aliyuncs.com/csg/bzy-csg-settlement/%E7%BA%BF%E4%B8%8B%E6%94%B6%E6%AC%BE%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx";window.open(t,"_blank")},_transactionPayment:function(){var t=this;this.oosUrl?Object(l.t)(this.oosUrl).then(function(e){200===e.code?(t.$message({type:"success",message:e.message}),t._listByMultiselect()):t.$message({type:"error",message:e.message}),t.$refs.upload.clearFiles(),t.dialogFormVisible=!1,t.oosUrl=""}):this.$message.error("请上传文件")},_transactionReceipt:function(){var t=this;this.oosUrl?Object(l.u)(this.oosUrl).then(function(e){200===e.code?(t.$message({type:"success",message:e.message}),t._listByMultiselect()):t.$message({type:"error",message:e.message}),t.$refs.upload.clearFiles(),t.dialogFormVisible=!1,t.oosUrl=""}):this.$message.error("请上传文件")},importBillAdjustExcel:function(){0===this.dialogIndex?this._transactionReceipt():this._transactionPayment()},handleExcelSuccess:function(t,e){this.oosUrl=t.data[0].filePath},uploadError:function(t){this.$message({type:"error",message:JSON.parse(t.message).message})},_exportExcel:function(){var t=n()({},this.searchForm),e="";for(var s in t)t[s]?e+="&"+s+"="+t[s]:e+="&"+s+"=";var a="http://bzy.hhotel.com/bzy-csg-settlement/billInfoAdjust/export?"+(e=e.substring(1));window.open(encodeURI(a),"_blank")},inputFileDialog:function(t){this.dialogIndex=t,this.dialogFormVisible=!0},cancelDialog:function(){this.oosUrl="",this.dialogFormVisible=!1}}},d=(s("webX"),s("KHd+")),h=Object(d.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hotel layout",attrs:{id:"manager"}},[s("div",{staticClass:"el-row",attrs:{id:"returnBillStatus"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"returnBill"},[t._v("\n          20%\n          "),s("br"),t._v(" "),s("span",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v("回款率（103家）")])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"returnBill returnDetail"},[t._v("\n          82%\n          "),s("br"),t._v(" "),s("span",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v("上期回款率（1-3家）")])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"returnBill returnDetail"},[t._v("\n          ￥1002121\n          "),s("br"),t._v(" "),s("span",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v("本期累计回款")])])])],1)],1),t._v(" "),s("div",{staticClass:"tab-head"},[s("div",{staticClass:"tab-head-list"},[s("div",{staticClass:"el-row"},[s("div",{staticClass:"el-col el-col-22"},[s("div",{staticClass:"el-col"},[s("div",{staticClass:"tab-list-item"},[s("fetchSuggestions",{staticStyle:{width:"250px"},attrs:{"hotel-list":t.hotelList,"search-title":"结算方名称"},on:{getFetchCode:t.getFetchCode}}),t._v(" "),s("span",{staticClass:"left_label"},[t._v("状态")]),t._v(" "),s("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.aceiptStatus,callback:function(e){t.aceiptStatus=e},expression:"aceiptStatus"}},t._l(t.statusList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("span",{staticClass:"left_label"}),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)]),t._v(" "),s("div",{staticClass:"el-col"})])])])]),t._v(" "),s("div",{staticClass:"table-content"},[t.buttonFilter("settle-accounts",t.btnArr)?s("span",{staticClass:"float-right",on:{click:function(e){t.inputFileDialog(0)}}},[s("i",{staticClass:"addIcon"},[t._v("+")]),t._v(" "),s("span",{attrs:{type:"primary"}},[t._v("收款导入")])]):t._e(),t._v(" "),t.buttonFilter("settle-accounts",t.btnArr)?s("span",{staticClass:"float-right",on:{click:function(e){t.inputFileDialog(1)}}},[s("i",{staticClass:"addIcon"},[t._v("+")]),t._v(" "),s("span",{attrs:{type:"primary"}},[t._v("打款导入")])]):t._e(),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.assigns,"default-sort":{prop:["amountExtend","amountExt1end"]},"max-height":"500","empty-text":"暂无数据"},on:{"sort-change":t.sortColumn}},[s("el-table-column",{attrs:{prop:"hotelName",label:"酒店名称","min-width":"140","max-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",[t._v(t._s(e.row.hotelCode)+" "+t._s(e.row.hotelName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"batchNo",label:"最新账期"}}),t._v(" "),s("el-table-column",{attrs:{label:"当前应收金额",prop:"amountExtend",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(t._f("ThousandNum")(e.row.amountExtend)))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"预付金额",prop:"amountExtend",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(t._f("ThousandNum")(e.row.amountExtend)))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"累计应收金额",prop:"amountExtend",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(t._f("ThousandNum")(e.row.amountExtend)))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"累计汇款金额",prop:"amountExtend",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(t._f("ThousandNum")(e.row.amountExtend)))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{style:0===e.row.status?"color: #FF4E36":""},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",[t._v(t._s(e.row.createTime))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticClass:"btn-form-sub",attrs:{type:"text"},on:{click:function(s){t._exportExcel(e.row)}}},[t._v("导出")])]}}])})],1)],1),t._v(" "),s("div",{staticClass:"sum"},[t._v("共"+t._s(t.total)+"条记录")]),t._v(" "),s("div",{staticClass:"pagination-content"},[s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,40,80,100],"page-size":t.size,"page-count":t.totalPages,layout:" sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),s("el-dialog",{staticClass:"publicDialog",attrs:{visible:t.dialogFormVisible,"show-close":!1,title:0===t.dialogIndex?"收款数据导入":"打款信息导入",width:"40.6%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",[s("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"选择文件"}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-error":t.uploadError,headers:t.headers,"on-success":t.handleExcelSuccess,"auto-upload":!0,action:t.action,data:t.formData,limit:t.limit,name:"files"}},[s("div",{staticClass:"viewFile"},[s("img",{attrs:{src:t.imagePath,alt:"浏览"}}),t._v(" "),s("p",{staticStyle:{padding:"0",margin:"0"}},[t._v("浏览")])])])],1),t._v(" "),s("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"下载模板"}},[s("a",{staticStyle:{display:"inline-block",width:"98px",height:"32px","line-height":"32px",background:"rgba(0,96,114,0.1)","border-radius":"4px",color:"#006072","text-align":"center"},attrs:{target:"_blank"},on:{click:t._exportAdjustBillExcelTemp}},[t._v("下载模板")])])],1),t._v(" "),s("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-dialog-sub",on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),s("el-button",{staticClass:"btn-dialog-primary",attrs:{type:"primary"},on:{click:t.importBillAdjustExcel}},[t._v("提 交")])],1)],1)],1)},[],!1,null,"2c00ce18",null);h.options.__file="paymentCollection.vue";e.default=h.exports},aT9M:function(t,e,s){"use strict";var a=s("5OVc");s.n(a).a},t2Y8:function(t,e,s){"use strict";var a=s("QbLZ"),n=s.n(a),l=s("L2JU");function i(t,e){return e.includes(t)}e.a={computed:n()({},Object(l.b)(["name","btnPermissionRoles"])),created:function(){this._initBtnPermission()},methods:{_initBtnPermission:function(){var t=function(t,e){var s=[];if(t.length)return t.map(function(t){var a=t.split(":")[0],n=t.split(":")[1];a===e&&s.push(n)}),s}(this.btnPermissionRoles,this.PATH);this.btnArr=t,this.buttonFilter=i}}}},webX:function(t,e,s){"use strict";var a=s("TegB");s.n(a).a}}]);