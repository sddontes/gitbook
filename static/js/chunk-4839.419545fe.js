(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4839"],{"14Xm":function(t,e,a){t.exports=a("cSMa")},"Ch/I":function(t,e,a){"use strict";a.d(e,"f",function(){return s}),a.d(e,"h",function(){return i}),a.d(e,"g",function(){return n}),a.d(e,"d",function(){return l}),a.d(e,"c",function(){return o}),a.d(e,"j",function(){return u}),a.d(e,"e",function(){return c}),a.d(e,"k",function(){return d}),a.d(e,"b",function(){return p}),a.d(e,"a",function(){return m}),a.d(e,"i",function(){return f});var r=a("VLRh"),s=[{value:0,label:"全部"},{value:"T_00000001",label:"酒店图片上传"},{value:"T_00000002",label:"实勘"},{value:"T_00000003",label:"完整设计方案"},{value:"T_00000004",label:"完整方案业主确定"},{value:"T_00000005",label:"下单制作安装"},{value:"T_00000010",label:"酒店图片上传--图片上传"},{value:"T_00000020",label:"实勘--改造评估报告图片上传"},{value:"T_00000030",label:"完整设计方案--整体设计方案图片上传"},{value:"T_00000040",label:"完整方案业主确定--业务确认函图片上传"},{value:"T_00000050",label:"下单制作安装--店招"},{value:"T_00000051",label:"下单制作安装--室内改造"},{value:"T_00000052",label:"下单制作安装--集采物质"}],i=[{value:0,label:"全部"},{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已完成"},{value:4,label:"已暂停"},{value:5,label:"已终止"}],n=[{value:0,label:"全部"},{value:"T_00000001",label:"评估照片上传"},{value:"T_00000002",label:"评估报告上传"},{value:"T_00000003",label:"完整设计方案"},{value:"T_00000004",label:"完整方案业主确定"},{value:"T_00000005",label:"下单制作安装"}],l=[{value:0,label:"全部"},{value:r.h,label:"品牌加盟"},{value:r.n,label:"软保底"},{value:r.c,label:"商务咨询"},{value:r.g,label:"加盟保底"}],o=[{value:0,label:"全部"},{value:r.r,label:"待运营"},{value:r.k,label:"运营中"},{value:r.l,label:"已暂停"},{value:r.q,label:"已解约"}],u=[{value:0,label:"全部"},{value:r.p,label:"未分配"},{value:r.a,label:"已分配"},{value:r.b,label:"已到店"}],c=[{value:0,label:"待定"},{value:1,label:"爱马仕橙"},{value:2,label:"孔雀蓝"},{value:3,label:"经典蓝"},{value:4,label:"青春绿"}],d=[{label:"全部",value:0},{label:"一战区",value:1},{label:"二战区",value:2},{label:"三战区",value:3},{label:"四战区",value:4},{label:"五战区",value:5},{label:"六战区",value:6},{label:"七战区",value:7},{label:"八战区",value:8}],p=[{label:"未参加",value:0},{label:"不及格",value:1},{label:"及格",value:2},{label:"良好",value:3},{label:"优秀",value:4}],m=[{label:"未参加",value:0},{label:"未通过",value:1},{label:"通过",value:2}],f=[{label:"全部",value:""},{label:"已派单",value:1},{label:"未派单",value:0}]},D3Ub:function(t,e,a){"use strict";e.__esModule=!0;var r,s=a("4d7F"),i=(r=s)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new i.default(function(t,a){return function r(s,n){try{var l=e[s](n),o=l.value}catch(t){return void a(t)}if(!l.done)return i.default.resolve(o).then(function(t){r("next",t)},function(t){r("throw",t)});t(o)}("next")})}}},GkOH:function(t,e,a){},I1uo:function(t,e,a){"use strict";var r=a("GkOH");a.n(r).a},PL9y:function(t,e,a){},RjQZ:function(t,e,a){"use strict";var r=a("nVrq");a.n(r).a},S4hP:function(t,e,a){"use strict";var r=a("VLyJ");a.n(r).a},VLRh:function(t,e,a){"use strict";a.d(e,"n",function(){return r}),a.d(e,"h",function(){return s}),a.d(e,"c",function(){return i}),a.d(e,"g",function(){return n}),a.d(e,"k",function(){return l}),a.d(e,"r",function(){return o}),a.d(e,"l",function(){return u}),a.d(e,"q",function(){return c}),a.d(e,"f",function(){return d}),a.d(e,"e",function(){return p}),a.d(e,"j",function(){return m}),a.d(e,"s",function(){return f}),a.d(e,"o",function(){return v}),a.d(e,"d",function(){return h}),a.d(e,"p",function(){return g}),a.d(e,"a",function(){return b}),a.d(e,"b",function(){return _}),a.d(e,"m",function(){return y}),a.d(e,"t",function(){return k}),a.d(e,"i",function(){return S});var r="SOLFT_GUARANTEE",s="LOGO_JOIN",i="BUSINESS_CONSULT",n="JOIN_GUARANTEE",l="OPERATIONING",o="WAIT_OPERATION",u="PAUSED",c="VERB",d="EAST_WEST_NORTH",p="EAST",m="NORTH",f="WEST_SOUTH",v="SOUTH",h="CENTRAL",g="UNALLOCATED",b="ALLOCATED",_="ARRIVED",y="PROPRIETOR_CONFIRMED",k="YEAR_GUARANTEE",S="MONTH_GUARANTEE"},VLyJ:function(t,e,a){},WmeM:function(t,e,a){"use strict";var r=a("PL9y");a.n(r).a},"c+Lz":function(t,e,a){},cSMa:function(t,e,a){var r=function(){return this}()||Function("return this")(),s=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=s&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=a("u4eC"),s)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},"gDS+":function(t,e,a){t.exports={default:a("oh+g"),__esModule:!0}},kVJ8:function(t,e,a){"use strict";var r=a("lTBW");a.n(r).a},kgAu:function(t,e,a){"use strict";a.r(e);var r=a("GQeE"),s=a.n(r),i=a("gDS+"),n=a.n(i),l=a("14Xm"),o=a.n(l),u=a("P2sY"),c=a.n(u),d=a("D3Ub"),p=a.n(d),m={props:{pauseFlag:{type:Boolean,required:!1,default:function(){return!1}},saveFlag:{type:Boolean,required:!1,default:function(){return!1}},restartFlag:{type:Boolean,required:!1,default:function(){return!1}},step:{type:Number,required:!0,default:function(){return 1}},taskStatus:{type:Number,default:function(){return 0}}},methods:{pause:function(t){this.$emit("pause",t)},save:function(t){this.$emit("save",t)},restart:function(t){this.$emit("restart",t)},reset:function(t){this.$emit("reset",t)}}},f=a("KHd+"),v=Object(f.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[4!==t.taskStatus&&5!==t.taskStatus?a("el-button",{attrs:{loading:t.saveFlag,type:"primary"},on:{click:function(e){t.save(t.step)}}},[t._v("保存")]):t._e(),t._v(" "),4!==t.taskStatus&&5!==t.taskStatus?a("el-button",{staticClass:"btn-sub",attrs:{loading:t.pauseFlag},on:{click:function(e){t.pause(t.step)}}},[t._v("暂停")]):t._e(),t._v(" "),4===t.taskStatus?a("el-button",{staticClass:"restart",staticStyle:{position:"relative","z-index":"3"},attrs:{loading:t.restartFlag,type:"primary"},on:{click:function(e){t.restart(t.step)}}},[t._v("重启项目")]):t._e(),t._v(" "),5===t.taskStatus?a("el-button",{staticClass:"restart",attrs:{loading:t.restartFlag,type:"primary"},on:{click:function(e){t.reset(t.step)}}},[t._v("重置项目")]):t._e()],1)},[],!1,null,null,null);v.options.__file="buttonGroups.vue";var h=v.exports,g=a("wX0E"),b={props:{dataSetting:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{resData:this.dataSetting,pauseFlag:!1,saveFlag:!1,restartFlag:!1}},computed:{taskImgStatus:function(){var t="bg-IR_success";switch(this.data.taskStatus){case null:case 1:t="bg-IR_notBegin";break;case 3:t="bg-IR_success";break;case 4:t="bg-IR_stop"}return t}},components:{ButtonGroups:h},created:function(){this.init()},watch:{dataSetting:function(t){this.resData=t,this.init()}},methods:{getMaskStatus:function(){if(this.step-2>this.dataSetting.projectTaskList.length-1)return!0;var t=this.step>2?this.resData.projectTaskList[this.step-3].taskStatus:3;return void 0===this.taskStatus&&(this.taskStatus=this.data.taskStatus),3!==t||3===this.taskStatus||3===this.resData.projectTaskList[this.step-2].taskStatus||4===this.resData.projectTaskList[this.step-2].taskStatus||5===this.resData.projectBaseDtailVo.project.status},abnormalChange:function(){var t=this;this.resData.taskOverdueVos[this.step-2].taskOverdueReason.forEach(function(e){e.overCode===t.data.overCode&&(t.data.overdueReason=e.ovdueName)})},init:function(){var t=s()(this.data);switch(this.step){case 1:this.dataCopy(t,this.dataSetting.projectBaseDtailVo.project);break;case 2:if(this.dataSetting.projectTaskList.length<this.step-2)return;this.dataCopy(t,this.dataSetting.projectTaskList[this.step-2]),this.dataDisposeTwo(),1===this.data.taskStatus&&(this.data.reverseTime=null);break;case 3:case 4:case 5:if(this.dataSetting.projectTaskList.length-1<this.step-2)return;this.dataCopy(t,this.dataSetting.projectTaskList[this.step-2]),this.dataDisposeThree(),1===this.data.taskStatus&&(this.data.reverseTime=null);break;case 6:if(this.dataSetting.projectTaskList.length-1<this.step-2)return;this.dataCopy(t,this.dataSetting.projectTaskList[this.step-2]),this.dataDisposeSix()}},reset:function(){var t=this;this.restartFlag=!0;var e=this;this._myConfirm({title:"重置项目",msg:"您是否需要重置项目<span style='color: #006072'> "+this.resData.projectBaseDtailVo.project.hotelCode+" "+this.resData.projectBaseDtailVo.project.hotelName+"</span>",icon:"hint",yesBtnText:"确定",noBtnText:"取消"}).then(function(){e._resetProjectStatus()}).catch(function(){t.restartFlag=!1,t._myMessage({msg:"已取消",type:"info"})})},reqBefore:function(){var t=this;return p()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={},1!==t.step&&(a={systemId:t.resData.projectTaskList[t.step-2].systemId,version:t.resData.projectTaskList[t.step-2].version,templateCode:t.resData.projectTaskList[t.step-2].templateCode,templateName:t.resData.projectTaskList[t.step-2].templateName,hotelCode:t.resData.projectTaskList[t.step-2].hotelCode,taskCode:t.resData.projectTaskList[t.step-2].taskCode,taskId:t.resData.projectTaskList[t.step-2].taskId,taskFlowId:t.resData.projectTaskList[t.step-2].taskFlowId,taskStatus:t.resData.projectTaskList[t.step-2].taskStatus}),e.t0=t.step,e.next=1===e.t0?5:2===e.t0?7:3===e.t0?8:4===e.t0?8:5===e.t0?8:6===e.t0?11:15;break;case 5:return a=c()({},t.data),e.abrupt("return",a);case 7:return e.abrupt("return",t.uploadingBefore().then(function(){return a.data=t.reqDataDisposeTwo(),a.taskName=a.data.taskName,a}));case 8:return a.data=c()({},t.data),0===a.data.fileUrl.length?a.data.fileUrl="":(r=a.data.fileUrl.map(function(t){return t.url}),a.data.fileUrl=r.join(",")),e.abrupt("break",15);case 11:return e.next=13,t.reqDataDisposeSix();case 13:return a.data=c()({},t.data),e.abrupt("break",15);case 15:return a.taskName=a.data.taskName,e.abrupt("return",a);case 17:case"end":return e.stop()}},e,t)}))()},save:function(){var t=this;return p()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateCommon(t.step)){e.next=2;break}return e.abrupt("return");case 2:return t.saveFlag=!0,e.next=5,t.reqBefore();case 5:a=e.sent,1===t.step?t._updateLevel(a):t._updateProjectStatus(a);case 7:case"end":return e.stop()}},e,t)}))()},pause:function(t){var e=this;return p()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validateCommon(e.step)){t.next=2;break}return t.abrupt("return");case 2:return e.pauseFlag=!0,t.next=5,e.reqBefore();case 5:(a=t.sent).newTaskStatus=4,1!==e.step&&e.$confirm("项目暂停后将无法修改数据，确定要执行暂停操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e._taskChangeStatus(a,"暂停")}).catch(function(){e.pauseFlag=!1,e._myMessage({msg:"已取消暂停",type:"info"})});case 8:case"end":return t.stop()}},t,e)}))()},restart:function(){var t=this;return p()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateCommon(t.step)){e.next=2;break}return e.abrupt("return");case 2:return t.restartFlag=!0,e.next=5,t.reqBefore();case 5:(a=e.sent).newTaskStatus=2,t._taskChangeStatus(a,"重启");case 8:case"end":return e.stop()}},e,t)}))()},reqDataDisposeTwo:function(){var t=c()({},this.data),e=n()(this.tabTitles);return(e=JSON.parse(e)).forEach(function(e){e.imgUrls=e.imgUrls.map(function(t){return t.url}),t[e.key]=e.imgUrls.join(",")}),t.roomOneName=this.tabTitles[5].title,t.roomTwoName=this.tabTitles[6].title,t.roomThreeName=this.tabTitles[7].title,t.roomFourName=this.tabTitles[8].title,t.roomFiveName=this.tabTitles[9].title,t},reqDataDisposeSix:function(){var t=this;return p()(o.a.mark(function e(){var a,r,s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,r=0,s=0,i=9999999999999,e.next=6,t.obj.list.forEach(function(e,n){var l=new Date(e.reverseTime).getTime();switch(a=l>s?n:a,r=l<i?n:r,s=l>s?l:s,i=l<i?l:i,e.key){case"shop_recruit_status":t.data.shopRecruitStatus=e.value,t.data.shopRecruitTime=e.reverseTime;break;case"indoor_reform_status":t.data.indoorReformStatus=e.value,t.data.indoorReformTime=e.reverseTime;break;case"collect_material_status":t.data.collectMaterialStatus=e.value,t.data.collectMaterialTime=e.reverseTime}});case 6:return e.next=9,t.obj.list.every(function(t){return 3===t.value});case 9:if(!e.sent){e.next=13;break}e.t0=t.obj.list[a].reverseTime,e.next=14;break;case 13:e.t0=t.obj.list[r].reverseTime;case 14:t.data.reverseTime=e.t0;case 15:case"end":return e.stop()}},e,t)}))()},validateCommon:function(t){var e=this,a=!1;return t>=3&&t<=5?this.$children[0].$refs["rules"+t].validate(function(t){if(!t)return e.pauseFlag=!1,e.saveFlag=!1,e.restartFlag=!1,!1;a=!0}):this.$refs["rules"+t].validate(function(t){if(!t)return e.pauseFlag=!1,e.saveFlag=!1,e.restartFlag=!1,!1;a=!0}),a},dataDisposeTwo:function(){var t=this;return p()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.tabTitles.forEach(function(e,a){if(t.data.hasOwnProperty(e.key)&&t.data[e.key]&&(e.imgUrls=t.data[e.key].split(",").map(function(t){return{url:t}})),a>=5)switch(a){case 5:e.title=t.data.roomOneName||"房型1";break;case 6:e.title=t.data.roomTwoName||"房型2";break;case 7:e.title=t.data.roomThreeName||"房型3";break;case 8:e.title=t.data.roomFourName||"房型4";break;case 9:e.title=t.data.roomFiveName||"房型5"}});case 3:case"end":return e.stop()}},e,t)}))()},dataDisposeThree:function(){this.data.fileUrl?this.data.fileUrl=this.data.fileUrl.split(",").map(function(t,e){return{url:t}}):this.data.fileUrl=[]},dataDisposeSix:function(){var t=this;this.obj.list.forEach(function(e){switch(e.key){case"shop_recruit_status":e.value=null===t.data.shopRecruitStatus?1:t.data.shopRecruitStatus,e.reverseTime=1===t.data.taskStatus?null:t.data.shopRecruitTime;break;case"indoor_reform_status":e.value=null===t.data.indoorReformStatus?1:t.data.indoorReformStatus,e.reverseTime=1===t.data.taskStatus?null:t.data.indoorReformTime;break;case"collect_material_status":e.value=null===t.data.collectMaterialStatus?1:t.data.collectMaterialStatus,e.reverseTime=1===t.data.taskStatus?null:t.data.collectMaterialTime}})},dataCopy:function(t,e){var a=this;return p()(o.a.mark(function r(){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.forEach(function(t){a.data[t]=e[t]});case 2:case"end":return r.stop()}},r,a)}))()},againRequest:function(){this.$emit("againRequest",!0)},_updateProjectStatus:function(t){var e=this;this.pauseFlag=!1,this.saveFlag=!1,this.restartFlag=!1,Object(g.k)(t).then(function(t){201===t.data?e._myMessage({msg:t.message,type:"error"}):e._myMessage({msg:"更新成功！",cd:e.againRequest()})})},_taskChangeStatus:function(t,e){var a=this;this.pauseFlag=!1,Object(g.i)(t).then(function(t){a.pauseFlag=!1,a._myMessage({msg:"已"+e+"！",cb:a.againRequest()})})}}},_=a("Ch/I"),y={name:"ProjectGrade",mixins:[a("t2Y8").a,b],data:function(){return{step:1,data:{hotelCode:null,projectEndTime:null,projectLevel:null},projectLevels:_.e,rules1:{projectLevel:[{required:!0,message:"请选择项目等级",trigger:"change"}],projectEndTime:[{required:!0,message:"请选择预计完成日期",trigger:"change"}]},restartFlag:!1,PATH:"tr-project-manage/details/*"}},methods:{_resetProjectStatus:function(){var t=this;Object(g.h)(this.data.hotelCode).then(function(e){if(t.restartFlag=!1,"success"===e.message)return t._myMessage({msg:"项目重置成功",cb:t.againRequest()});t._myMessage({msg:e.message,type:"error"})})},_updateLevel:function(t){var e=this;this.saveFlag=!1,Object(g.j)(t).then(function(t){e.againRequest()})}}},k=(a("S4hP"),Object(f.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projectGrade"},[a("div",{staticClass:"tab-head"},[a("el-form",{ref:"rules1",attrs:{model:t.data,rules:t.rules1}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-col",{attrs:{span:12,lg:12,md:24,sm:24,xs:24}},[a("div",{staticClass:"tab-list-item"},[a("el-form-item",{attrs:{label:"项目等级","label-width":"90px",prop:"projectLevel"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},on:{change:t.save},model:{value:t.data.projectLevel,callback:function(e){t.$set(t.data,"projectLevel",e)},expression:"data.projectLevel"}},t._l(t.projectLevels,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)]),t._v(" "),a("el-col",{attrs:{span:12,lg:12,md:24,sm:24,xs:24}},[a("div",{staticClass:"tab-list-item"},[a("el-form-item",{attrs:{label:"预计完成日期","label-width":"120px",prop:"projectEndTime"}},[a("el-date-picker",{staticStyle:{width:"180px",flex:"0 0 auto"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},on:{change:t.save},model:{value:t.data.projectEndTime,callback:function(e){t.$set(t.data,"projectEndTime",e)},expression:"data.projectEndTime"}})],1)],1)])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"tab-list-item"},[a("el-form-item",[a("div",{staticStyle:{float:"right"}},[1!==t.resData.projectBaseDtailVo.project.status&&t.buttonFilter("reset",t.btnArr)?a("ButtonGroups",{attrs:{step:t.step,"restart-flag":t.restartFlag,"task-status":5},on:{reset:t.reset}}):t._e()],1)])],1)])],1)],1)],1)])},[],!1,null,null,null));k.options.__file="ProjectGrade.vue";var S=k.exports,T=a("4d7F"),w=a.n(T),j=a("vDqi"),x=a.n(j),C={name:"PictureUpLoad",mixins:[b],data:function(){return{step:2,previousIndex:0,action:"https://bzy-fs.hhotel.com/bzy-file-server/uploadfile?number="+Math.random(),taskOverdueReason:[],tabTitles:[{key:"appearanceImgUrl",id:0,title:"外观",value:0,deserve:10,minImgLen:2,asterisk:"*",imgUrls:[]},{key:"lobbyImgUrl",id:1,title:"大堂",value:0,deserve:10,minImgLen:4,asterisk:"*",imgUrls:[]},{key:"elevatorImgUrl",id:2,title:"电梯",value:0,deserve:10,minImgLen:2,asterisk:"",imgUrls:[]},{key:"corridorImgUrl",id:3,title:"走廊",value:0,deserve:10,minImgLen:2,asterisk:"*",imgUrls:[]},{key:"publicAreaImgUrl",id:4,title:"其他区域",value:0,deserve:10,minImgLen:4,asterisk:"*",imgUrls:[]},{key:"roomOneImgUrl",id:5,title:"房型1",value:0,deserve:10,minImgLen:6,asterisk:"*",imgUrls:[]},{key:"roomTwoImgUrl",id:6,title:"房型2",value:0,deserve:10,minImgLen:6,asterisk:"*",imgUrls:[]},{key:"roomThreeImgUrl",id:7,title:"房型3",value:0,deserve:10,minImgLen:6,asterisk:"",imgUrls:[]},{key:"roomFourImgUrl",id:8,title:"房型4",value:0,deserve:10,minImgLen:6,asterisk:"",imgUrls:[]},{key:"roomFiveImgUrl",id:9,title:"房型5",value:0,deserve:10,minImgLen:6,asterisk:"",imgUrls:[]}],rules2:{overCode:[{required:!0,message:"请选择异常原因",trigger:"change"}],reverseTime:[{required:!0,message:"请选择预计完成日期",trigger:"change"}]},dialogVisible:!1,dialogImageUrl:"",active:null,showImgList:[],data:{taskStatus:null,taskName:null,appearanceImgUrl:null,lobbyImgUrl:null,elevatorImgUrl:null,corridorImgUrl:null,publicAreaImgUrl:null,roomOneImgUrl:null,roomOneName:null,roomTwoImgUrl:null,roomTwoName:null,roomThreeImgUrl:null,roomThreeName:null,roomFourImgUrl:null,roomFourName:null,roomFiveImgUrl:null,roomFiveName:null,reverseTime:null,overCode:null,overdueReason:null,remark:null,isOverdue:null},loading:!1}},computed:{headers:function(){return{ContentType:"multipart/form-data"}}},watch:{active:function(t,e){var a=this;if(t!==e){this.previousIndex=e||0,this.tabTitles.forEach(function(t,r){r===e&&(t.imgUrls=a.showImgList)});var r=this.tabTitles.filter(function(t,e){return e===a.active});this.showImgList=r[0].imgUrls,3!==this.data.taskStatus&&4!==this.data.taskStatus||this.$nextTick(function(){var t=document.getElementsByClassName("el-icon-delete");Array.prototype.forEach.call(t,function(t){t.style.display="none"})})}}},mounted:function(){var t=this;this.$nextTick(function(){t.active=0})},methods:{tabClick:function(t){var e=this;this.uploadingBefore().then(function(){e.active=t})},uploadingBefore:function(){var t=this;return new w.a(function(e,a){var r=[];t.tabTitles[t.active].imgUrls.filter(function(t){t.file&&r.push(t.file)}),0!==r.length?(t.loading=!0,t.subPicForm(r,e)):e(!0)})},handleOutSideRemoveImags:function(t,e){this.showImgList=e,this.tabTitles[this.active].imgUrls=e},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleExceed:function(t,e){this.$message.warning("当前限制上传 10 个图片")},handleAvatarSuccess:function(t){var e=this,a=new FileReader;a.readAsDataURL(t.file),a.onload=function(a){e.tabTitles[e.active].imgUrls.push({url:a.target.result,file:t.file})}},subPicForm:function(t,e){var a=this;return p()(o.a.mark(function r(){var s,i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=new FormData,r.next=3,t.forEach(function(t){s.append("files",t)});case 3:a.$refs.upload.submit(),s.append("projectType","2"),i={headers:{"Content-Type":"multipart/form-data"}},x.a.post(a.action,s,i).then(function(t){var r=0;a.tabTitles[a.active].imgUrls.forEach(function(e,s){e.file&&(t.data.data[r]?(delete e.file,e.url=t.data.data[r].filePath,r+=1):a.tabTitles[a.active].imgUrls[s].isDelete=!0)}),a.tabTitles[a.active].imgUrls=a.tabTitles[a.active].imgUrls.filter(function(t){return!t.isDelete}),a.showImgList=a.tabTitles[a.active].imgUrls,a.loading=!1,a._myMessage({msg:"上传成功"+t.data.data.length+"个文件"}),e(!0)}).catch(function(t){var r=0;a.tabTitles[a.active].imgUrls.forEach(function(e,s){e.file&&(t.data.data[r]?(delete e.file,e.url=t.data.data[r].filePath,r+=1):a.tabTitles[a.active].imgUrls[s].isDelete=!0)}),a.tabTitles[a.active].imgUrls=a.tabTitles[a.active].imgUrls.filter(function(t){return!t.isDelete}),a.showImgList=a.tabTitles[a.active].imgUrls,a.loading=!1,a._myMessage({msg:"上传成功"+t.data.data.length+"个文件"}),e(!0)});case 7:case"end":return r.stop()}},r,a)}))()},buffTitleFn:function(){this.buffTitle=this.tabTitles[this.active].title},customizeName:function(t){var e=this;this.tabTitles.forEach(function(t,a){a!==e.active&&t.title===e.tabTitles[e.active].title&&(e.tabTitles[e.active].title=e.buffTitle,e._myMessage({msg:"类目名称重复！",type:"error"}))})}}},L=(a("I1uo"),Object(f.a)(C,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pictureUpLoad"},[t.getMaskStatus()?a("div",{class:["pictureUpLoad_status",t.taskImgStatus]}):t._e(),t._v(" "),a("div",{staticClass:"tab-head"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("评估照片上传")])])])],1)],1)],1),t._v(" "),a("div",{staticClass:"pictureUpLoad_form"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"rules2",attrs:{model:t.data,rules:t.rules2,"label-position":"left","label-width":"138px"}},[a("el-form-item",{attrs:{label:"酒店图片"}},[a("div",{staticClass:"tabs"},t._l(t.tabTitles,function(e,r){return a("div",{key:e.id,staticClass:"tab-pane",on:{click:function(e){t.tabClick(r)}}},[a("div",{staticClass:"tab-pane-btn"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.active!==r,expression:"active !== i"}]},[t._v("\n                "+t._s(e.title)+"\n                "),e.asterisk?a("span",{staticStyle:{color:"#FF4E36"}},[t._v(t._s(e.asterisk))]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.active===r,expression:"active === i"}],staticClass:"tab-pane-itembtn"},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"range"},[a("span",[t._v("(")]),t._v(" "),a("span",{style:{color:e.imgUrls.length<e.minImgLen?"#FF4E36":"#676767"}},[t._v(t._s(e.imgUrls.length))]),t._v(" "),a("span",[t._v(t._s("/ "+e.minImgLen))]),t._v(" "),a("span",[t._v(")")])])])})),t._v(" "),a("div",{staticClass:"imgList"},[a("el-upload",{ref:"upload",attrs:{action:t.action,headers:t.headers,data:{projectType:2},"http-request":t.handleAvatarSuccess,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleOutSideRemoveImags,"on-exceed":t.handleExceed,"file-list":t.showImgList,limit:10,name:"files","list-type":"picture-card",accept:"image/*",multiple:""}},[a("i",{staticClass:"el-icon-plus"})])],1)]),t._v(" "),t.active>=5?a("el-form-item",{attrs:{label:"自定义名称"}},[a("el-input",{staticStyle:{"max-width":"434px"},on:{focus:t.buffTitleFn,blur:t.customizeName},model:{value:t.tabTitles[t.active].title,callback:function(e){t.$set(t.tabTitles[t.active],"title",e)},expression:"tabTitles[active].title"}})],1):t._e(),t._v(" "),a("el-form-item",{staticStyle:{"max-width":"572px"},attrs:{label:"项目更新日期",prop:"reverseTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},model:{value:t.data.reverseTime,callback:function(e){t.$set(t.data,"reverseTime",e)},expression:"data.reverseTime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"max-width":"572px"},attrs:{prop:1===t.data.isOverdue?"overCode":"",label:"异常原因"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.abnormalChange},model:{value:t.data.overCode,callback:function(e){t.$set(t.data,"overCode",e)},expression:"data.overCode"}},t._l(t.resData.taskOverdueVos[t.step-2].taskOverdueReason,function(t){return a("el-option",{key:t.overCode,attrs:{label:t.ovdueName,value:t.overCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{"max-width":"434px"},attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:t.data.remark,callback:function(e){t.$set(t.data,"remark",e)},expression:"data.remark"}})],1),t._v(" "),a("el-form-item",[a("ButtonGroups",{attrs:{step:t.step,"pause-flag":t.pauseFlag,"save-flag":t.saveFlag,"restart-flag":t.restartFlag,"task-status":t.data.taskStatus},on:{save:t.save,pause:t.pause,restart:t.restart}})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"图片预览"},on:{"update:visible":function(e){t.dialogVisible=e}}},[3===t.data.taskStatus||4===t.data.taskStatus?a("a",{staticStyle:{float:"right","margin-bottom":"12px",color:"#007fff"},attrs:{download:"图片",href:t.dialogImageUrl,target:"_bank"}},[t._v("下载")]):t._e(),t._v(" "),a("img",{attrs:{src:t.dialogImageUrl,width:"100%"}})]),t._v(" "),t.getMaskStatus()?a("div",{staticClass:"mask"}):t._e()],1)},[],!1,null,null,null));L.options.__file="PictureUpLoad.vue";var D=L.exports,O=a("kkBN"),R={mixins:[a("9vS1").a],props:{value:{type:Array,require:!0,default:function(){return[]}},limit:{type:Number,require:!1,default:function(){return 3}}},data:function(){return{files:{},currentValue:this.value,headers:{Authorization:Object(O.a)("Admin-Token")},action:"https://bzy-fs.hhotel.com/bzy-file-server/uploadfile?number="+Math.random()}},watch:{currentValue:{handler:function(t,e){var a,r=t||[],s=this.limit,i=this.value;1===s&&(r=(a=t)&&a[0]&&a[0].response&&a[0].response.data||"")===i||(this.$emit("input",r),this.dispatch("ElFormItem","el.form.change",r))},deep:!0}},methods:{handleRemove:function(t,e){this.currentValue=e;var a={file:t,fileList:e};this.$emit("removeSuccess",a)},handleExceed:function(t,e){this._myMessage({msg:"当前最多只能上传"+this.limit+" 个文件",type:"error"})},handleAvatarSuccess:function(t,e,a){if("success"===t.message){this.currentValue=a;var r={res:t,file:e,fileList:a};this.$emit("upLoadSuccess",r)}else this._myMessage({msg:t.message,type:"error"})},beforeAvatarUpload:function(t){var e=t.name.split("."),a=e[e.length-1],r=["pdf","ppt","xlsx","xls"].includes(a),s=t.size/1024/1024<100;return r||this._myMessage({msg:"上传文件只能是.pdf/.ppt/.xlsx/.xls格式!",type:"error"}),s||this._myMessage({msg:"上传文件大小不能超过100MB!",type:"error"}),r&&s}}},N=(a("qyaQ"),Object(f.a)(R,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{attrs:{action:t.action,"file-list":t.currentValue,limit:t.limit,headers:t.headers,data:{projectType:2},"before-upload":t.beforeAvatarUpload,"on-success":t.handleAvatarSuccess,"on-exceed":t.handleExceed,"on-remove":t.handleRemove,name:"files",multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("p",{staticClass:"el-upload__tip ML10",attrs:{slot:"tip"},slot:"tip"},[t._v("上传文件只能是.pdf/.ppt/.xlsx/.xls格式")])],1)},[],!1,null,"eb01aaa8",null));N.options.__file="index.vue";var U={components:{FileUpLoad:N.exports},props:{title:{type:String,required:!0,default:function(){return""}},projectName:{type:String,required:!0,default:function(){return""}},fileList:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{visible:!1,from:{fileList:[]},rules:{fileList:[{required:!0,message:"请选择文件",trigger:"blur"}]}}},created:function(){this.from.fileList=this.fileList},methods:{dialogFormClose:function(){this.visible=!1},dialogFormOpen:function(){this.visible=!0},dataProcess:function(t){return t=t.map(function(t){return{name:t.url?t.name:t.response.data[0].fileName,url:t.url?t.url:t.response.data[0].filePath}})},save:function(){var t=this;this.from.fileList=this.dataProcess(this.from.fileList),this.$refs.upLoadRef.validate(function(e){if(!e)return!1;t.$emit("formSubmit",t.from.fileList),t.visible=!1})}}},F=Object(f.a)(U,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,title:t.title},on:{"update:visible":function(e){t.visible=e},close:t.dialogFormClose}},[a("el-form",{ref:"upLoadRef",attrs:{model:t.from,rules:t.rules}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"项目名称","label-width":"140px"}},[t._v(t._s(t.projectName))])],1)],1),t._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"选择文件","label-width":"140px"}},[a("FileUpLoad",{model:{value:t.from.fileList,callback:function(e){t.$set(t.from,"fileList",e)},expression:"from.fileList"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogFormClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保 存")])],1)],1)},[],!1,null,null,null);F.options.__file="upLoadFile.vue";var E={name:"Communal",components:{UpLoadFile:F.exports,ButtonGroups:h},props:{dataSetting:{type:Object,required:!0,default:function(){return{}}},dataInfo:{type:Object,required:!0,default:function(){return{}}},dataStep:{type:Number,required:!0,default:0},dataTitle:{type:String,required:!0,default:""}},data:function(){return{title:this.dataTitle,resData:this.dataSetting,data:this.dataInfo,step:this.dataStep,projectName:"",labelName:"",name:"",action:"https://bzy-fs.hhotel.com/bzy-file-server/uploadfile?number="+Math.random(),pauseFlag:!1,saveFlag:!1,restartFlag:!1,rules:{overCode:[{required:!0,message:"请选择异常原因",trigger:"change"}],reverseTime:[{required:!0,message:"请选择预计完成日期",trigger:"change"}]}}},computed:{headers:function(){return{ContentType:"multipart/form-data"}},communalStatus:function(){var t="bg-IR_success";switch(this.data.taskStatus){case null:case 1:t="bg-IR_notBegin";break;case 3:t="bg-IR_success";break;case 4:t="bg-IR_stop"}return t}},watch:{dataInfo:function(t){this.data=t},dataSetting:function(t){this.resData=t}},mounted:function(){switch(this.step){case 3:this.name="评估报告",this.labelName="改造评估报告";break;case 4:this.name="完整方案",this.labelName="完整设计方案";break;case 5:this.name="设计报告",this.labelName="业主确认"}},methods:{getMaskStatus:function(){if(this.step-2>this.dataSetting.projectTaskList.length-1)return!0;var t=this.step>2?this.resData.projectTaskList[this.step-3].taskStatus:3;return void 0===this.taskStatus&&(this.taskStatus=this.data.taskStatus),3!==t||3===this.taskStatus||3===this.resData.projectTaskList[this.step-2].taskStatus||4===this.resData.projectTaskList[this.step-2].taskStatus||5===this.resData.projectBaseDtailVo.project.status},handleAvatarSuccess:function(t){this.data.fileUrl.push({url:t.data[0].filePath}),this.iptChange()},showUploadDialog:function(){this.projectName=this.resData.projectBaseDtailVo.project.hotelName,this.$refs.upLoadReport.dialogFormOpen()},formSubmit:function(t){this.data.fileUrl=t,this.iptChange()},abnormalChange:function(){var t=this;this.resData.taskOverdueVos[this.step-2].taskOverdueReason.forEach(function(e){e.overCode===t.data.overCode&&(t.data.overdueReason=e.ovdueName)})},iptChange:function(){this.$emit("input",this.data)},save:function(){this.$emit("save",!0)},pause:function(){this.$emit("pause",!0)},restart:function(){this.$emit("restart",!0)}}},I=(a("kVJ8"),Object(f.a)(E,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"communal"},[t.getMaskStatus()?a("div",{class:["communal_status",t.communalStatus]}):t._e(),t._v(" "),a("div",{staticClass:"tab-head"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v(t._s(t.title))])])])],1)],1)],1),t._v(" "),a("div",{staticClass:"communal_form"},[a("el-form",{ref:"rules"+t.step,attrs:{rules:t.rules,model:t.data,"label-position":"left","label-width":"138px"}},[a("el-form-item",{attrs:{label:t.labelName}},[a("div",{staticClass:"upload-box",on:{click:t.showUploadDialog}},[a("i",{staticClass:"iconfont iconic_addword"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("上传报告")])]),t._v(" "),t._l(t.data.fileUrl,function(e,r){return a("p",{key:r,staticClass:"file-list"},[a("a",{staticClass:"file-list-text",attrs:{href:e.url,download:t.title+"+index",target:"_bank"}},[t._v(t._s(""+t.name+(r+1)))])])})],2),t._v(" "),a("el-form-item",{staticStyle:{"max-width":"572px"},attrs:{label:"项目更新日期",prop:"reverseTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},on:{change:t.iptChange},model:{value:t.data.reverseTime,callback:function(e){t.$set(t.data,"reverseTime",e)},expression:"data.reverseTime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"max-width":"572px"},attrs:{prop:1===t.data.isOverdue?"overCode":"",label:"异常原因"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.abnormalChange},model:{value:t.data.overCode,callback:function(e){t.$set(t.data,"overCode",e)},expression:"data.overCode"}},t._l(t.resData.taskOverdueVos[t.step-2].taskOverdueReason,function(t){return a("el-option",{key:t.overCode,attrs:{label:t.ovdueName,value:t.overCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{"max-width":"434px"},attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},on:{change:t.iptChange},model:{value:t.data.remark,callback:function(e){t.$set(t.data,"remark",e)},expression:"data.remark"}})],1),t._v(" "),a("el-form-item",[a("ButtonGroups",{attrs:{step:t.step,"pause-flag":t.pauseFlag,"save-flag":t.saveFlag,"restart-flag":t.restartFlag,"task-status":t.data.taskStatus},on:{save:t.save,pause:t.pause,restart:t.restart}})],1)],1)],1),t._v(" "),a("UpLoadFile",{ref:"upLoadReport",attrs:{title:t.title,"project-name":t.projectName,"file-list":t.data.fileUrl},on:{formSubmit:t.formSubmit}}),t._v(" "),t.getMaskStatus()?a("div",{staticClass:"mask"}):t._e()],1)},[],!1,null,null,null));I.options.__file="Communal.vue";var M=I.exports,q={name:"AssessmentReport",components:{communal:M},mixins:[b],data:function(){return{step:3,title:"评估报告上传",data:{taskStatus:null,taskName:null,isOverdue:null,reverseTime:null,overCode:null,remark:null,fileUrl:null,overdueReason:null}}}},B=Object(f.a)(q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assessmentReport"},[a("communal",{attrs:{"data-title":t.title,"data-setting":t.resData,"data-info":t.data,"data-step":t.step},on:{save:t.save,pause:t.pause,restart:t.restart},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)},[],!1,null,null,null);B.options.__file="AssessmentReport.vue";var P=B.exports,A={name:"DesignScheme",components:{communal:M},mixins:[b],data:function(){return{step:4,title:"完整设计方案",data:{taskStatus:null,taskName:null,isOverdue:null,reverseTime:null,overCode:null,remark:null,fileUrl:null,overdueReason:null}}}},$=Object(f.a)(A,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assessmentReport"},[a("communal",{attrs:{"data-title":t.title,"data-setting":t.resData,"data-info":t.data,"data-step":t.step},on:{save:t.save,pause:t.pause,restart:t.restart},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)},[],!1,null,null,null);$.options.__file="DesignScheme.vue";var V=$.exports,G={name:"Confirm",components:{communal:M},mixins:[b],data:function(){return{step:5,title:"完整方案业主确认",data:{taskStatus:null,taskName:null,isOverdue:null,reverseTime:null,overCode:null,remark:null,fileUrl:null,overdueReason:null}}}},z=Object(f.a)(G,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assessmentReport"},[a("communal",{attrs:{"data-title":t.title,"data-setting":t.resData,"data-info":t.data,"data-step":t.step},on:{save:t.save,pause:t.pause,restart:t.restart},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)},[],!1,null,null,null);z.options.__file="Confirm.vue";var H=z.exports,J={name:"OrderMaking",mixins:[b],data:function(){return{step:6,obj:{list:[{key:"shop_recruit_status",title:"店招",reverseTime:null,value:1},{key:"indoor_reform_status",title:"室内改造",reverseTime:null,value:1},{key:"collect_material_status",title:"集采物资",reverseTime:null,value:1}]},data:{taskStatus:null,taskName:null,shopRecruitStatus:null,shopRecruitTime:null,indoorReformStatus:null,indoorReformTime:null,collectMaterialStatus:null,collectMaterialTime:null,overCode:null,overdueReason:null},rules6:{list:[{value:"",reverseTime:""}],overCode:[{required:!0,message:"请选择异常原因",trigger:"change"}]}}}},W=(a("RjQZ"),Object(f.a)(J,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderMaking"},[t.getMaskStatus()?a("div",{class:["orderMaking_status",t.taskImgStatus]}):t._e(),t._v(" "),a("div",{staticClass:"tab-head"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("下单制作安装")])])])],1)],1)],1),t._v(" "),a("div",{staticClass:"orderMaking_form"},[a("el-form",{ref:"rules6",attrs:{rules:t.rules6,model:t.obj,"label-position":"left","label-width":"138px"}},[t._l(t.obj.list,function(e,r){return a("el-row",{key:r},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.title,prop:"list."+r+".value",rules:{required:!0,message:"必填项不能为空",trigger:"change"}}},[a("el-radio-group",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[a("el-radio",{attrs:{label:1}},[t._v("未启动")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("已下单")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("已完成")]),t._v(" "),a("el-radio",{attrs:{label:4}},[t._v("已暂停")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"max-width":"572px"},attrs:{prop:"list."+r+".reverseTime",rules:{required:!0,message:"项目更新时间不能为空",trigger:"change"},label:"项目更新时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},model:{value:e.reverseTime,callback:function(a){t.$set(e,"reverseTime",a)},expression:"item.reverseTime"}})],1)],1)],1)}),t._v(" "),a("el-form-item",{staticStyle:{"max-width":"572px"},attrs:{prop:1===t.data.isOverdue?"overCode":"",label:"异常原因"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.abnormalChange},model:{value:t.data.overCode,callback:function(e){t.$set(t.data,"overCode",e)},expression:"data.overCode"}},t._l(t.resData.taskOverdueVos[t.step-2].taskOverdueReason,function(t){return a("el-option",{key:t.overCode,attrs:{label:t.ovdueName,value:t.overCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{"max-width":"434px"},attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:t.data.remark,callback:function(e){t.$set(t.data,"remark",e)},expression:"data.remark"}})],1),t._v(" "),a("el-form-item",[a("ButtonGroups",{attrs:{step:t.step,"pause-flag":t.pauseFlag,"save-flag":t.saveFlag,"restart-flag":t.restartFlag,"task-status":t.data.taskStatus},on:{save:t.save,pause:t.pause,restart:t.restart}})],1)],2)],1),t._v(" "),t.getMaskStatus()?a("div",{staticClass:"mask"}):t._e()])},[],!1,null,null,null));W.options.__file="OrderMaking.vue";var Q={inject:["reload"],name:"HotelManageDetails",components:{ProjectGrade:S,PictureUpLoad:D,AssessmentReport:P,DesignScheme:V,Confirm:H,OrderMaking:W.exports},data:function(){return{projectStatus:_.h,hotelStates:_.c,isShow:!0,supplierListHeight:0,showSupplierList:[],allSupplierList:[],list:[{label:"项目负责人",key:"projectManagerName",value:""},{label:"所在区域",key:"provinceName",value:""},{label:"开始时间",key:"projectStartTime",value:""},{label:"所属BD",key:"bdName",value:""},{label:"详细地址",key:"hotelAddress",value:""}],hoterList:[{label:"战区",key:"bigAreaName",value:"一战区"},{label:"SRN",key:"srn",value:"1099"},{label:"店长姓名",key:"shopOwnerName",value:"范镫俭"}],resData:null,baseInfo:{systemId:null,version:null,templateCode:"",templateName:"",hotelCode:"",taskCode:"",taskId:"",taskFlowId:"",taskStatus:""},data:{}}},computed:{cooperationSupplierList:function(){return this.allSupplierList.filter(function(t){return 0!==t.status})}},watch:{isShow:function(t){this.showSupplierList=t?this.allSupplierList:this.cooperationSupplierList,this.supplierListHeight=28*this.showSupplierList.length}},created:function(){this._getProjectDetails(this.$route.params.hotelCode)},methods:{againRequestFn:function(){this.reload()},gethotelInfo:function(t){var e=this;s()(t).forEach(function(a){e.list.forEach(function(e){if(e.key===a)switch(a){case"provinceName":e.value=t[a]+"-"+t.cityName,null!==t.districtName&&(e.value+="-"+t.districtName);break;case"projectStartTime":e.value=t[a].substring(0,t[a].length-3);break;default:e.value=t[a]}})})},supplierListChange:function(){this.isShow=!this.isShow},getprojectLevel:function(t,e){var a=e;return isNaN(e)||(a=Number(e)),t.find(function(t){return t.value===a}).label},_getProjectDetails:function(t){var e=this;Object(g.e)(t).then(function(t){e.gethotelInfo(t.data.projectBaseDtailVo.project),e.hoterList.forEach(function(e){e.value=t.data.projectBaseDtailVo.project[e.key],"shopOwnerName"===e.key&&(e.value||(e.value="暂无"))}),e.allSupplierList=t.data.projectBaseDtailVo.supplierList,e.resData=t.data,e.isShow=!1}).catch(function(t){e._myMessage({msg:t.data.message,type:"error"}),e.$router.go(-1)})}}},Y=(a("WmeM"),Object(f.a)(Q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.resData?a("div",{staticClass:"layout"},[a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:17}},[a("div",{staticClass:"details_left"},[a("ProjectGrade",{attrs:{"data-setting":t.resData},on:{againRequest:t.againRequestFn}}),t._v(" "),a("PictureUpLoad",{attrs:{"data-setting":t.resData},on:{againRequest:t.againRequestFn}}),t._v(" "),a("AssessmentReport",{attrs:{"data-setting":t.resData},on:{againRequest:t.againRequestFn}}),t._v(" "),a("DesignScheme",{attrs:{"data-setting":t.resData},on:{againRequest:t.againRequestFn}}),t._v(" "),a("Confirm",{attrs:{"data-setting":t.resData},on:{againRequest:t.againRequestFn}}),t._v(" "),a("OrderMaking",{attrs:{"data-setting":t.resData},on:{againRequest:t.againRequestFn}})],1)]),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"details_right"},[a("div",{staticClass:"bgStyle details_right_top"},[void 0!==t.resData.projectBaseDtailVo.project?a("div",{staticClass:"details_right_top_header"},[a("div",{staticClass:"hotelName"},[t._v(t._s(t.resData.projectBaseDtailVo.project.hotelCode)+" "+t._s(t.resData.projectBaseDtailVo.project.hotelName))]),t._v(" "),a("span",{staticClass:"status-sty",class:{"notstart-sty":1===t.resData.projectBaseDtailVo.project.status,"pause-sty":4===t.resData.projectBaseDtailVo.project.status,"stop-sty":5===t.resData.projectBaseDtailVo.project.status}},[t._v("项目"+t._s(t.getprojectLevel(t.projectStatus,t.resData.projectBaseDtailVo.project.status)))]),t._v(" "),a("span",{staticClass:"status-sty",class:{"notstart-sty":"WAIT_OPERATION"===t.resData.projectBaseDtailVo.project.operateStatus,"pause-sty":"PAUSED"===t.resData.projectBaseDtailVo.project.operateStatus,"stop-sty":"VERB"===t.resData.projectBaseDtailVo.project.operateStatus}},[t._v("酒店"+t._s(t.getprojectLevel(t.hotelStates,t.resData.projectBaseDtailVo.project.operateStatus)))])]):t._e(),t._v(" "),a("div",{staticClass:"details_right_top_footer"},[a("el-form",{attrs:{"label-position":"left"}},t._l(t.list,function(e){return a("el-form-item",{key:e.lable,attrs:{label:e.label}},[a("span",[t._v(t._s(e.value))])])}))],1)]),t._v(" "),a("div",{staticClass:"bgStyle details_right_hoter"},[a("div",{staticClass:"details_right_bottom_header"},[a("span",{staticClass:"supplierTitle"},[t._v("酒店基础信息")])]),t._v(" "),a("div",{staticClass:"details_right_bottom_footer",staticStyle:{padding:"16px 0 20px"}},[a("el-form",{attrs:{"label-position":"left","label-width":"80px"}},t._l(t.hoterList,function(e){return a("el-form-item",{key:e.lable,attrs:{label:e.label}},[a("div",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.value))])])}))],1)]),t._v(" "),a("div",{staticClass:"bgStyle details_right_bottom"},[a("div",{staticClass:"details_right_bottom_header",on:{click:t.supplierListChange}},[a("span",{staticClass:"supplierTitle"},[t._v("供应商")]),t._v(" "),a("i",{class:["el-icon-arrow-right",t.isShow?"down":""]})]),t._v(" "),a("div",{staticClass:"details_right_bottom_footer",style:{minHeight:t.supplierListHeight+"px;",padding:t.showSupplierList.length>0?"16px 0 20px":0}},[a("el-form",{ref:"form",attrs:{"label-position":"left"}},t._l(t.showSupplierList,function(e){return a("el-form-item",{key:e.id,class:0===e.status?"isBind":"",attrs:{label:" ","label-width":"1px"}},[a("div",{style:{color:0===e.status?"#CDCDCD":""}},[t._v(t._s(e.supplierName))]),t._v(" "),a("div",{style:{color:0===e.status?"#CDCDCD":""}},[t._v(t._s(e.updateTime.split(" ")[0]))])])}))],1)])])])],1)],1):t._e()},[],!1,null,null,null));Y.options.__file="details.vue";e.default=Y.exports},lTBW:function(t,e,a){},nVrq:function(t,e,a){},"oh+g":function(t,e,a){var r=a("WEpk"),s=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},qyaQ:function(t,e,a){"use strict";var r=a("c+Lz");a.n(r).a},t2Y8:function(t,e,a){"use strict";var r=a("QbLZ"),s=a.n(r),i=a("L2JU");function n(t,e){return e.includes(t)}e.a={computed:s()({},Object(i.b)(["name","btnPermissionRoles"])),created:function(){this._initBtnPermission()},methods:{_initBtnPermission:function(){var t=function(t,e){var a=[];if(t.length)return t.map(function(t){var r=t.split(":")[0],s=t.split(":")[1];r===e&&a.push(s)}),a}(this.btnPermissionRoles,this.PATH);this.btnArr=t,this.buttonFilter=n}}}},u4eC:function(t,e){!function(e){"use strict";var a,r=Object.prototype,s=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag",u="object"==typeof t,c=e.regeneratorRuntime;if(c)u&&(t.exports=c);else{(c=e.regeneratorRuntime=u?t.exports:{}).wrap=y;var d="suspendedStart",p="suspendedYield",m="executing",f="completed",v={},h={};h[n]=function(){return this};var g=Object.getPrototypeOf,b=g&&g(g(R([])));b&&b!==r&&s.call(b,n)&&(h=b);var _=w.prototype=S.prototype=Object.create(h);T.prototype=_.constructor=w,w.constructor=T,w[o]=T.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===T||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(_),t},c.awrap=function(t){return{__await:t}},j(x.prototype),x.prototype[l]=function(){return this},c.AsyncIterator=x,c.async=function(t,e,a,r){var s=new x(y(t,e,a,r));return c.isGeneratorFunction(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},j(_),_[o]="Generator",_[n]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){for(;e.length;){var r=e.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},c.values=R,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,s){return l.type="throw",l.arg=t,e.next=r,s&&(e.method="next",e.arg=a),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],l=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var o=s.call(n,"catchLoc"),u=s.call(n,"finallyLoc");if(o&&u){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=t,n.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),D(a),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var s=r.arg;D(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:R(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=a),v}}}function y(t,e,a,r){var s=e&&e.prototype instanceof S?e:S,i=Object.create(s.prototype),n=new O(r||[]);return i._invoke=function(t,e,a){var r=d;return function(s,i){if(r===m)throw new Error("Generator is already running");if(r===f){if("throw"===s)throw i;return N()}for(a.method=s,a.arg=i;;){var n=a.delegate;if(n){var l=C(n,a);if(l){if(l===v)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var o=k(t,e,a);if("normal"===o.type){if(r=a.done?f:p,o.arg===v)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(r=f,a.method="throw",a.arg=o.arg)}}}(t,a,n),i}function k(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}function S(){}function T(){}function w(){}function j(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(t){var e;this._invoke=function(a,r){function i(){return new Promise(function(e,i){!function e(a,r,i,n){var l=k(t[a],t,r);if("throw"!==l.type){var o=l.arg,u=o.value;return u&&"object"==typeof u&&s.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,i,n)},function(t){e("throw",t,i,n)}):Promise.resolve(u).then(function(t){o.value=t,i(o)},n)}n(l.arg)}(a,r,e,i)})}return e=e?e.then(i,i):i()}}function C(t,e){var r=t.iterator[e.method];if(r===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=a,C(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var s=k(r,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,v;var i=s.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function R(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=a,e.done=!0,e};return i.next=i}}return{next:N}}function N(){return{value:a,done:!0}}}(function(){return this}()||Function("return this")())},wX0E:function(t,e,a){"use strict";a.d(e,"f",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"a",function(){return n}),a.d(e,"e",function(){return l}),a.d(e,"k",function(){return o}),a.d(e,"h",function(){return u}),a.d(e,"j",function(){return c}),a.d(e,"b",function(){return d}),a.d(e,"g",function(){return p}),a.d(e,"c",function(){return m}),a.d(e,"i",function(){return f});var r=a("CcjM");function s(t){return Object(r.a)({url:"bzy-tr/project/pageList",method:"post",data:t})}function i(t){return Object(r.a)({url:"bzy-tr/overdue/taskOverdueList",method:"get",params:t})}function n(t){return Object(r.a)({url:"bzy-tr/project",method:"post",data:t})}function l(t){return Object(r.a)({url:"bzy-tr/task/"+t,method:"get"})}function o(t){return Object(r.a)({url:"bzy-tr/task",method:"post",data:t})}function u(t){return Object(r.a)({url:"bzy-tr/project/reset/"+t,method:"get"})}function c(t){return Object(r.a)({url:"bzy-tr/project/updateLevel",method:"post",data:t})}function d(t){return Object(r.a)({url:"bzy-tr/project/findByManagerCode/"+t,method:"get"})}function p(t){return Object(r.a)({url:"bzy-tr/project/unbind",method:"post",data:t})}function m(t){return Object(r.a)({url:"bzy-tr/project/hotelList",method:"get",params:t})}function f(t){return Object(r.a)({url:"bzy-tr/task/changeStatus",method:"post",data:t})}}}]);