(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-701a"],{RFNt:function(t,e,a){"use strict";e.a={data:function(){return{warZoneList:[],list:[{label:"全部",value:0},{label:"一战区",value:1},{label:"二战区",value:2},{label:"三战区",value:3},{label:"四战区",value:4},{label:"五战区",value:5},{label:"六战区",value:6},{label:"七战区",value:7},{label:"八战区",value:8}]}},created:function(){this.getWarZoneList()},computed:{identity:function(){var t=[],e=null;return this.$store.state.user.info.roles.map(function(e){t.push(e.alias)}),-1!==t.indexOf("chaojiguanliyuan")&&(e=1),-1!==t.indexOf("zongcaiban")&&(e=1),-1!==t.indexOf("shangyefenxizu")&&(e=1),-1!==t.indexOf("zongbushujuyunying")&&(e=1),-1!==t.indexOf("yewu")&&(e=1),-1!==t.indexOf("yewufazhanbu")&&(e=1),-1!==t.indexOf("zongbuyunyingguanli")&&(e=1),-1!==t.indexOf("RGM")&&(e=2),e}},methods:{getWarZoneList:function(t){var e=this,a=[];return t&&0!==t.length&&t.map(function(t){e.list.map(function(e){t===e.value&&a.push(e)})}),a.unshift({label:"全部",value:0}),this.warZoneList=a,a},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach(function(t,e){if(0!==e){var n=a.map(function(e){return Number(e[t.property])});n.every(function(t){return isNaN(t)})||(s[e]=n.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),-1!==t.label.indexOf("完成率")||-1!==t.label.indexOf("时间进度")?s[e]="--":-1!==t.label.indexOf("环比")?s[e]="--":s[e]=Math.floor(100*s[e])/100)}else s[e]="总计"}),s},getStyle:function(t){if(t<0)return"error-text"},rowStyle:function(t){if("总计"===t.row.cityName)return"color:#006072;"},formatter:function(t){}}}},X3ag:function(t,e,a){"use strict";var s=a("XuNb");a.n(s).a},XuNb:function(t,e,a){},liAM:function(t,e,a){"use strict";a.r(e);var s=a("pfto"),n=a("RFNt"),r=a("v1zl"),l=Object(s.a)(new Date).slice(0,-3),o={mixins:[n.a],data:function(){return{warZoneList:[{label:"全部",value:0}],activeNames:0,typeVal:"1",selMonth:l,formInputWidth:"168px",warZone:[0],tableData:[],getData:[],areaRank:null,textarea:"",getWarZone:[]}},created:function(){this.search()},methods:{saveDataExplain:function(t,e,a){var s=this,n={bigAreaIds:this.warZone.includes(0)?this.getWarZone:this.warZone,monthWeekRank:t,queryTime:this.selMonth+"-01",remark:e,remarkType:a};Object(r.o)(n).then(function(t){s.$message({message:"保存成功",type:"success"})})},selRadio:function(t){this.getData=[],this.search()},filterSelect:function(t){this[t].includes(0)&&(this[t]=[0])},toCityDetail:function(t,e,a){var s=this.$router.resolve({name:"businessProgressDetail",query:{bigAreaId:t,num:e,selMonth:a,type:this.typeVal}});window.open(s.href,"_blank")},search:function(){var t=this;if(this.selMonth){this.getData=[];var e={bigAreaIds:this.warZone.includes(0)?[]:this.warZone,queryTime:this.selMonth+"-01"},a=null;if(1===this.identity)switch(this.typeVal){case"1":a=r.m;break;default:a=r.b}if(2===this.identity)switch(e.isBigAreaManager=this.identity,this.typeVal){case"1":a=r.l;break;default:a=r.a}a(e).then(function(e){"1"===t.typeVal?(t.getWarZoneList(e.data.bigAreaIds),t.getWarZone=e.data.bigAreaIds):(t.getWarZoneList(e.data.theaterIds),t.getWarZone=e.data.theaterIds);var a=e.data.vos;t.areaRank=e.data.areaRank,t.getData=a.map(function(t){return{num:t.monthWeekRank,arr:t.vos,needExplain:t.needExplain,remark:t.remark}}),t.getData.reverse()})}else this.$message.error("请选择月份")}}},i=(a("X3ag"),a("KHd+")),c=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"zone"}},[a("div",{staticClass:"layout"},[a("div",{staticClass:"tab-head"},[a("div",{staticClass:"budget_sty tab-head-list bor_sty",staticStyle:{"margin-bottom":"16px","padding-bottom":"16px","border-bottom":"1px dotted #E9E9E9"}},[a("el-radio-group",{on:{change:t.selRadio},model:{value:t.typeVal,callback:function(e){t.typeVal=e},expression:"typeVal"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("双签SRN数")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("暂停酒店数")])],1)],1),t._v(" "),a("div",{staticClass:"tab-head-list"},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("战区")]),t._v(" "),a("el-select",{style:{width:t.formInputWidth},attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:function(e){t.filterSelect("warZone")}},model:{value:t.warZone,callback:function(e){t.warZone=e},expression:"warZone"}},t._l(t.warZoneList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("月份")]),t._v(" "),a("el-date-picker",{style:{width:t.formInputWidth},attrs:{clearable:!1,editable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择月"},model:{value:t.selMonth,callback:function(e){t.selMonth=e},expression:"selMonth"}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"tab-list-item"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1)],1)]),t._v(" "),2===t.identity&&t.areaRank?a("div",{staticClass:"btn-right"},["1"===t.typeVal?a("span",{attrs:{icon:"el-icon-plus"}},[a("i",{staticClass:"iconfont iconpaihangbang",staticStyle:{color:"rgb(103, 201, 180)"}}),t._v("\n        战区排名第"+t._s(t.areaRank)+"\n      ")]):t._e(),t._v(" "),"2"===t.typeVal?a("span",{attrs:{icon:"el-icon-plus"}},[parseInt(t.areaRank)>4?a("i",{staticClass:"iconfont iconpaihangbang",staticStyle:{color:"rgb(103, 201, 180)"}}):t._e(),t._v(" "),parseInt(t.areaRank)<=4?a("i",{staticClass:"iconfont iconzhanqujinggaobangdan",staticStyle:{color:"rgb(255, 78, 54)"}}):t._e(),t._v("\n        战区暂停数第"+t._s(t.areaRank)+"\n      ")]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"container"},[0===t.getData.length?a("div",{staticClass:"emptyData"},[t._v("暂无数据")]):t._e(),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[t._l(t.getData,function(e,s){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.typeVal,expression:"typeVal==='1'"}],key:e.key,attrs:{name:s}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月\n            第"+t._s(e.num)+"周\n            （ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{"show-summary":1!==t.identity,"summary-method":t.getSummaries,data:e.arr,"row-style":t.rowStyle}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(s.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(s.row.bigAreaName))])]}}])}):t._e(),t._v(" "),2===t.identity?a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"130"}}):t._e(),t._v(" "),1===t.identity?a("el-table-column",{attrs:{sortable:"",prop:"srnMonthTargets",label:"月目标SRN数","min-width":"130"}}):t._e(),t._v(" "),1===t.identity?a("el-table-column",{attrs:{sortable:"",prop:"currentWeekSrnsRate",label:"双签数完成率","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top-start"}},[a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签SRN数完成率")]),t._v(" "),a("span",[t._v(t._s(parseFloat(100*e.row.currentWeekSrnsRate).toFixed(2))+"%")])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("上周双签SRN数完成率")]),t._v(" "),a("span",[t._v(t._s(parseFloat(100*e.row.lastWeekSrnsRate).toFixed(2))+"%")])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("上上周双签SRN数完成率")]),t._v(" "),a("span",[t._v(t._s(parseFloat(100*e.row.beforeLastWeekSrnsRate).toFixed(2))+"%")])])]),t._v(" "),a("div",{staticClass:"item-list"},[a("div",[t._v(t._s(parseFloat(100*e.row.currentWeekSrnsRate).toFixed(2))+"%")]),t._v(" "),a("div",[t._v(t._s(parseFloat(100*e.row.lastWeekSrnsRate).toFixed(2))+"%")])])])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekSrns",label:"双签数","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top-start"}},[a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签SRN数")]),t._v(" "),a("span",[t._v(t._s(e.row.currentWeekSrns))])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签酒店数")]),t._v(" "),a("span",[t._v(t._s(e.row.currentWeekHotels))])])]),t._v(" "),a("div",{staticClass:"item-list"},[a("div",[t._v(t._s(e.row.currentWeekSrns))]),t._v(" "),a("div",[t._v(t._s(e.row.currentWeekHotels))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekSrns",label:"上周双签数","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top-start"}},[a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("上周双签SRN数")]),t._v(" "),a("span",[t._v(t._s(e.row.lastWeekSrns))])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("上周双签酒店数")]),t._v(" "),a("span",[t._v(t._s(e.row.lastWeekHotels))])])]),t._v(" "),a("div",{staticClass:"item-list"},[a("div",[t._v(t._s(e.row.lastWeekSrns))]),t._v(" "),a("div",[t._v(t._s(e.row.lastWeekHotels))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekSrns",label:"上上周双签数","min-width":"128"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top-start"}},[a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("上上周双签SRN数")]),t._v(" "),a("span",[t._v(t._s(e.row.beforeLastWeekSrns))])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("上上周双签酒店数")]),t._v(" "),a("span",[t._v(t._s(e.row.beforeLastWeekHotels))])])]),t._v(" "),a("div",{staticClass:"item-list"},[a("div",[t._v(t._s(e.row.beforeLastWeekSrns))]),t._v(" "),a("div",[t._v(t._s(e.row.beforeLastWeekHotels))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekIncrementSrns",label:"增长数","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top-start"}},[a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签SRN增长数")]),t._v(" "),a("span",[t._v(t._s(e.row.currentWeekIncrementSrns))])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签酒店增长数")]),t._v(" "),a("span",[t._v(t._s(e.row.currentWeekIncrementHotels))])])]),t._v(" "),a("div",{staticClass:"item-list"},[a("div",{class:t.getStyle(e.row.currentWeekIncrementSrns)},[t._v(t._s(e.row.currentWeekIncrementSrns))]),t._v(" "),a("div",{class:t.getStyle(e.row.currentWeekIncrementHotels)},[t._v(t._s(e.row.currentWeekIncrementHotels))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"circumferentialRatioSrns",label:"环比","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top-start"}},[a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签SRN环比")]),t._v(" "),a("span",[t._v(t._s(parseFloat(100*e.row.circumferentialRatioSrns).toFixed(2))+"%")])])]),t._v(" "),a("div",{staticClass:"tooltip",attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-list"},[a("span",[t._v("双签酒店环比")]),t._v(" "),a("span",[t._v(t._s(parseFloat(100*e.row.circumferentialRatioHotels).toFixed(2))+"%")])])]),t._v(" "),a("div",{staticClass:"item-list"},[a("div",[t._v(t._s(parseFloat(100*e.row.circumferentialRatioSrns).toFixed(2))+"%")]),t._v(" "),a("div",[t._v(t._s(parseFloat(100*e.row.circumferentialRatioHotels).toFixed(2))+"%")])])])]}}])})],1)],t._v(" "),2===t.identity?[a("p",{staticClass:"input_title"},[a("span",[a("i",{staticClass:"circle"}),t._v("数据解释\n              ")]),t._v(" "),a("span",{staticClass:"input_btn"},[e.needExplain?a("span",{staticClass:"input_save",on:{click:function(a){t.saveDataExplain(e.num,e.remark,"SIGNSRN")}}},[t._v("保存")]):t._e()])]),t._v(" "),a("el-input",{attrs:{rows:2,disabled:!e.needExplain,type:"textarea",placeholder:"请输入"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})]:t._e()],2)}),t._v(" "),t._l(t.getData,function(e,s){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"2"===t.typeVal,expression:"typeVal==='2'"}],key:e.key,attrs:{name:s}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月\n            第"+t._s(e.num)+"周\n            （ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{"show-summary":1!==t.identity,"summary-method":t.getSummaries,data:e.arr,"row-style":t.rowStyle}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(s.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(s.row.bigAreaName))])]}}])}):t._e(),t._v(" "),2===t.identity?a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"140"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekPausedHotels",label:"暂停酒店数","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekPausedHotels",label:"上周暂停酒店数","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekPausedHotels",label:"上上周暂停酒店数","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"pausedHotelsIncrement",label:"增长数","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:t.getStyle(e.row.pausedHotelsIncrement)},[t._v(t._s(e.row.pausedHotelsIncrement))])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"totalPausedHotels","min-width":"80",label:"累计值"}})],1)],t._v(" "),2===t.identity?[a("p",{staticClass:"input_title"},[a("span",[a("i",{staticClass:"circle"}),t._v("数据解释\n              ")]),t._v(" "),a("span",{staticClass:"input_btn"},[e.needExplain?a("span",{staticClass:"input_save",on:{click:function(a){t.saveDataExplain(e.num,e.remark,"PAUSEDHOTEL")}}},[t._v("保存")]):t._e()])]),t._v(" "),a("el-input",{attrs:{rows:2,disabled:!e.needExplain,type:"textarea",placeholder:"请输入"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})]:t._e()],2)})],2)],1)])])},[],!1,null,"4da7f692",null);c.options.__file="index.vue";e.default=c.exports},pfto:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return o});var s=a("4d7F"),n=a.n(s);function r(t){var e=new Date(t);return e.getFullYear()+"-"+(1===(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(1===e.getDate().toString().length?"0"+e.getDate():e.getDate())}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new n.a(function(a,s){var n=new Date;n.setDate(n.getDate()-t);var l=new Date;l.setDate(l.getDate()-e);var o=[n=r(n),l=r(l)];o[1]&&a(o)})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Date,a=e.getFullYear(),s=e.getMonth()+1-t;return a+"-"+(s=s<10?"0"+s:s)}},v1zl:function(t,e,a){"use strict";a.d(e,"n",function(){return n}),a.d(e,"g",function(){return r}),a.d(e,"j",function(){return l}),a.d(e,"i",function(){return o}),a.d(e,"m",function(){return i}),a.d(e,"l",function(){return c}),a.d(e,"b",function(){return u}),a.d(e,"a",function(){return p}),a.d(e,"d",function(){return d}),a.d(e,"f",function(){return v}),a.d(e,"k",function(){return _}),a.d(e,"h",function(){return m}),a.d(e,"c",function(){return b}),a.d(e,"e",function(){return f}),a.d(e,"o",function(){return h});var s=a("CcjM");function n(t){return Object(s.a)({url:"bzy-reports/theaterReport/area/theater",method:"get",params:t})}function r(t){return Object(s.a)({url:"bzy-reports/theaterReport/area/city",method:"get",params:t})}function l(t){return Object(s.a)({url:"bzy-reports/personFallCity/queryBigAreaReport",method:"post",data:t})}function o(t){return Object(s.a)({url:"bzy-reports/personFallCity/queryCityReport",method:"post",data:t})}function i(t){return Object(s.a)({url:"bzy-reports/theaterReport/sign/theater",method:"get",params:t})}function c(t){return Object(s.a)({url:"bzy-reports/theaterReport/sign/city",method:"get",params:t})}function u(t){return Object(s.a)({url:"bzy-reports/theaterReport/area/hotel",method:"get",params:t})}function p(t){return Object(s.a)({url:"bzy-reports/theaterReport/area/cityDetail",method:"get",params:t})}function d(t){return Object(s.a)({url:"bzy-reports/theaterReport/hotel/averGmv/theater",method:"get",params:t})}function v(t){return Object(s.a)({url:"bzy-reports/theaterReport/hotel/averGmv/city",method:"get",params:t})}function _(t){return Object(s.a)({url:"bzy-reports/theaterReport/revenue/theater",method:"get",params:t})}function m(t){return Object(s.a)({url:"bzy-reports/theaterReport/revenue/city",method:"get",params:t})}function b(t){return Object(s.a)({url:"bzy-reports/theaterReport/hotel/averAdr/theater",method:"get",params:t})}function f(t){return Object(s.a)({url:"bzy-reports/theaterReport/hotel/averAdr/city",method:"get",params:t})}function h(t){return Object(s.a)({url:"bzy-reports/theaterReport/dataExplain",method:"get",params:t})}}}]);