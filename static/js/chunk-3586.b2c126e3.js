(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3586"],{"+iuc":function(t,e,n){n("wgeU"),n("FlQf"),n("bBy9"),n("B9jh"),n("dL40"),n("xvv9"),n("V+O7"),t.exports=n("WEpk").Set},"8iia":function(t,e,n){var r=n("QMMT"),i=n("RRc/");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},B9jh:function(t,e,n){"use strict";var r=n("Wu5q"),i=n("n3ko");t.exports=n("raTm")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},C2SN:function(t,e,n){var r=n("93I4"),i=n("kAMH"),o=n("UWiX")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},DCA8:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("CcjM");function i(t){return Object(r.a)({url:"bzy-tr/reports/project",method:"get",params:t})}function o(t){return Object(r.a)({url:"bzy-reports/trProjectReport/queryProgress",method:"get",params:t})}},LchH:function(t,e,n){"use strict";n.r(e);var r=n("tg1W"),i=n("pfto"),o=n("DCA8"),a=n("glul"),s=n("t2Y8"),c={name:"ProjectProgressReport",mixins:[a.a,s.a],data:function(){return{PATH:"tr-project-manage/project-progress-report",deadline:new Date(new Date-864e5),pickerOptions:{disabledDate:function(t){return t<new Date(new Date-3456e5)||t>new Date(new Date-864e5)},shortcuts:!1},projectManagerName:"",progressReport:[]}},created:function(){this.search(),this._getCity()},methods:{search:function(){var t={projectManagerName:this.projectManagerName,deadline:Object(i.a)(this.deadline),provinceCode:this.provinceCode,cityCode:this.cityCode,areaCode:this.areaCode,bigAreaCode:this.bigArea};this.postData=Object(r.a)(t),this._query()},exportExcel:function(){var t=this;Promise.all([n.e("chunk-2fa2"),n.e("chunk-310c")]).then(function(){var e,r=n("A9RF").export_json_to_excel;e=t.progressReport,r(["项目进度阶段","已创建项目","已暂停项目","实勘阶段","已出完整方案","完整方案业主确认","完成完整安装"],t.formatJson(["projectStage","createCount","pauseCount","siteCheckCount","designCount","designConfirmCount","placeOrderInstall"],e),"项目进度报表_"+Object(i.a)(t.deadline))}.bind(null,n)).catch(n.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},_query:function(){var t=this;Object(o.b)(this.postData).then(function(e){var n=e.data,r=[];r[0]={projectStage:"已完成",createCount:n.createCount,pauseCount:n.pauseCount,siteCheckCount:n.doneSiteCheckCount,designCount:n.doneDesignCount,designConfirmCount:n.doneDesignConfirmCount,placeOrderInstall:n.donePlaceOrderInstallCount},r[1]={projectStage:"未完成未逾期",createCount:"",pauseCount:"",siteCheckCount:n.undoneUnOverdueSiteCheckCount,designCount:n.undoneUnOverdueDesignCount,designConfirmCount:n.undoneUnOverdueDesignConfirmCount,placeOrderInstall:n.undoneUnOverduePlaceOrderInstallCount},r[2]={projectStage:"未完成已逾期",createCount:"",pauseCount:"",siteCheckCount:n.undoneOverdueSiteCheckCount,designCount:n.undoneOverdueDesignCount,designConfirmCount:n.undoneOverdueDesignConfirmCount,placeOrderInstall:n.undoneOverduePlaceOrderInstallCount},t.progressReport=r})}}},u=(n("yqMd"),n("KHd+")),l=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout hotel-Total"},[n("div",{staticClass:"tab-head"},[n("div",{staticClass:"tab-head-list"},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("截止时间")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"168px"},attrs:{"picker-options":t.pickerOptions,clearable:!1,"value-format":"yyyy-MM-dd","range-separator":"-",type:"date",placeholder:"请选择"},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}})],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("城市")]),t._v(" "),n("el-cascader",{staticStyle:{width:"168px"},attrs:{options:t.city,props:t.props,clearable:"",filterable:"",placeholder:"请选择"},on:{change:t.selectCity},model:{value:t.cityValue,callback:function(e){t.cityValue=e},expression:"cityValue"}})],1)]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"tab-list-item"},[n("span",{staticClass:"left_label"},[t._v("项目负责人")]),t._v(" "),n("el-input",{staticStyle:{width:"168px"},attrs:{clearable:"",placeholder:"请输入"},model:{value:t.projectManagerName,callback:function(e){t.projectManagerName=e},expression:"projectManagerName"}})],1)])],1),t._v(" "),n("el-col",{attrs:{span:2}},[n("div",{staticClass:"tab-list-item"},[n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1)],1)]),t._v(" "),t.buttonFilter("lead-out",t.btnArr)?n("span",{staticClass:"btn-right",on:{click:t.exportExcel}},[n("i",{staticClass:"iconfont iconic_download"}),t._v(" "),n("span",{attrs:{type:"primary"}},[t._v("导出")])]):t._e(),t._v(" "),n("div",{staticClass:"tab-content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","border-radius":"8px"},attrs:{data:t.progressReport,"max-height":"500","empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"projectStage",label:"项目进度阶段","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createCount",label:"已创建项目","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"pauseCount",label:"已暂停项目","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"siteCheckCount",label:"实勘阶段","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"designCount",label:"已出完整方案","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"designConfirmCount",label:"完整方案业主确认","min-width":"140"}}),t._v(" "),n("el-table-column",{attrs:{prop:"placeOrderInstall",label:"完成完整安装","min-width":"140"}})],1)],1)])},[],!1,null,"24990a31",null);l.options.__file="projectProgressReport.vue";e.default=l.exports},"RRc/":function(t,e,n){var r=n("oioR");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},"V+O7":function(t,e,n){n("aPfg")("Set")},V7Et:function(t,e,n){var r=n("2GTP"),i=n("M1xp"),o=n("JB68"),a=n("tEej"),s=n("v6xn");t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,l=4==t,d=6==t,p=5==t||d,f=e||s;return function(e,s,v){for(var h,g,C=o(e),m=i(C),_=r(s,v,3),b=a(m.length),y=0,w=n?f(e,b):c?f(e,0):void 0;b>y;y++)if((p||y in m)&&(g=_(h=m[y],y,C),t))if(n)w[y]=g;else if(g)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:w.push(h)}else if(l)return!1;return d?-1:u||l?l:w}}},Wu5q:function(t,e,n){"use strict";var r=n("2faE").f,i=n("oVml"),o=n("XJU/"),a=n("2GTP"),s=n("EXMj"),c=n("oioR"),u=n("MPFp"),l=n("UO39"),d=n("TJWN"),p=n("jmDH"),f=n("6/1s").fastKey,v=n("n3ko"),h=p?"_s":"size",g=function(t,e){var n,r=f(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[h]=0,void 0!=r&&c(r,n,t[u],t)});return o(l.prototype,{clear:function(){for(var t=v(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var n=v(this,e),r=g(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[h]--}return!!r},forEach:function(t){v(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(v(this,e),t)}}),p&&r(l.prototype,"size",{get:function(){return v(this,e)[h]}}),l},def:function(t,e,n){var r,i,o=g(t,e);return o?o.v=n:(t._l=o={i:i=f(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[h]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),d(e)}}},aPfg:function(t,e,n){"use strict";var r=n("Y7ZC"),i=n("eaoh"),o=n("2GTP"),a=n("oioR");t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,c=arguments[1];return i(this),(e=void 0!==c)&&i(c),void 0==t?new this:(n=[],e?(r=0,s=o(c,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},bMmh:function(t,e,n){},cHUd:function(t,e,n){"use strict";var r=n("Y7ZC");t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},dL40:function(t,e,n){var r=n("Y7ZC");r(r.P+r.R,"Set",{toJSON:n("8iia")("Set")})},glul:function(t,e,n){"use strict";var r=n("/uL/");e.a={data:function(){return{leadDate:[],cityValue:[],city:[],props:{value:"code",label:"name",checkStrictly:!0},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},computed:{loading:function(){return this.$store.getters.loading}},methods:{selectCity:function(t){this.provinceCode=t[0]||"",this.cityCode=t[1]||"",this.areaCode=t[2]||""},_getCity:function(){var t=this;Object(r.g)().then(function(e){t.city=e.data})}}}},jWXv:function(t,e,n){t.exports={default:n("+iuc"),__esModule:!0}},n3ko:function(t,e,n){var r=n("93I4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},pfto:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var r=n("4d7F"),i=n.n(r);function o(t){var e=new Date(t);return e.getFullYear()+"-"+(1===(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(1===e.getDate().toString().length?"0"+e.getDate():e.getDate())}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new i.a(function(n,r){var i=new Date;i.setDate(i.getDate()-t);var a=new Date;a.setDate(a.getDate()-e);var s=[i=o(i),a=o(a)];s[1]&&n(s)})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Date,n=e.getFullYear(),r=e.getMonth()+1-t;return n+"-"+(r=r<10?"0"+r:r)}},raTm:function(t,e,n){"use strict";var r=n("5T2Y"),i=n("Y7ZC"),o=n("6/1s"),a=n("KUxP"),s=n("NegM"),c=n("XJU/"),u=n("oioR"),l=n("EXMj"),d=n("93I4"),p=n("RfKB"),f=n("2faE").f,v=n("V7Et")(0),h=n("jmDH");t.exports=function(t,e,n,g,C,m){var _=r[t],b=_,y=C?"set":"add",w=b&&b.prototype,x={};return h&&"function"==typeof b&&(m||w.forEach&&!a(function(){(new b).entries().next()}))?(b=e(function(e,n){l(e,b,t,"_c"),e._c=new _,void 0!=n&&u(n,C,e[y],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!m||"clear"!=t)&&s(b.prototype,t,function(n,r){if(l(this,b,t),!e&&m&&!d(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),m||f(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(e,t,C,y),c(b.prototype,n),o.NEED=!0),p(b,t),x[t]=b,i(i.G+i.W+i.F,x),m||g.setStrong(b,t,C),b}},t2Y8:function(t,e,n){"use strict";var r=n("QbLZ"),i=n.n(r),o=n("L2JU");function a(t,e){return e.includes(t)}e.a={computed:i()({},Object(o.b)(["name","btnPermissionRoles"])),created:function(){this._initBtnPermission()},methods:{_initBtnPermission:function(){var t=function(t,e){var n=[];if(t.length)return t.map(function(t){var r=t.split(":")[0],i=t.split(":")[1];r===e&&n.push(i)}),n}(this.btnPermissionRoles,this.PATH);this.btnArr=t,this.buttonFilter=a}}}},tg1W:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return c});var r=n("jWXv"),i=n.n(r),o=n("rfXi"),a=n.n(o);function s(t){if(null===t||t){var e={};for(var n in t)void 0!==t[n]&&""!==t[n]&&null!==t[n]&&0!==t[n]&&(e[n]=t[n]);return e}}function c(t){var e="",n=t.map(function(t){return e=-1!==t.indexOf("proprietor")?"proprietor":-1!==t.indexOf("finance")?"finance":-1!==t.indexOf("all")?"all":""}),r=a()(new i.a(n));return e="",r.includes("finance")&&r.includes("proprietor")?e="admin":r.map(function(t){-1!==t.indexOf("finance")?e="finance":-1!==t.indexOf("proprietor")?e="proprietor":-1===t.indexOf("all")||e||(e="all")}),e}},v6xn:function(t,e,n){var r=n("C2SN");t.exports=function(t,e){return new(r(t))(e)}},xvv9:function(t,e,n){n("cHUd")("Set")},yqMd:function(t,e,n){"use strict";var r=n("bMmh");n.n(r).a}}]);