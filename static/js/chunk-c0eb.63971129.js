(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c0eb"],{"79pb":function(t,e,r){"use strict";var i=r("p2TH");r.n(i).a},"8Acb":function(t,e,r){"use strict";var i=r("4d7F"),o=r.n(i),n=r("vDqi"),a=r.n(n),l=r("XJYT"),s=r("Q2AE"),u=r("kkBN"),c=r("Qyje"),m=r.n(c),d=a.a.create({timeout:5e3});d.interceptors.request.use(function(t){return"get"===t.method&&(t.paramsSerializer=function(t){return m.a.stringify(t,{arrayFormat:"repeat"})}),s.a.getters.token&&(t.headers.Authorization="bearer"+Object(u.a)()),t},function(t){o.a.reject(t)}),d.interceptors.response.use(function(t){var e=t;return 200!==e.status?(Object(l.Message)({message:e.message,type:"error",duration:5e3}),o.a.reject("error")):403===e.data.code?(Object(l.Message)({message:e.data.message,type:"error",duration:5e3}),o.a.reject("error")):401===e.data.code?(l.MessageBox.confirm("你的登录信息已过期，请重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.dispatch("FedLogOut").then(function(){location.reload()})}),o.a.reject("error")):t.data},function(t){switch(t.response.status){case 403:l.MessageBox.confirm("你的登录信息已过期，请重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.dispatch("FedLogOut").then(function(){location.reload()})});break;case 500:Object(l.Message)({message:t.response.data.message,type:"error",duration:5e3})}});var f=d,p="http://bzy.hhotel.com",h=p+"/bzy-upms/";e.a={login:function(t){return f({method:"post",url:p+"login",data:t})},logout:function(t){return f({method:"get",url:p+"rios-auth/logouting",params:t})},getLoginUserInfo:function(){return f({method:"post",url:p+"rios-auth/user"})},addMenu:function(t){return f({method:"POST",url:h+"menu",data:t})},getMenuList:function(t){return f({method:"get",url:h+"menu/tree",params:t})},updateMenuList:function(t){return f({method:"PUT",url:h+"menu",data:t})},deleteMenuList:function(t){return f({method:"DELETE",url:h+"menu/"+t})},getAuthUserMenu:function(){return f({method:"GET",url:h+"authUser/findMenu"})},getMenuDetail:function(t){return f({method:"get",url:h+"menu/"+t})},getRoleList:function(){return f({method:"get",url:h+"role/list"})},addRole:function(t){return f({method:"POST",url:h+"role",data:t})},updateRole:function(t){return f({method:"PUT",url:h+"role",data:t})},getRoleDetail:function(t){return f({method:"get",url:h+"role/"+t})},verifyRoleCode:function(t){return f({method:"get",url:h+"role/validateCode/"+t})},verifyRoleName:function(t){return f({method:"get",url:h+"role/validateName/"+t})},deleteRole:function(t){return f({method:"DELETE",url:h+"role/"+t})},getUserList:function(t){return f({method:"get",url:h+"authUser/list",params:t})},addUser:function(t){return f({method:"POST",url:h+"authUser",data:t})},getUser:function(t){return f({method:"GET",url:h+"authUser/"+t})},updateUser:function(t){return f({method:"PUT",url:h+"authUser",data:t})},deleteUser:function(t){return f({method:"DELETE",url:h+"authUser/"+t})},disabledUser:function(t){return f({method:"PUT",url:h+"authUser/forbidden/"+t})},validateUser:function(t){return f({method:"GET",url:h+"authUser/validate",params:t})},getUserInfo:function(){return f({method:"GET",url:h+"authUser/info"})},modifyUserInfo:function(t){return f({method:"PUT",url:h+"authUser/update",data:t})},findRolesByUserId:function(){return f({method:"GET",url:h+"authUser/findRolesByUserId"})},modifyUserPassword:function(t){return f({method:"PUT",url:h+"authUser/updatePassword",data:t})},validatePassword:function(t,e){return f({method:"GET",url:h+"authUser/validatePassword",params:e})},getDepartmentList:function(){return f({method:"get",url:h+"department/list"})}}},J2W5:function(t,e,r){"use strict";r.r(e);var i=r("m1cH"),o=r.n(i),n=r("Kw5r"),a=r("8Acb"),l={name:"Menumanage",data:function(){return{methods:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],tableListData:[],foldList:[],menuList:[],title:"",dialogAddMenu:!1,innerVisible:!1,iconVisible:!1,form:{parentName:"",parentId:"",name:"",type:1,sort:"",href:"",path:"",permission:"",icon:"",remarks:"",isShow:1,id:"",method:""},rules:{parentName:[{required:!0,message:"请选择上级菜单",trigger:"change"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择一个菜单",trigger:"change"}]},defaultProps:{children:"children",label:"name"}}},computed:{foldAllList:function(){return this.tableListData.map(function(t){return t.__identity})}},created:function(){this.getMenuList(),this.foldList=this.tableListData.map(function(t){return t.__identity})},methods:{toggleFoldingStatus:function(t){this.foldList.includes(t.__identity)?this.foldList.splice(this.foldList.indexOf(t.__identity),1):this.foldList.push(t.__identity)},toggleDisplayTr:function(t){for(var e=t.row,r=(t.index,0);r<this.foldList.length;r++){var i=this.foldList[r];if(e.__family.includes(i)&&e.__identity!==i)return"display:none;"}return""},toggleFoldingClass:function(t){return 0===t.children.length?"permission_placeholder":-1===this.foldList.indexOf(t.__identity)?"iconfont el-icon-caret-top":"iconfont el-icon-caret-bottom"},formatConversion:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"x";return e.length>0&&e.map(function(e,s){i.$set(e,"__level",r),n.default.set(e,"__family",[].concat(o()(a),[l+"_"+s])),n.default.set(e,"__identity",l+"_"+s),n.default.set(e,"__pop",!1),t.push(e),e.children.length>0&&i.formatConversion(t,e.children,r+1,[].concat(o()(a),[l+"_"+s]),l+"_"+s)}),t},deleteRow:function(t){var e=this;a.a.deleteMenuList(t.id).then(function(t){e.getMenuList()}).catch()},cancel:function(t){this.tableListData[t].__pop=!1},okDelete:function(t,e){this.tableListData[t].__pop=!1,this.deleteRow(e)},select:function(){this.innerVisible=!0},handleNodeClick:function(t){this.form.parentName=t.name,this.parentId=t.id},clickBaseMenu:function(){this.form.parentName="根目录",this.form.parentId=0},closeDialog:function(){this.resetForm()},resetForm:function(){this.$refs.form.resetFields(),this.form={parentName:"",parentId:"",name:"",type:"",sort:"",href:"",method:"",path:"",permission:"",remarks:"",isShow:1,id:""}},clickAddMenu:function(t){this.menuFlag=1,t&&(this.form.parentId=t.id,this.form.parentName=t.name),this.dialogAddMenu=!0,this.title="菜单新增"},clickEditMenu:function(t){var e=this;this.menuFlag=0,a.a.getMenuDetail(t.id).then(function(r){var i=r.data;e.dialogAddMenu=!0,e.title="菜单编辑",e.form.name=i.name,e.form.parentId=i.parentId,e.form.type=i.type,e.form.sort=i.sort,e.form.href=i.href,e.form.path=i.path,e.form.permission=i.permission,e.form.icon=i.icon,e.form.remarks=i.remarks,e.form.isShow=i.isShow,e.form.parentName=i.parentName?i.parentName:"根目录",e.form.id=t.id,e.form.method=i.method}).catch()},getMenuList:function(){var t=this;this.menuList=[],a.a.getMenuList().then(function(e){t.menuList=e.data,t.tableListData=t.formatConversion([],e.data)}).catch()},fetchParentId:function(){this.form.parentId=this.parentId,this.innerVisible=!1},selectIcon:function(t){this.form.icon=t,this.iconVisible=!1},submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;1===t.menuFlag?t.addMenu():0===t.menuFlag&&t.editMenu()})},addMenu:function(){var t=this,e={parentId:this.form.parentId?this.form.parentId:0,name:this.form.name,type:this.form.type,sort:this.form.sort,href:this.form.href,method:this.form.method,path:this.form.path,permission:this.form.permission,icon:this.form.icon,remarks:this.form.remarks,isShow:this.form.isShow};a.a.addMenu(e).then(function(e){t.dialogAddMenu=!1,t.getMenuList()}).catch()},editMenu:function(){var t=this,e={parentId:this.form.parentId,name:this.form.name,type:this.form.type,sort:this.form.sort,href:this.form.href,method:this.form.method,path:this.form.path,permission:this.form.permission,icon:this.form.icon,remarks:this.form.remarks,isShow:this.form.isShow,id:this.form.id};a.a.updateMenuList(e).then(function(e){t.dialogAddMenu=!1,t.getMenuList()}).catch()}}},s=(r("79pb"),r("KHd+")),u=Object(s.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[r("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary",size:"small"},on:{click:t.clickAddMenu}},[t._v("新增菜单")]),t._v(" "),r("el-button",{staticStyle:{"margin-right":"30px"},attrs:{disabled:0===t.foldList.length,type:"primary",size:"small"},on:{click:function(e){t.foldList=[]}}},[t._v("全部展开")]),t._v(" "),r("el-button",{attrs:{disabled:t.foldList===t.foldAllList,type:"primary",size:"small"},on:{click:function(e){t.foldList=t.foldAllList}}},[t._v("全部折叠")])],1),t._v(" "),r("el-table",{staticClass:"init_table",staticStyle:{width:"100%","border-radius":"8px"},attrs:{data:t.tableListData,"row-style":t.toggleDisplayTr,border:""}},[r("el-table-column",{attrs:{align:"center",width:"55",type:"index",label:"序号"}}),t._v(" "),r("el-table-column",{attrs:{label:"菜单名称","min-width":"100","show-overflow-tooltip":"",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("p",{staticClass:"icon-menu-parent",style:"margin-left: "+20*e.row.__level+"px;margin-top:0;margin-bottom:0"},[r("i",{staticClass:"permission_toggleFold",class:t.toggleFoldingClass(e.row),on:{click:function(r){t.toggleFoldingStatus(e.row)}}}),t._v("\n          "+t._s(e.row.name)+"\n        ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"typeName","min-width":"100",label:"类型"}}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"href","min-width":"100",label:"url链接"}}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"path","min-width":"100",label:"路由链接"}}),t._v(" "),r("el-table-column",{attrs:{align:"left",prop:"sort",label:"排序"}}),t._v(" "),r("el-table-column",{attrs:{align:"center",prop:"permission",width:"100",label:"权限标识"}}),t._v(" "),r("el-table-column",{attrs:{align:"center","min-width":"100",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(r){t.clickEditMenu(e.row)}}}),t._v(" "),r("el-popover",{staticStyle:{margin:"0 10px"},attrs:{placement:"top",width:"160"},model:{value:t.tableListData[e.$index].__pop,callback:function(r){t.$set(t.tableListData[e.$index],"__pop",r)},expression:"tableListData[scope.$index].__pop"}},[r("p",[t._v("确定删除吗？")]),t._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){t.cancel(e.$index,e.row)}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){t.okDelete(e.$index,e.row)}}},[t._v("确定")])],1),t._v(" "),r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete",circle:""},slot:"reference"})],1),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(r){t.clickAddMenu(e.row)}}})]}}])})],1),t._v(" "),r("el-dialog",{attrs:{title:t.title,visible:t.dialogAddMenu},on:{"update:visible":function(e){t.dialogAddMenu=e},close:t.closeDialog}},[r("el-form",{ref:"form",staticClass:"form-wrap",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"上级菜单",prop:"parentName"}},[r("el-dialog",{attrs:{visible:t.innerVisible,width:"30%",title:"上级菜单","append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"small"},on:{click:t.clickBaseMenu}},[t._v("根目录")]),t._v(" "),r("el-tree",{attrs:{data:t.menuList,props:t.defaultProps},on:{"node-click":t.handleNodeClick}}),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.innerVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.fetchParentId}},[t._v("确 定")])],1)],1),t._v(" "),r("el-input",{attrs:{placeholder:"选择上级菜单","suffix-icon":"el-icon-search"},on:{focus:t.select},model:{value:t.form.parentName,callback:function(e){t.$set(t.form,"parentName",e)},expression:"form.parentName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[r("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("el-radio",{attrs:{label:1}},[t._v("菜单")]),t._v(" "),r("el-radio",{attrs:{label:2}},[t._v("权限")])],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"可见"}},[r("el-radio-group",{model:{value:t.form.isShow,callback:function(e){t.$set(t.form,"isShow",e)},expression:"form.isShow"}},[r("el-radio",{attrs:{label:1}},[t._v("显示")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("隐藏")])],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{min:0,max:10},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"url链接",prop:"href"}},[r("el-input",{model:{value:t.form.href,callback:function(e){t.$set(t.form,"href",e)},expression:"form.href"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"请求类型",prop:"href"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.method,callback:function(e){t.$set(t.form,"method",e)},expression:"form.method"}},t._l(t.methods,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"路由链接",prop:"path"}},[r("el-input",{model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"权限标识",prop:"permission"}},[r("el-input",{model:{value:t.form.permission,callback:function(e){t.$set(t.form,"permission",e)},expression:"form.permission"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",rows:"2",placeholder:"请输入备注"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogAddMenu=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("保 存")])],1)],1),t._v(" "),r("el-dialog",{attrs:{visible:t.iconVisible,title:"选择图标",width:"80%"},on:{"update:visible":function(e){t.iconVisible=e}}},[r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.iconVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.iconVisible=!1}}},[t._v("保存")])],1)])],1)},[],!1,null,null,null);u.options.__file="menuManage.vue";e.default=u.exports},p2TH:function(t,e,r){}}]);