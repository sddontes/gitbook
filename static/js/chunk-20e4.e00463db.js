(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-20e4"],{"/8lg":function(t,e,a){"use strict";a.d(e,"q",function(){return n}),a.d(e,"r",function(){return o}),a.d(e,"e",function(){return i}),a.d(e,"i",function(){return s}),a.d(e,"g",function(){return l}),a.d(e,"u",function(){return u}),a.d(e,"v",function(){return c}),a.d(e,"f",function(){return h}),a.d(e,"a",function(){return d}),a.d(e,"j",function(){return m}),a.d(e,"h",function(){return f}),a.d(e,"l",function(){return p}),a.d(e,"n",function(){return g}),a.d(e,"m",function(){return b}),a.d(e,"k",function(){return v}),a.d(e,"s",function(){return y}),a.d(e,"o",function(){return _}),a.d(e,"p",function(){return w}),a.d(e,"t",function(){return F}),a.d(e,"c",function(){return S}),a.d(e,"d",function(){return C}),a.d(e,"b",function(){return L});var r=a("CcjM");function n(t){return Object(r.a)({url:"bzy-upms/authUser/list",method:"get",params:t})}function o(t){return Object(r.a)({url:"bzy-upms/authUser/findUsersByRoleCode",method:"post",data:t})}function i(t){return Object(r.a)({url:"bzy-upms/authUser/getAllUser",method:"get",params:t})}function s(t){return Object(r.a)({url:"bzy-hotel/hotel/listEffective",method:"post",data:t})}function l(t){return Object(r.a)({url:"bzy-hotel/city/hotelAreaResourceList",method:"get",params:t})}function u(t){return Object(r.a)({url:"bzy-upms/user/hotelResource",method:"post",data:t})}function c(t){return Object(r.a)({url:"bzy-upms/user/hotelResource",method:"put",data:t})}function h(t){return Object(r.a)({url:"bzy-upms/user/hotelResource/getResourcesByUserForm",method:"post",data:t})}function d(t,e,a){var n="1"===t?"bzy-upms/user/hotelResource/"+e:"bzy-upms/user/hotelResource/"+e+"?allocationObject="+a;return Object(r.a)({url:n,method:"delete"})}function m(t){return Object(r.a)({url:"bzy-hotel/resource/getReleation/"+t,method:"get"})}function f(){return Object(r.a)({url:"bzy-upms/department/list",method:"get"})}function p(){return Object(r.a)({url:"bzy-upms/department/getSubDepartmentList",method:"get"})}function g(){return Object(r.a)({url:"bzy-upms/department/getSubUserRoleList",method:"get"})}function b(t){return Object(r.a)({url:"bzy-upms/user/hotelResource/querySubUserHotelResourceList",method:"post",data:t})}function v(){return Object(r.a)({url:"bzy-hotel/resource/getReleationHotelEffective",method:"get"})}function y(){return Object(r.a)({url:"bzy-hotel/city/hotelAreaPermissionResourceList",method:"get"})}function _(t){return Object(r.a)({url:"bzy-upms/theater/subList/"+t,method:"get"})}function w(t){return Object(r.a)({url:"bzy-upms/theater/getTheaterNodeDetails/"+t,method:"get",data:t})}function F(t){return Object(r.a)({url:"/bzy-upms/theater",method:"post",data:t})}function S(t){return Object(r.a)({url:"/bzy-upms/theater",method:"put",data:t})}function C(){return Object(r.a)({url:"bzy-upms/theater/queryAll",method:"get"})}function L(t){return Object(r.a)({url:"bzy-upms/theater/"+t,method:"delete"})}},"14Xm":function(t,e,a){t.exports=a("cSMa")},"32LA":function(t,e,a){"use strict";function r(t){return t.map(function(t){var e=[];return t.children.map(function(t){e.push({name:t.name,code:t.code})}),{name:t.name,code:t.code,children:e}})}function n(t){return t.map(function(t){var e=[];return t.children.map(function(t){e.push({nodeName:t.nodeName,id:t.id})}),{nodeName:t.nodeName,id:t.id,children:e}})}a.d(e,"b",function(){return r}),a.d(e,"a",function(){return n})},"5i6N":function(t,e,a){},"89rS":function(t,e,a){"use strict";a.r(e);var r=a("gDS+"),n=a.n(r),o=a("14Xm"),i=a.n(o),s=a("D3Ub"),l=a.n(s),u=a("GQeE"),c=a.n(u),h=a("uMSB"),d=a("ko7z"),m=a("/uL/"),f=a("/8lg"),p=a("32LA"),g=a("Br0l"),b={name:"ShopAssignMannage",mixins:[a("t2Y8").a],data:function(){return{PATH:"shop-manager/shop-assign-manage",alias:"",unbindFromPickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},isOperationSelectLoading:!1,unbindFrom:{checkOutDate:null},hint:"提示：解绑后，该店长将无权查看酒店数据，是否确认解绑？",getInfo:{},shopPersons:[],shopStatus:g.a,isShiftLoading:!1,isShiftOpen:!1,showUnBindDialog:!1,operation:"",operationList:[],operationAllList:[],isShopNameLoading:!1,loadingFlag:!1,users:[],hotelList:[],hotels:[],shops:[],storeManagerName:"",storeManagerCellphone:"",hotelName:"",provinceCode:"",cityCode:"",storeManagerStatus:"",page:1,size:20,totalPages:1,total:0,showDeleteDialog:!1,newFormVisible:!1,updataFormVisible:!1,formLabelWidth:"120px",formInputWidth:"300px",shiftForm:{manager:"",storeManagerNameList:[],receivePerson:""},newForm:{updateStatusTime:"",hotels:[],storeManagerCellphone:"",hotelValue:[],userName:""},upDataForm:{updateStatusTime:"",storeManagerStatus:""},cityValue:[],city:[],props:{value:"code",label:"name",checkStrictly:!0},pickerOptions:{disabledDate:function(t){return t<new Date(new Date-2592e5)||t>new Date(new Date)}},shiftFormRules:{storeManagerNameList:[{type:"array",required:!0,message:"请选择店长",trigger:"change"}],manager:[{required:!0,message:"请选择运营经理",trigger:"change"}],receivePerson:[{required:!0,message:"请选择接收人",trigger:"change"}]},newFormRules:{userName:[{required:!0,message:"请选择店长用户",trigger:"change"}],hotelValue:[{type:"array",required:!0,message:"请选择酒店",trigger:"change"}]},upDataFormRules:{updateStatusTime:[{required:!0,message:"请选择日期",trigger:"change"}]},isHandleSaveShift:"btn-disabled"}},computed:{loading:function(){return this.$store.state.loading}},watch:{shiftForm:{deep:!0,handler:function(t){var e=c()(t).some(function(e){return 0===t[e].length||""===t[e]});this.isHandleSaveShift=e?"btn-disabled":"btn-submit"}}},created:function(){this.getInfo=this.$store.state.user.info,this.alias=this.getInfo.roles[0].alias,"yunyingjingli"===this.alias&&(this.shiftForm.manager=this.getInfo.id),this._getShopManageList(),this._getCity(),this._getUserListByRoleCode(),this._getHotel()},methods:{hideUnBindEvent:function(){this.unbindFrom.checkOutDate=null,this.showUnBindDialog=!1,this.resetForm("unbindFrom"),this.cancel()},queryShopManager:function(t){this._getShopManagers(t)},getStyle:function(t){if(-1!==t.indexOf("逾期"))return"error-text"},handleClickShiftBtn:function(){"yunyingjingli"===this.alias?this._getShopManagers(this.getInfo.id):(this._getUserList(),this.isShiftOpen=!0)},handleSaveShift:function(){var t=this;this.$refs.shiftForm.validate(function(e){if(!e)return!1;t.isShiftLoading=!0,t._shiftHotel()})},closeShiftDialog:function(){this.creator="",this.shiftForm.storeManagerNameList=[],this.shiftForm.receivePerson="",this.shiftForm.manager="",this.resetForm("shiftForm"),this.isShiftOpen=!1},clearReceivePerson:function(){this.creator=""},selectReceivePerson:function(t){this.creator=t},exportExcel:function(){var t={storeManagerName:this.storeManagerName,storeManagerCellphone:this.storeManagerCellphone,hotelName:this.hotelName,provinceCode:this.provinceCode,cityCode:this.cityCode,storeManagerStatus:this.storeManagerStatus,page:this.page,size:this.size,creator:this.creator||""},e="";for(var a in t)e+="&"+a+"="+t[a];var r="http://bzy.hhotel.com/bzy-sk/project/exportHotelRelationList?"+(e+="&userId="+this.$store.state.user.userId);r=encodeURI(r),window.open(r,"_blank")},resetForm:function(t){this.$refs[t].resetFields()},clearOperation:function(){this.creator=""},closeUpdataFrom:function(){this.upDataForm={updateStatusTime:"",storeManagerStatus:""},this.resetForm("upDataForm"),this.updataFormVisible=!1},closeDialog:function(){this.resetForm("newForm"),this.newFormVisible=!1,this.hotelList=[],this.newForm={updateStatusTime:"",hotels:[],storeManagerCellphone:"",hotelValue:[],userName:""},this.newFormVisible=!1},selectOperation:function(t){var e=this;return l()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:e.creator=t;case 3:case"end":return a.stop()}},a,e)}))()},selectUser:function(t){if(t){var e=this.users.filter(function(e){return e.code===t});"{}"!==n()(e[0])&&(this.userInfo=e[0],this.newForm.storeManagerId=e[0].id,this.newForm.storeManagerCode=e[0].code,this.newForm.storeManagerName=e[0].name,this.newForm.storeManagerCellphone=e[0].phone,this.newForm.provinceName=e[0].provinceName,this.newForm.provinceCode=e[0].provinceCode,this.newForm.cityCode=e[0].cityCode,this.newForm.cityName=e[0].cityName)}},remoteHotel:function(t){var e=this;""!==t?setTimeout(function(){e.hotelList=e.hotels.filter(function(e){return e.name.indexOf(t)>-1})},200):this.hotelList=[]},handleSizeChange:function(t){this.size=t,this._getShopManageList()},handleCurrentChange:function(t){this.page=t,this._getShopManageList()},search:function(){this.page=1,this._getShopManageList()},selectCity:function(t){this.provinceCode=t[0]||"",this.cityCode=t[1]||""},addConnect:function(){var t,e=this;t=this.newForm.hotelValue.map(function(t){var a=e.hotels.filter(function(e){return e.code===t})[0];return{hotelCode:a.code,hotelName:a.name,cooperationMode:a.cooperationMode,bigAreaCode:"",bigAreaName:a.bigArea,provinceCode:a.proviceCode,provinceName:a.proviceName,cityCode:a.cityCode,cityName:a.cityName,districCode:a.areaCode,districName:a.areaName,hotelAddress:"",detailAddress:"",hotelStatus:a.status,hotelContractTime:a.signDate,crsId:a.crsId}}),this.bindHotels=t,this.newForm.hotels=this.bindHotels,this._bindRelation()},save:function(t){var e=this;switch(t){case"NEW":this.$refs.newForm.validate(function(t){if(!t)return!1;e.addConnect()});break;case"UNBIND":this.$refs.unbindFrom.validate(function(t){if(!t)return!1;e.okDelete()});break;default:this.$refs.upDataForm.validate(function(t){if(!t)return!1;e._updateBindRelation()})}},unbundling:function(t){this.row=t,this.showUnBindDialog=!0},updataStatus:function(t){this.updataFormVisible=!0,this.upDataForm.storeManagerName=t.storeManagerName,this.upDataForm.storeManagerCellphone=t.storeManagerCellphone,this.upDataForm.provinceName=t.provinceName,this.upDataForm.cityName=t.cityName,this.upDataForm.storeManagerCode=t.storeManagerCode,this.upDataForm.hotelCode=t.hotelCode,this.upDataForm.storeManagerStatus=t.storeManagerStatus,this.upDataForm.updateStatusTime=t.updateStatusTime,this.upDataForm.hotelName=t.hotelName,this.upDataForm.storeManagerStatusDesc=t.storeManagerStatusDesc},cancel:function(){this.showDeleteDialog=!1,this.$message({type:"info",message:"已取消解绑"})},okDelete:function(){this.showDeleteDialog=!1,this._unBindRelation()},_getShopManageList:function(){var t=this;this.shops=[];var e={storeManagerName:this.storeManagerName,storeManagerCellphone:this.storeManagerCellphone,hotelName:this.hotelName,provinceCode:this.provinceCode,cityCode:this.cityCode,storeManagerStatus:this.storeManagerStatus,page:this.page,size:this.size,creator:this.creator};Object(d.e)(e).then(function(e){t.shops=e.data.list,t.totalPages=e.data.pages,t.total=e.data.total})},_getCity:function(){var t=this;Object(m.g)().then(function(e){t.city=Object(p.b)(e.data)})},_getUserListByRoleCode:function(){var t=this;this.isShopNameLoading=!0,Object(h.c)({roleCode:"HOTEL_ADMIN"}).then(function(e){t.users=e.data,t.isShopNameLoading=!1}),Object(h.c)({roleCode:"RNMY0UD4338077588"}).then(function(e){t.operationList=e.data})},_getUserList:function(){var t=this;this.isOperationSelectLoading=!0;Object(f.q)({page:1,size:1e4,roleCode:"RNMY0UD4338077588"}).then(function(e){t.operationAllList=e.data.list,t.isOperationSelectLoading=!1}).catch(function(e){t.isOperationSelectLoading=!1})},_getHotel:function(){var t=this;Object(m.i)({page:1,size:99999,status:["WAIT_OPERATION","OPERATIONING"]}).then(function(e){t.hotels=e.data.list,t.hotelList=[]})},_bindRelation:function(){var t=this;Object(d.a)(this.newForm).then(function(e){t.$message({type:"success",message:"绑定成功请及时修改店长状态为已进店，确保店长能够收到相关任务",onClose:function(){t.loadingFlag=!1,t.newFormVisible=!1,t._getShopManageList()}})}).catch(function(){t.loadingFlag=!1})},_unBindRelation:function(){var t=this,e=this.row,a={hotelCode:e.hotelCode,storeManagerCode:e.storeManagerCode,updateTime:this.unbindFrom.checkOutDate};Object(d.i)(a).then(function(e){t._getShopManageList(),t.$message({type:"success",message:"解绑成功"}),t.showUnBindDialog=!1})},_updateBindRelation:function(){var t=this;this.loadingFlag=!0;var e={storeManagerCode:this.upDataForm.storeManagerCode,hotelCode:this.upDataForm.hotelCode,storeManagerStatus:this.upDataForm.storeManagerStatus,updateStatusTime:this.upDataForm.updateStatusTime};Object(d.j)(e).then(function(e){t.$message({type:"success",message:"更新绑定信息成功",onClose:function(){t.loadingFlag=!1,t._getShopManageList()}}),t.updataFormVisible=!1}).catch(function(e){t.loadingFlag=!1})},_getShopManagers:function(t){var e,a=this;Object(d.f)(t).then((e=l()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.data.storeManagerList;case 2:a.shopPersons=t.sent,a.shiftForm.storeManagerNameList=e.data.storeManagerList,a.shopSize=e.data.size,a.$nextTick(function(){a.isShiftOpen=!0});case 6:case"end":return t.stop()}},t,a)})),function(t){return e.apply(this,arguments)})).catch(function(){a.$nextTick(function(){a.isShiftOpen=!0})})},_shiftHotel:function(){var t=this,e={userId:this.shiftForm.manager,storeManagerNameList:0!==this.shiftForm.storeManagerNameList.length?this.shiftForm.storeManagerNameList:[],creator:this.creator||""};if(this.shiftForm.receivePerson===this.shiftForm.manager)return this.isShiftLoading=!1,void this._myMessage({msg:"转移人和接收人不能是同一人",type:"error"});Object(d.h)(e).then(function(e){t.isShiftLoading=!1,t.$message({type:"success",message:"转移关系成功",onClose:function(){t._getShopManageList()}}),t.isShiftOpen=!1}).catch(function(e){t.isShiftLoading=!1})}}},v=(a("rYQB"),a("KHd+")),y=Object(v.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotel layout publicDialog",attrs:{id:"manager"}},[a("div",{staticClass:"tab-head"},[a("div",{staticClass:"tab-head-list"},[a("div",{staticClass:"el-row"},[a("div",{staticClass:"el-col el-col-22"},[a("div",{staticClass:"el-col el-col-8"},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("姓名")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入姓名"},model:{value:t.storeManagerName,callback:function(e){t.storeManagerName=e},expression:"storeManagerName"}})],1)]),t._v(" "),a("div",{staticClass:"el-col el-col-8"},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("手机号")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入手机号"},model:{value:t.storeManagerCellphone,callback:function(e){t.storeManagerCellphone=e},expression:"storeManagerCellphone"}})],1)]),t._v(" "),a("div",{staticClass:"el-col el-col-8"},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("酒店名称")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入酒店名称"},model:{value:t.hotelName,callback:function(e){t.hotelName=e},expression:"hotelName"}})],1)]),t._v(" "),a("div",{staticClass:"el-col el-col-8"},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("区域")]),t._v(" "),a("el-cascader",{staticStyle:{width:"260px"},attrs:{options:t.city,props:t.props,clearable:"",filterable:"",placeholder:"请选择"},on:{change:t.selectCity},model:{value:t.cityValue,callback:function(e){t.cityValue=e},expression:"cityValue"}})],1)]),t._v(" "),a("div",{staticClass:"el-col el-col-8"},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("店长状态")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.storeManagerStatus,callback:function(e){t.storeManagerStatus=e},expression:"storeManagerStatus"}},t._l(t.shopStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("div",{staticClass:"el-col el-col-8"},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("运营经理")]),t._v(" "),a("el-select",{staticStyle:{},attrs:{loading:!1,filterable:"",clearable:"",placeholder:"请选择"},on:{clear:t.clearOperation,change:t.selectOperation},model:{value:t.operation,callback:function(e){t.operation=e},expression:"operation"}},t._l(t.operationList,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)])]),t._v(" "),a("div",{staticClass:"el-col el-col-2"},[a("div",{staticClass:"tab-list-item"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])])])]),t._v(" "),a("div",{staticStyle:{float:"left"}},[t.buttonFilter("shift",t.btnArr)?a("span",{staticStyle:{cursor:"pointer",color:"#006072"},on:{click:t.handleClickShiftBtn}},[a("i",{staticClass:"iconfont iconic_guanxizhuanyi"}),t._v("\n      关系转移\n    ")]):t._e()]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("div",{staticClass:"btn-right"},[t.buttonFilter("add",t.btnArr)?a("span",{on:{click:function(e){t.newFormVisible=!0}}},[a("i",{staticClass:"addIcon"},[t._v("+")]),t._v(" "),a("span",{staticClass:"add"},[t._v("新增")])]):t._e(),t._v(" "),t.buttonFilter("lead-out",t.btnArr)?a("span",{on:{click:t.exportExcel}},[a("i",{staticClass:"iconfont iconic_download"}),t._v(" "),a("span",{staticClass:"add"},[t._v("导出")])]):t._e()])]),t._v(" "),a("div",{staticClass:"table-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shops,"max-height":"500","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{fixed:"",prop:"storeManagerName",label:"姓名","min-width":"100","class-name":"tag-wrapper"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"name"},[t._v(t._s(e.row.storeManagerName))]),t._v(" "),"开业总经理"===e.row.position?a("span",{staticClass:"tag active1"},[t._v("开业")]):"单店总经理"===e.row.position?a("span",{staticClass:"tag active2"},[t._v("单店")]):"多店总经理"===e.row.position?a("span",{staticClass:"tag active3"},[t._v("多店")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"storeManagerCellphone",label:"手机号","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hotelName",label:"关联酒店","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"运营经理","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"provinceName",label:"省份","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeManagerStatusDesc",label:"当前阶段","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.getStyle(e.row.storeManagerStatusDesc)},[t._v(t._s(e.row.storeManagerStatusDesc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"updateStatusTime",label:"分配时间","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.buttonFilter("modify",t.btnArr)?a("el-button",{staticClass:"btn-form-sub",attrs:{size:"mini"},on:{click:function(a){t.updataStatus(e.row)}}},[t._v("修改状态")]):t._e(),t._v(" "),t.buttonFilter("unbind",t.btnArr)?a("el-button",{staticClass:"btn-form-unbind",attrs:{size:"mini"},on:{click:function(a){t.unbundling(e.row)}}},[t._v("解绑关系")]):t._e()]}}])})],1)],1),t._v(" "),a("div",{staticClass:"sum"},[t._v("共"+t._s(t.total)+"条")]),t._v(" "),a("div",{staticClass:"pagination-content"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,40,80,100],"page-size":t.size,"page-count":t.totalPages,layout:" sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.isShiftOpen,"show-close":!1,width:"40.6%",title:"关系转移"},on:{"update:visible":function(e){t.isShiftOpen=e}}},[a("el-form",{ref:"shiftForm",attrs:{model:t.shiftForm,rules:t.shiftFormRules,"label-position":"left"}},["yunyingjingli"!==t.alias?a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"运营经理",prop:"manager"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.isOperationSelectLoading,filterable:"",clearable:"",placeholder:"请选择"},on:{change:t.queryShopManager},model:{value:t.shiftForm.manager,callback:function(e){t.$set(t.shiftForm,"manager",e)},expression:"shiftForm.manager"}},t._l(t.operationAllList,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"店长",prop:"storeManagerNameList"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.shiftForm.storeManagerNameList,callback:function(e){t.$set(t.shiftForm,"storeManagerNameList",e)},expression:"shiftForm.storeManagerNameList"}},t._l(t.shopPersons,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("div",{staticStyle:{padding:"0 0 20px 120px"}},[t._v("共"+t._s(t.shiftForm.storeManagerNameList.length)+"个店长")]),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"接收人",prop:"receivePerson"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:!1,filterable:"",clearable:"",placeholder:"请选择"},on:{clear:t.clearReceivePerson,change:t.selectReceivePerson},model:{value:t.shiftForm.receivePerson,callback:function(e){t.$set(t.shiftForm,"receivePerson",e)},expression:"shiftForm.receivePerson"}},t._l(t.operationList,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button btn-default btn-cancel",on:{click:t.closeShiftDialog}},[t._v("取消")]),t._v(" "),a("el-button",{class:["el-button","btn-default",t.isHandleSaveShift],attrs:{loading:t.isShiftLoading,disabled:t.isShiftLoading,type:"primary"},on:{click:t.handleSaveShift}},[t._v("确认转移")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.newFormVisible,"show-close":!1,width:"40.6%",title:"新建关联关系"},on:{"update:visible":function(e){t.newFormVisible=e}}},[a("el-form",{ref:"newForm",attrs:{model:t.newForm,rules:t.newFormRules,"label-position":"left"}},[a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"姓名",prop:"userName"}},[a("el-select",{style:{width:t.formInputWidth},attrs:{loading:t.isShopNameLoading,filterable:"",placeholder:"请选择"},on:{change:t.selectUser},model:{value:t.newForm.userName,callback:function(e){t.$set(t.newForm,"userName",e)},expression:"newForm.userName"}},t._l(t.users,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"手机号"}},[t._v(t._s(t.newForm.storeManagerCellphone))]),t._v(" "),a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"所在区域"}},[t._v(t._s(t.newForm.provinceName)+" "+t._s(t.newForm.cityName))]),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"分配酒店",prop:"hotelValue"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{"remote-method":t.remoteHotel,multiple:"",filterable:"",remote:"","reserve-keyword":"","no-data-text":"暂未搜索到酒店",placeholder:"请输入酒店名称搜索"},model:{value:t.newForm.hotelValue,callback:function(e){t.$set(t.newForm,"hotelValue",e)},expression:"newForm.hotelValue"}},t._l(t.hotelList,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"实际分配日期"}},[a("el-date-picker",{style:{width:t.formInputWidth},attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期"},model:{value:t.newForm.updateStatusTime,callback:function(e){t.$set(t.newForm,"updateStatusTime",e)},expression:"newForm.updateStatusTime"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button btn-default btn-cancel",on:{click:t.closeDialog}},[t._v("取消")]),t._v(" "),a("el-button",{class:["el-button","btn-default","btn-submit"],attrs:{loading:t.loadingFlag,type:"primary"},on:{click:function(e){t.save("NEW")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.updataFormVisible,"show-close":!1,width:"40.6%",title:"修改关联关系"},on:{"update:visible":function(e){t.updataFormVisible=e}}},[a("el-form",{ref:"upDataForm",attrs:{model:t.upDataForm,rules:t.upDataFormRules,"label-position":"left"}},[a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"姓名"}},[a("span",{staticStyle:{"margin-right":"50px"}},[t._v(t._s(t.upDataForm.storeManagerName))])]),t._v(" "),a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"手机号"}},[t._v(t._s(t.upDataForm.storeManagerCellphone))]),t._v(" "),a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"所在区域"}},[t._v(t._s(t.upDataForm.provinceName)+t._s(t.upDataForm.cityName))]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"关联酒店"}},[a("span",{staticStyle:{"margin-right":"50px"}},[t._v(t._s(t.upDataForm.hotelName))])]),t._v(" "),a("el-form-item",{staticClass:"tab-list-item",attrs:{"label-width":t.formLabelWidth,label:"阶段状态"}},[a("span",[t._v(t._s(t.upDataForm.storeManagerStatusDesc))])])],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"当前阶段"}},[a("el-select",{style:{width:t.formInputWidth},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.upDataForm.storeManagerStatus,callback:function(e){t.$set(t.upDataForm,"storeManagerStatus",e)},expression:"upDataForm.storeManagerStatus"}},t._l(t.shopStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"实际到店日期",prop:"updateStatusTime"}},[a("el-date-picker",{style:{width:t.formInputWidth},attrs:{"picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期"},model:{value:t.upDataForm.updateStatusTime,callback:function(e){t.$set(t.upDataForm,"updateStatusTime",e)},expression:"upDataForm.updateStatusTime"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button btn-default btn-cancel",on:{click:t.closeUpdataFrom}},[t._v("取消")]),t._v(" "),a("el-button",{class:["el-button","btn-default","btn-submit"],attrs:{loading:t.loadingFlag,type:"primary"},on:{click:function(e){t.save("UPDATE")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showUnBindDialog,"show-close":!1,width:"40.6%",title:"解绑关系"},on:{"update:visible":function(e){t.showUnBindDialog=e}}},[a("el-form",{ref:"unbindFrom",attrs:{model:t.unbindFrom,"label-width":t.formLabelWidth,"label-position":"left"}},[a("el-form-item",{attrs:{rules:[{required:!0,message:"请选择实际离店日期"}],prop:"checkOutDate",label:"实际离店时间"}},[a("el-date-picker",{attrs:{"picker-options":t.unbindFromPickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.unbindFrom.checkOutDate,callback:function(e){t.$set(t.unbindFrom,"checkOutDate",e)},expression:"unbindFrom.checkOutDate"}})],1)],1),t._v(" "),a("div",{staticClass:"hint"},[t._v(t._s(t.hint))]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button btn-default btn-cancel",on:{click:t.hideUnBindEvent}},[t._v("取消")]),t._v(" "),a("el-button",{class:["el-button","btn-default","btn-submit"],attrs:{loading:t.loadingFlag,type:"primary"},on:{click:function(e){t.save("UNBIND")}}},[t._v("解绑")])],1)],1)],1)},[],!1,null,null,null);y.options.__file="shopAssignManage.vue";e.default=y.exports},Br0l:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r=[{label:"未进店",value:1},{label:"已进店",value:2}]},D3Ub:function(t,e,a){"use strict";e.__esModule=!0;var r,n=a("4d7F"),o=(r=n)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new o.default(function(t,a){return function r(n,i){try{var s=e[n](i),l=s.value}catch(t){return void a(t)}if(!s.done)return o.default.resolve(l).then(function(t){r("next",t)},function(t){r("throw",t)});t(l)}("next")})}}},cSMa:function(t,e,a){var r=function(){return this}()||Function("return this")(),n=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=n&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=a("u4eC"),n)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},"gDS+":function(t,e,a){t.exports={default:a("oh+g"),__esModule:!0}},ko7z:function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"a",function(){return o}),a.d(e,"i",function(){return i}),a.d(e,"j",function(){return s}),a.d(e,"f",function(){return l}),a.d(e,"h",function(){return u}),a.d(e,"c",function(){return c}),a.d(e,"b",function(){return h}),a.d(e,"d",function(){return d}),a.d(e,"g",function(){return m});var r=a("CcjM");function n(t){return Object(r.a)({url:"bzy-sk/project/list",method:"get",params:t})}function o(t){return Object(r.a)({url:"bzy-sk/project/relations",method:"put",data:t})}function i(t){return Object(r.a)({url:"bzy-sk/project/relation",method:"put",data:t})}function s(t){return Object(r.a)({url:"bzy-sk/project/storeManager",method:"put",data:t})}function l(t){return Object(r.a)({url:"bzy-sk/project/queryStoreManager/"+t,method:"get"})}function u(t){return Object(r.a)({url:"bzy-sk/project/updaterCreator",method:"post",data:t})}function c(t){return Object(r.a)({url:"bzy-sk/storeManagerFlow/list",method:"post",data:t})}function h(t){return Object(r.a)({url:"bzy-sk/storeManagerFlow/deatilFlowInfo/"+t,method:"get"})}function d(t){return Object(r.a)({url:"bzy-sk/userNtcController/getUserNtcInfoList",method:"get",params:t})}function m(t){return Object(r.a)({url:"bzy-sk/userNtcController/updateNtcStatus",method:"post",data:t})}},"oh+g":function(t,e,a){var r=a("WEpk"),n=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},rYQB:function(t,e,a){"use strict";var r=a("5i6N");a.n(r).a},t2Y8:function(t,e,a){"use strict";var r=a("QbLZ"),n=a.n(r),o=a("L2JU");function i(t,e){return e.includes(t)}e.a={computed:n()({},Object(o.b)(["name","btnPermissionRoles"])),created:function(){this._initBtnPermission()},methods:{_initBtnPermission:function(){var t=function(t,e){var a=[];if(t.length)return t.map(function(t){var r=t.split(":")[0],n=t.split(":")[1];r===e&&a.push(n)}),a}(this.btnPermissionRoles,this.PATH);this.btnArr=t,this.buttonFilter=i}}}},u4eC:function(t,e){!function(e){"use strict";var a,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",u="object"==typeof t,c=e.regeneratorRuntime;if(c)u&&(t.exports=c);else{(c=e.regeneratorRuntime=u?t.exports:{}).wrap=_;var h="suspendedStart",d="suspendedYield",m="executing",f="completed",p={},g={};g[i]=function(){return this};var b=Object.getPrototypeOf,v=b&&b(b(x([])));v&&v!==r&&n.call(v,i)&&(g=v);var y=C.prototype=F.prototype=Object.create(g);S.prototype=y.constructor=C,C.constructor=S,C[l]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(y),t},c.awrap=function(t){return{__await:t}},L(M.prototype),M.prototype[s]=function(){return this},c.AsyncIterator=M,c.async=function(t,e,a,r){var n=new M(_(t,e,a,r));return c.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},L(y),y[l]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){for(;e.length;){var r=e.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},c.values=x,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=a),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),k(a),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var n=r.arg;k(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=a),p}}}function _(t,e,a,r){var n=e&&e.prototype instanceof F?e:F,o=Object.create(n.prototype),i=new D(r||[]);return o._invoke=function(t,e,a){var r=h;return function(n,o){if(r===m)throw new Error("Generator is already running");if(r===f){if("throw"===n)throw o;return j()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var s=N(i,a);if(s){if(s===p)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===h)throw r=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var l=w(t,e,a);if("normal"===l.type){if(r=a.done?f:d,l.arg===p)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=f,a.method="throw",a.arg=l.arg)}}}(t,a,i),o}function w(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}function F(){}function S(){}function C(){}function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function M(t){var e;this._invoke=function(a,r){function o(){return new Promise(function(e,o){!function e(a,r,o,i){var s=w(t[a],t,r);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):Promise.resolve(u).then(function(t){l.value=t,o(l)},i)}i(s.arg)}(a,r,e,o)})}return e=e?e.then(o,o):o()}}function N(t,e){var r=t.iterator[e.method];if(r===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=a,N(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=w(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=a,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:a,done:!0}}}(function(){return this}()||Function("return this")())},uMSB:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"b",function(){return o}),a.d(e,"a",function(){return i});var r=a("CcjM");function n(t){return Object(r.a)({url:"bzy-upms/authUser/findUsersByRoleCode",method:"post",data:t})}function o(t){return Object(r.a)({url:"bzy-upms/theater/subList/"+t,method:"get"})}function i(t){return Object(r.a)({url:"bzy-hotel/hotel/queryLikeByNameOrCode",method:"get",params:t})}}}]);