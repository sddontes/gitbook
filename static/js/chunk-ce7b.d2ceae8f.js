(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ce7b"],{"5OVc":function(t,e,n){},"6aKk":function(t,e,n){"use strict";n.d(e,"p",function(){return l}),n.d(e,"r",function(){return s}),n.d(e,"q",function(){return i}),n.d(e,"o",function(){return o}),n.d(e,"n",function(){return r}),n.d(e,"v",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"k",function(){return d}),n.d(e,"h",function(){return h}),n.d(e,"l",function(){return f}),n.d(e,"m",function(){return b}),n.d(e,"b",function(){return m}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return g}),n.d(e,"e",function(){return v}),n.d(e,"j",function(){return y}),n.d(e,"g",function(){return _}),n.d(e,"f",function(){return S}),n.d(e,"s",function(){return C}),n.d(e,"i",function(){return O}),n.d(e,"t",function(){return j}),n.d(e,"u",function(){return x});var a=n("CcjM");function l(t){return Object(a.a)({url:"bzy-csg-settlement/settlementModel/pageList",method:"post",data:t})}function s(t){return Object(a.a)({url:"bzy-csg-settlement/settlementSubject/rule/pageList",method:"post",data:t})}function i(t){return Object(a.a)({url:"bzy-csg-settlement/settlementSubject/rule/detail/"+t,method:"get"})}function o(t){return Object(a.a)({url:"bzy-csg-settlement/bill/list",method:"post",data:t})}function r(t){return Object(a.a)({url:"bzy-csg-settlement/bill/queryBillDetail/"+t,method:"get"})}function c(t){return Object(a.a)({url:"bzy-csg-settlement/dataSync/serviceFeeExcel",method:"post",data:t})}function u(t){return Object(a.a)({url:"bzy-csg-settlement/settlementSubject/mini/achievement",method:"post",data:t})}function d(t){return Object(a.a)({url:"bzy-csg-settlement/billInfoAdjust/listByMultiselect",method:"post",data:t})}function h(t){return Object(a.a)({url:"bzy-csg-settlement/email/sendLog",method:"post",data:t})}function f(t){return Object(a.a)({url:"bzy-csg-settlement/paybill/pageList",method:"post",data:t})}function b(t){return Object(a.a)({url:"bzy-csg-settlement/email",method:"post",data:t})}function m(t){return Object(a.a)({url:"bzy-csg-settlement/billInfoAdjust/addBillInfoAdjust",method:"post",data:t})}function p(t){return Object(a.a)({url:"bzy-csg-settlement/billExtendConf?"+t,method:"get"})}function g(t){return Object(a.a)({url:"bzy-csg-settlement/billExtendConf",method:"post",data:t})}function v(t,e){return Object(a.a)({url:"bzy-csg-settlement/billExtendConf/"+t,data:e,method:"put",headers:{"Content-Type":"text/plain;charset=UTF-8"}})}function y(t){return Object(a.a)({url:"bzy-csg-settlement/dataSync/billExtend",method:"post",data:t})}function _(t){return Object(a.a)({url:"bzy-csg-settlement/billExtend/hierarchy",params:t,method:"get"})}function S(t){return Object(a.a)({url:"bzy-csg-settlement/billExtend/hotel",params:t,method:"get"})}function C(t){return Object(a.a)({url:"bzy-csg-settlement/settlementModel/list",data:t,method:"post"})}function O(t){return Object(a.a)({url:"bzy-csg-settlement/billInfoAdjust/importBillAdjustExcel",data:t,method:"post"})}function j(t){return Object(a.a)({url:"bzy-csg-settlement/transaction/payment",data:t,headers:{"Content-Type":"text/plain;charset=UTF-8"},method:"post"})}function x(t){return Object(a.a)({url:"bzy-csg-settlement/transaction/receipt",data:t,headers:{"Content-Type":"text/plain;charset=UTF-8"},method:"post"})}},MO4u:function(t,e,n){"use strict";var a={name:"FetchSuggestions",props:{hotelList:{type:Array,required:!0},searchTitle:{type:String,required:!0}},data:function(){return{code:"",searchCode:""}},methods:{blurSearch:function(){var t=this;if(this.code){var e=this.hotelList.find(function(e){return e.name===t.code||e.code===t.code});this.searchCode=e?e.code:this.code,this.$emit("getFetchCode",this.searchCode)}else this.$emit("getFetchCode",this.code)},handleSelect:function(t){this.searchCode=t.code,this.$emit("getFetchCode",this.searchCode)},querySearch:function(t,e){var n=this.hotelList;e(t?n.filter(this.createFilter(t)):n)},createFilter:function(t){return function(e){return e.name.indexOf(t)>-1}}}},l=(n("aT9M"),n("KHd+")),s=Object(l.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-list-item"},[t.searchTitle?n("span",{staticStyle:{display:"inline-block",flex:"0 0 70px","margin-right":"10px","text-align":"right"}},[t._v(t._s(t.searchTitle))]):t._e(),t._v(" "),n("el-autocomplete",{staticStyle:{width:"168px",flex:"0 1 atuo"},attrs:{"fetch-suggestions":t.querySearch,clearable:"","value-key":"name",placeholder:"酒店名称/编号"},on:{select:t.handleSelect,blur:t.blurSearch,clear:t.blurSearch},nativeOn:{change:function(e){return t.blurSearch(e)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)},[],!1,null,"cff8e71e",null);s.options.__file="index.vue";e.a=s.exports},aT9M:function(t,e,n){"use strict";var a=n("5OVc");n.n(a).a},dapV:function(t,e,n){"use strict";var a=n("wAM0");n.n(a).a},vXWY:function(t,e,n){"use strict";n.r(e);var a=n("6aKk"),l=n("Q2AE"),s={name:"ShopAssignRecord",components:{FetchSuggestions:n("MO4u").a},data:function(){return{loading:!1,newForm:{},hotelCodeOrName:"",hotelList:[],accountDate:"",batchNo:"",code:"",statusList:[{label:"待发送",value:"NEED_SEND"},{label:"发送中",value:"SENDING"},{label:"已发送",value:"SEND_COMPLETED"},{label:"发送失败",value:"SEND_FAILURE"}],aceiptStatus:"",assigns:[],action:"",limit:1,currentPage:1,size:20,totalPages:1,total:0}},created:function(){var t=new Date;t.getDay,this.batchNo=this.accountDate=t.getFullYear()+""+(t.getMonth()>9?t.getMonth():"0"+t.getMonth()),this._emailSendLog(),this._getRemoteData()},methods:{search:function(){this.currentPage=1,this._emailSendLog()},getFetchCode:function(t){this.hotelCodeOrName=t},_emailSendLog:function(){var t=this,e={hotelCodeOrName:this.hotelCodeOrName,batchNo:this.accountDate,sendStatus:this.aceiptStatus,page:this.currentPage,size:this.size};this.loading=!0,Object(a.h)(e).then(function(e){t.loading=!1,t.assigns=e.data.list,t.totalPages=e.data.pages,t.total=e.data.total})},_getRemoteData:function(){var t=this;l.a.dispatch("getHotelList").then(function(e){t.hotelList=e})},_toOperating:function(t){window.open(t.url)},getSednEmailStatus:function(t){var e="";return this.statusList.forEach(function(n,a){n.value===t&&(e=n.label)}),e},handleSizeChange:function(t){this.size=t,this._emailSendLog()},handleCurrentChange:function(t){this.currentPage=t,this._emailSendLog()}}},i=(n("dapV"),n("KHd+")),o=Object(i.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hotel layout",attrs:{id:"manager"}},[n("div",{staticClass:"tab-head"},[n("div",{staticClass:"tab-head-list"},[n("div",{staticClass:"el-row"},[n("div",{staticClass:"el-col el-col-22"},[n("div",{staticClass:"el-col"},[n("div",{staticClass:"tab-list-item"},[n("fetchSuggestions",{staticStyle:{width:"250px"},attrs:{"hotel-list":t.hotelList,"search-title":"结算方名称"},on:{getFetchCode:t.getFetchCode}}),t._v(" "),n("span",{staticClass:"left_label"},[t._v("所属账期")]),t._v(" "),n("el-date-picker",{staticStyle:{width:"160px",float:"right","margin-left":"20px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy年MM月","value-format":"yyyyMM"},model:{value:t.accountDate,callback:function(e){t.accountDate=e},expression:"accountDate"}}),t._v(" "),n("span",{staticClass:"left_label"},[t._v("状态")]),t._v(" "),n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.aceiptStatus,callback:function(e){t.aceiptStatus=e},expression:"aceiptStatus"}},t._l(t.statusList,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),n("span",{staticClass:"left_label"}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])])])])]),t._v(" "),n("div",{staticClass:"table-content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.assigns,"max-height":"500","empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"payBillNo",label:"收款编号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"hotelName",label:"结算方名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.hotelCode)+" "+t._s(e.row.hotelName))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"signCompay",label:"签约主体"}}),t._v(" "),n("el-table-column",{attrs:{prop:"batchNo",label:"所属账期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.batchNo))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"sendStatus",label:"发送状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getSednEmailStatus(e.row.sendStatus)))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"receiverEmail",label:"收件邮箱"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.receiverEmail,function(e){var a=e.v,l=e.index;return n("p",{key:l},[t._v(t._s(a))])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"发送时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sendTime))]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?n("el-button",{staticClass:"btn-form-sub",attrs:{type:"text"},on:{click:function(n){t._toOperating(e.row)}}},[t._v("查看")]):n("el-button",{staticClass:"btn-form-sub",attrs:{type:"text"}},[t._v("查看")])]}}])})],1)],1),t._v(" "),n("div",{staticClass:"sum"},[t._v("共"+t._s(t.total)+"条记录")]),t._v(" "),n("div",{staticClass:"pagination-content"},[n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,40,80,100],"page-size":t.size,"page-count":t.totalPages,layout:" sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},[],!1,null,"0c63205c",null);o.options.__file="sendRecords.vue";e.default=o.exports},wAM0:function(t,e,n){}}]);