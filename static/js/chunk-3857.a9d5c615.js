(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3857"],{"5OVc":function(t,e,a){},"6aKk":function(t,e,a){"use strict";a.d(e,"p",function(){return s}),a.d(e,"r",function(){return l}),a.d(e,"q",function(){return i}),a.d(e,"o",function(){return o}),a.d(e,"n",function(){return r}),a.d(e,"v",function(){return c}),a.d(e,"a",function(){return u}),a.d(e,"k",function(){return d}),a.d(e,"h",function(){return h}),a.d(e,"l",function(){return m}),a.d(e,"m",function(){return p}),a.d(e,"b",function(){return b}),a.d(e,"d",function(){return f}),a.d(e,"c",function(){return g}),a.d(e,"e",function(){return v}),a.d(e,"j",function(){return y}),a.d(e,"g",function(){return _}),a.d(e,"f",function(){return C}),a.d(e,"s",function(){return A}),a.d(e,"i",function(){return x}),a.d(e,"t",function(){return S}),a.d(e,"u",function(){return j});var n=a("CcjM");function s(t){return Object(n.a)({url:"bzy-csg-settlement/settlementModel/pageList",method:"post",data:t})}function l(t){return Object(n.a)({url:"bzy-csg-settlement/settlementSubject/rule/pageList",method:"post",data:t})}function i(t){return Object(n.a)({url:"bzy-csg-settlement/settlementSubject/rule/detail/"+t,method:"get"})}function o(t){return Object(n.a)({url:"bzy-csg-settlement/bill/list",method:"post",data:t})}function r(t){return Object(n.a)({url:"bzy-csg-settlement/bill/queryBillDetail/"+t,method:"get"})}function c(t){return Object(n.a)({url:"bzy-csg-settlement/dataSync/serviceFeeExcel",method:"post",data:t})}function u(t){return Object(n.a)({url:"bzy-csg-settlement/settlementSubject/mini/achievement",method:"post",data:t})}function d(t){return Object(n.a)({url:"bzy-csg-settlement/billInfoAdjust/listByMultiselect",method:"post",data:t})}function h(t){return Object(n.a)({url:"bzy-csg-settlement/email/sendLog",method:"post",data:t})}function m(t){return Object(n.a)({url:"bzy-csg-settlement/paybill/pageList",method:"post",data:t})}function p(t){return Object(n.a)({url:"bzy-csg-settlement/email",method:"post",data:t})}function b(t){return Object(n.a)({url:"bzy-csg-settlement/billInfoAdjust/addBillInfoAdjust",method:"post",data:t})}function f(t){return Object(n.a)({url:"bzy-csg-settlement/billExtendConf?"+t,method:"get"})}function g(t){return Object(n.a)({url:"bzy-csg-settlement/billExtendConf",method:"post",data:t})}function v(t,e){return Object(n.a)({url:"bzy-csg-settlement/billExtendConf/"+t,data:e,method:"put",headers:{"Content-Type":"text/plain;charset=UTF-8"}})}function y(t){return Object(n.a)({url:"bzy-csg-settlement/dataSync/billExtend",method:"post",data:t})}function _(t){return Object(n.a)({url:"bzy-csg-settlement/billExtend/hierarchy",params:t,method:"get"})}function C(t){return Object(n.a)({url:"bzy-csg-settlement/billExtend/hotel",params:t,method:"get"})}function A(t){return Object(n.a)({url:"bzy-csg-settlement/settlementModel/list",data:t,method:"post"})}function x(t){return Object(n.a)({url:"bzy-csg-settlement/billInfoAdjust/importBillAdjustExcel",data:t,method:"post"})}function S(t){return Object(n.a)({url:"bzy-csg-settlement/transaction/payment",data:t,headers:{"Content-Type":"text/plain;charset=UTF-8"},method:"post"})}function j(t){return Object(n.a)({url:"bzy-csg-settlement/transaction/receipt",data:t,headers:{"Content-Type":"text/plain;charset=UTF-8"},method:"post"})}},MO4u:function(t,e,a){"use strict";var n={name:"FetchSuggestions",props:{hotelList:{type:Array,required:!0},searchTitle:{type:String,required:!0}},data:function(){return{code:"",searchCode:""}},methods:{blurSearch:function(){var t=this;if(this.code){var e=this.hotelList.find(function(e){return e.name===t.code||e.code===t.code});this.searchCode=e?e.code:this.code,this.$emit("getFetchCode",this.searchCode)}else this.$emit("getFetchCode",this.code)},handleSelect:function(t){this.searchCode=t.code,this.$emit("getFetchCode",this.searchCode)},querySearch:function(t,e){var a=this.hotelList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return e.name.indexOf(t)>-1}}}},s=(a("aT9M"),a("KHd+")),l=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-list-item"},[t.searchTitle?a("span",{staticStyle:{display:"inline-block",flex:"0 0 70px","margin-right":"10px","text-align":"right"}},[t._v(t._s(t.searchTitle))]):t._e(),t._v(" "),a("el-autocomplete",{staticStyle:{width:"168px",flex:"0 1 atuo"},attrs:{"fetch-suggestions":t.querySearch,clearable:"","value-key":"name",placeholder:"酒店名称/编号"},on:{select:t.handleSelect,blur:t.blurSearch,clear:t.blurSearch},nativeOn:{change:function(e){return t.blurSearch(e)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)},[],!1,null,"cff8e71e",null);l.options.__file="index.vue";e.a=l.exports},Moy6:function(t,e,a){"use strict";a.r(e);var n=a("6aKk"),s=a("kkBN"),l=a("t2Y8"),i=a("MO4u"),o=a("Q2AE"),r={name:"AdjustFeeImport",components:{FetchSuggestions:i.a},mixins:[l.a],data:function(){return{PATH:"settle-accounts/adjustFee-import",formLabelWidth:"100px",formInputWidth:"100px",dialogFormVisible:!1,imagePath:a("OMKw"),oosUrl:"",activeNames:0,loading:!1,hotelCodeOrName:"",hotelList:[],batchNoSearch:"",batchNo:"",code:"",assigns:[],hint:"提示：请下载最新的模板上传数据",useStatusList:[{label:"全部",value:3},{label:"启用",value:1},{label:"禁用",value:0}],adjustSubitem:"",formData:{projectType:"4"},headers:{Authorization:"bearer"+Object(s.a)()},dataTypeList:[{value:"OTHER_RETURN",label:"其他及返还"},{value:"HOTEL_MANAGER_FEE",label:"人员派驻费用"},{value:"OTHER_COLLECTION_AND_PAYMENT_SETTLEMENT",label:"其他代收代付款项结算"}],importDataType:"",useStatus:3,action:"",limit:1,currentPage:1,size:20,totalPages:1,total:0}},created:function(){this.action="https://bzy-fs.hhotel.com/bzy-file-server/uploadfile";var t=new Date,e=t.getMonth()+2;t.getDate()>4?this.batchNo=t.getFullYear()+""+(e>9?e:"0"+e):this.batchNo=t.getFullYear()+""+(e-1>9?e-1:"0"+(e-1));var a=t.getMonth();t.getDate()>4?this.batchNoSearch=t.getFullYear()+""+(a>9?a:"0"+a):this.batchNoSearch=t.getFullYear()+""+(a-1>9?a-1:"0"+(a-1)),this._billExtendHotel(),this._getRemoteData()},methods:{search:function(){this.currentPage=1,this._billExtendHotel()},getFetchCode:function(t){this.hotelCodeOrName=t},_getRemoteData:function(){var t=this;o.a.dispatch("getHotelList").then(function(e){t.hotelList=e})},_billExtendHotel:function(){var t=this,e={hotelCodeOrName:this.hotelCodeOrName,batchNo:this.batchNoSearch,page:this.currentPage,size:this.size};this.loading=!0,Object(n.f)(e).then(function(e){t.loading=!1,t.assigns=e.data.list,t.totalPages=e.data.pages,t.total=e.data.total})},inputFileDialog:function(){this.dialogFormVisible=!0},submitUpload:function(){var t=this,e={batchNo:this.batchNo,oosUrl:this.oosUrl,type:this.importDataType};this.batchNo?this.importDataType?this.oosUrl?Object(n.j)(e).then(function(e){t.$message({type:"success",message:e.message}),t.$refs.upload.clearFiles(),t.dialogFormVisible=!1,t._billExtendHotel()}):this.$message.error("请提交文件"):this.$message.error("请选择导入科目"):this.$message.error("请选择账期")},handleExcelSuccess:function(t,e){this.oosUrl=t.data[0].filePath},uploadError:function(t){this.$message({type:"error",message:JSON.parse(t.message).message})},downloadFile:function(){if(this.importDataType){var t="http://bzy.hhotel.com/bzy-csg-settlement/file/billExtendConf/template?type="+this.importDataType;window.open(encodeURI(t),"_blank")}else this.$message.error("请选择导入科目")},handleSizeChange:function(t){this.size=t,this._billExtendHotel()},handleCurrentChange:function(t){this.currentPage=t,this._billExtendHotel()}}},c=(a("p93c"),a("KHd+")),u=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotel layout",attrs:{id:"manager"}},[a("div",{staticClass:"tab-head"},[a("div",{staticClass:"tab-head-list"},[a("div",{staticClass:"el-row"},[a("div",{staticClass:"el-col el-col-22"},[a("div",{staticClass:"el-col"},[a("div",{staticClass:"tab-list-item"},[a("fetchSuggestions",{staticStyle:{width:"250px"},attrs:{"hotel-list":t.hotelList,"search-title":"结算方名称"},on:{getFetchCode:t.getFetchCode}}),t._v(" "),a("span",{staticClass:"left_label"},[t._v("所属账期")]),t._v(" "),a("el-date-picker",{staticStyle:{width:"160px",float:"right","margin-left":"20px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy年MM月","value-format":"yyyyMM"},model:{value:t.batchNoSearch,callback:function(e){t.batchNoSearch=e},expression:"batchNoSearch"}}),t._v(" "),a("span",{staticClass:"left_label"}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])])])])]),t._v(" "),t.buttonFilter("settle-accounts",t.btnArr)?a("div",{staticClass:"el-row"},[a("span",{staticClass:"float-right",on:{click:t.inputFileDialog}},[a("i",{staticClass:"addIcon"},[t._v("+")]),t._v(" "),a("span",{attrs:{type:"primary"}},[t._v("导入")])])]):t._e(),t._v(" "),a("div",{staticClass:"table-content"},[a("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",staticStyle:{padding:"20px"},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.assigns,function(e){return a("el-collapse-item",{key:e.code},[a("template",{attrs:{name:e.name},slot:"title"},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:9}},[a("span",{staticClass:"shu_icon"}),t._v("\n              酒店名称："+t._s(e.hotelCode)+t._s(e.hotelName)+"\n            ")]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("所属账期："+t._s(e.batchNo))]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("更新时间："+t._s(e.createTime.slice(0,10)))]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("操作人："+t._s(e.operator))])],1)],1),t._v(" "),[t._l(e.hotelManagerFee,function(e){return a("el-row",{key:e.index,staticClass:"card-content-row"},[a("el-col",{attrs:{span:6}},[t._v("人员派驻费用")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v(t._s(e.name)+"："+t._s(e.value))]),t._v(" "),a("el-col",{attrs:{span:12}},[t._v("说明："+t._s(e.remark))])],1)}),t._v(" "),t._l(e.otherCollectionAndPaymentSettlement,function(e){return a("el-row",{key:e.index,staticClass:"card-content-row"},[a("el-col",{attrs:{span:6}},[t._v("其他代收代付款项结算")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v(t._s(e.name)+"："+t._s(e.value))]),t._v(" "),a("el-col",{attrs:{span:12}},[t._v("说明："+t._s(e.remark))])],1)}),t._v(" "),t._l(e.otherReturn,function(e){return a("el-row",{key:e.index,staticClass:"card-content-row"},[a("el-col",{attrs:{span:6}},[t._v("其他及返还")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v(t._s(e.name)+"："+t._s(e.value))]),t._v(" "),a("el-col",{attrs:{span:12}},[t._v("说明："+t._s(e.remark))])],1)})]],2)}))],1),t._v(" "),a("div",{staticClass:"sum"},[t._v("共"+t._s(t.total)+"条记录")]),t._v(" "),a("div",{staticClass:"pagination-content"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,40,80,100],"page-size":t.size,"page-count":t.totalPages,layout:" sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-dialog",{staticClass:"publicDialog",attrs:{visible:t.dialogFormVisible,"show-close":!1,width:"40.6%",title:"导入数据"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"所属账期",required:""}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy年MM月","value-format":"yyyyMM"},model:{value:t.batchNo,callback:function(e){t.batchNo=e},expression:"batchNo"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"导入科目",required:""}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",required:""},model:{value:t.importDataType,callback:function(e){t.importDataType=e},expression:"importDataType"}},t._l(t.dataTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"选择文件"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-error":t.uploadError,headers:t.headers,"on-success":t.handleExcelSuccess,"auto-upload":!0,action:t.action,data:t.formData,limit:t.limit,name:"files"}},[a("div",{staticClass:"viewFile"},[a("img",{attrs:{src:t.imagePath,alt:"浏览"}}),t._v(" "),a("p",{staticStyle:{padding:"0",margin:"0"}},[t._v("浏览")])])])],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"下载模板"}},[a("a",{staticStyle:{display:"inline-block",width:"98px",height:"32px","line-height":"32px",background:"rgba(0,96,114,0.1)","border-radius":"4px",color:"#006072","text-align":"center"},attrs:{target:"_blank"},on:{click:t.downloadFile}},[t._v("下载模板")])]),t._v(" "),a("div",{staticClass:"hint"},[t._v(t._s(t.hint))])],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-dialog-sub",on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"btn-dialog-primary",attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("提 交")])],1)],1)],1)},[],!1,null,"32bb6622",null);u.options.__file="adjustFeeImport.vue";e.default=u.exports},OMKw:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACdklEQVRYR+2Yv4sTQRTHv29AovgDrPQqGzltYpHMbCT2WongISLaWHnN/QFq7/0BNtpYidp4KNddn9PszEIwjT+uVyvh7kAjm3ky4sJmL5usyW4IYVNm58dn3ve9N28eYc5/lORrt9vLQoh1IroM4FjB/PvMvEVED6WUH4ftNQDY6XSWwzB8D+BkwWDJ5X/0+/2LjUbjc/LDAKDW+jURXQfw1lq76nnetyJBfd8/LYR4AuAaM28opVZGAhpj9pys1tqlouEikG63e6rX6zlD7Espj48DZDdASnnAN4u0pDEmdd8BkFEDS8AU5RbDglrrFhE185CZmbeVUpfia03tg0EQtJh5fgHzsNyoNaa2YAm48HmwjOKFl7iM4lLiKX2gvEmmNCBcMWKtRbLKcevORT046oCZALPcJMPqvETNtwRgDcANAGcA9Jl5h4g2ATyWUn4d+y5Oc9Ys9eAoQK31ChE9A3AixVq7RHS3Xq9vzPxVFwTBTWZ+AUCM8VXLzLeVUq/i4zJJPGkQGGOcrK6lMWA5a+3fkl8I0UqsvQvgfFzuogEfAbifPGD07o5cKvF9XUr5IPqvaMAvAM7+J2BXSnlhVoC/ARxymzlZPc/bHuYuvu83Y3L/klIemRXgTwCH//lbs1arvZsWMNfmkTHmA4BqbhLH2m9vKpXKarVa/T5pBLt5xph8gySvBmaUtF2aYeZPRDTQVhNCNMMwpGSaYeY9IjqXmmbcqWMt4CsAjk5iwfitorW+RUTPMybqO0qpl6mJehKYLHMcJICnSUtGc53lANxLwh2oZrJsNukYJ7cQYs1aezWWG3eEEJvW2mzFwqSbFznvDwSr4Th1V6xnAAAAAElFTkSuQmCC"},"YI+N":function(t,e,a){},aT9M:function(t,e,a){"use strict";var n=a("5OVc");a.n(n).a},p93c:function(t,e,a){"use strict";var n=a("YI+N");a.n(n).a},t2Y8:function(t,e,a){"use strict";var n=a("QbLZ"),s=a.n(n),l=a("L2JU");function i(t,e){return e.includes(t)}e.a={computed:s()({},Object(l.b)(["name","btnPermissionRoles"])),created:function(){this._initBtnPermission()},methods:{_initBtnPermission:function(){var t=function(t,e){var a=[];if(t.length)return t.map(function(t){var n=t.split(":")[0],s=t.split(":")[1];n===e&&a.push(s)}),a}(this.btnPermissionRoles,this.PATH);this.btnArr=t,this.buttonFilter=i}}}}}]);