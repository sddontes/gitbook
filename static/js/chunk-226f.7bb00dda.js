(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-226f"],{"3FZQ":function(t,e,a){},RFNt:function(t,e,a){"use strict";e.a={data:function(){return{warZoneList:[],list:[{label:"全部",value:0},{label:"一战区",value:1},{label:"二战区",value:2},{label:"三战区",value:3},{label:"四战区",value:4},{label:"五战区",value:5},{label:"六战区",value:6},{label:"七战区",value:7},{label:"八战区",value:8}]}},created:function(){this.getWarZoneList()},computed:{identity:function(){var t=[],e=null;return this.$store.state.user.info.roles.map(function(e){t.push(e.alias)}),-1!==t.indexOf("chaojiguanliyuan")&&(e=1),-1!==t.indexOf("zongcaiban")&&(e=1),-1!==t.indexOf("shangyefenxizu")&&(e=1),-1!==t.indexOf("zongbushujuyunying")&&(e=1),-1!==t.indexOf("yewu")&&(e=1),-1!==t.indexOf("yewufazhanbu")&&(e=1),-1!==t.indexOf("zongbuyunyingguanli")&&(e=1),-1!==t.indexOf("RGM")&&(e=2),e}},methods:{getWarZoneList:function(t){var e=this,a=[];return t&&0!==t.length&&t.map(function(t){e.list.map(function(e){t===e.value&&a.push(e)})}),a.unshift({label:"全部",value:0}),this.warZoneList=a,a},getSummaries:function(t){var e=t.columns,a=t.data,r=[];return e.forEach(function(t,e){if(0!==e){var n=a.map(function(e){return Number(e[t.property])});n.every(function(t){return isNaN(t)})||(r[e]=n.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),-1!==t.label.indexOf("完成率")||-1!==t.label.indexOf("时间进度")?r[e]="--":-1!==t.label.indexOf("环比")?r[e]="--":r[e]=Math.floor(100*r[e])/100)}else r[e]="总计"}),r},getStyle:function(t){if(t<0)return"error-text"},rowStyle:function(t){if("总计"===t.row.cityName)return"color:#006072;"},formatter:function(t){}}}},TBy1:function(t,e,a){"use strict";var r=a("3FZQ");a.n(r).a},pfto:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return o});var r=a("4d7F"),n=a.n(r);function i(t){var e=new Date(t);return e.getFullYear()+"-"+(1===(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(1===e.getDate().toString().length?"0"+e.getDate():e.getDate())}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new n.a(function(a,r){var n=new Date;n.setDate(n.getDate()-t);var l=new Date;l.setDate(l.getDate()-e);var o=[n=i(n),l=i(l)];o[1]&&a(o)})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Date,a=e.getFullYear(),r=e.getMonth()+1-t;return a+"-"+(r=r<10?"0"+r:r)}},uu9C:function(t,e,a){"use strict";a.r(e);var r=a("pfto"),n=a("RFNt"),i=a("v1zl"),l=Object(r.a)(new Date).slice(0,-3),o={mixins:[n.a],data:function(){return{activeNames:0,typeVal:"1",selMonth:l,formInputWidth:"168px",warZoneList:[{label:"全部",value:0}],warZone:[0],tableData:[],getData:[],areaRank:null}},created:function(){this.search()},methods:{selRadio:function(t){this.getData=[],this.search()},filterSelect:function(t){this[t].includes(0)&&(this[t]=[0])},toCityDetail:function(t,e,a){var r=this.$router.resolve({name:"areaDevelopmentDetail",query:{bigAreaId:t,num:e,selMonth:a,type:this.typeVal}});window.open(r.href,"_blank")},search:function(){var t=this;if(this.selMonth){this.getData=[];var e={bigAreaIds:this.warZone.includes(0)?[]:this.warZone,queryTime:this.selMonth+"-01"},a="";1===this.identity&&(a="1"===this.typeVal?i.n:i.j),2===this.identity&&(e.monthWeekRank="",e.isBigAreaManager=this.identity,a="1"===this.typeVal?i.g:i.i),a(e).then(function(e){t.getWarZoneList(e.data.bigAreaIds);var a=e.data.vos;t.areaRank=e.data.areaRank,t.getData=a.map(function(t){return{num:t.monthWeekRank,arr:t.vos}}),t.getData.reverse()})}else this.$message.error("请选择月份")}}},s=(a("TBy1"),a("KHd+")),u=Object(s.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"zone"}},[a("div",{staticClass:"layout"},[a("div",{staticClass:"tab-head"},[a("div",{staticClass:"budget_sty tab-head-list bor_sty",staticStyle:{"margin-bottom":"16px","padding-bottom":"16px","border-bottom":"1px dotted #E9E9E9"}},[a("el-radio-group",{on:{change:t.selRadio},model:{value:t.typeVal,callback:function(e){t.typeVal=e},expression:"typeVal"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("进入城市数")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("人员落地数")])],1)],1),t._v(" "),a("div",{staticClass:"tab-head-list"},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("战区")]),t._v(" "),a("el-select",{style:{width:t.formInputWidth},attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:function(e){t.filterSelect("warZone")}},model:{value:t.warZone,callback:function(e){t.warZone=e},expression:"warZone"}},t._l(t.warZoneList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("月份")]),t._v(" "),a("el-date-picker",{style:{width:t.formInputWidth},attrs:{clearable:!1,editable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择月"},model:{value:t.selMonth,callback:function(e){t.selMonth=e},expression:"selMonth"}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"tab-list-item"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1)],1)]),t._v(" "),2===t.identity&&t.areaRank?a("div",{staticClass:"btn-right"},[a("span",{attrs:{icon:"el-icon-plus"}},[a("i",{staticClass:"iconfont iconpaihangbang",staticStyle:{color:"rgb(103, 201, 180)"}}),t._v("\n        战区排名第"+t._s(t.areaRank)+"\n      ")])]):t._e(),t._v(" "),a("div",{staticClass:"container"},[0===t.getData.length?a("div",{staticClass:"emptyData"},[t._v("暂无数据")]):t._e(),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[t._l(t.getData,function(e,r){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.typeVal,expression:"typeVal==='1'"}],key:e.key,attrs:{name:r}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月第"+t._s(e.num)+"周（ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{"show-summary":1!==t.identity,"summary-method":t.getSummaries,data:e.arr,"row-style":t.rowStyle}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(r.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(r.row.bigAreaName))])]}}])}):a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekCitys",label:"进入城市数","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekCitys",label:"上周进入城市数","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekCitys",label:"上上周进入城市数","min-width":"160"}}),t._v(" "),1===t.identity?a("el-table-column",{attrs:{sortable:"",prop:"currentWeekIncrementCitys",label:"增长数","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:t.getStyle(e.row.currentWeekIncrementCitys)},[t._v(t._s(e.row.currentWeekIncrementCitys))])]}}])}):t._e(),t._v(" "),1===t.identity?a("el-table-column",{attrs:{sortable:"",prop:"circumferentialRatio",label:"周环比","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(parseFloat(100*e.row.circumferentialRatio).toFixed(2))+"%")]}}])}):t._e()],1)]],2)}),t._v(" "),t._l(t.getData,function(e,r){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"2"===t.typeVal,expression:"typeVal==='2'"}],key:e.key,attrs:{name:r}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月第"+t._s(e.num)+"周（ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{"show-summary":1!==t.identity,"summary-method":t.getSummaries,data:e.arr,"row-style":t.rowStyle}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(r.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(r.row.bigAreaName))])]}}])}):a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekCitys",label:"人员落地数","min-width":"190"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekCitys",label:"上周人员落地数","min-width":"190"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekCitys",label:"上上周人员落地数","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekIncrementCitys",label:"增长数","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:t.getStyle(e.row.currentWeekIncrementCitys)},[t._v(t._s(e.row.currentWeekIncrementCitys))])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"circumferentialRatio",label:"周环比","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(parseFloat(100*e.row.circumferentialRatio).toFixed(2))+"%")]}}])})],1)]],2)})],2)],1)])])},[],!1,null,"19a7e1b4",null);u.options.__file="index.vue";e.default=u.exports},v1zl:function(t,e,a){"use strict";a.d(e,"n",function(){return n}),a.d(e,"g",function(){return i}),a.d(e,"j",function(){return l}),a.d(e,"i",function(){return o}),a.d(e,"m",function(){return s}),a.d(e,"l",function(){return u}),a.d(e,"b",function(){return c}),a.d(e,"a",function(){return d}),a.d(e,"d",function(){return p}),a.d(e,"f",function(){return m}),a.d(e,"k",function(){return h}),a.d(e,"h",function(){return b}),a.d(e,"c",function(){return f}),a.d(e,"e",function(){return y}),a.d(e,"o",function(){return v});var r=a("CcjM");function n(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/theater",method:"get",params:t})}function i(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/city",method:"get",params:t})}function l(t){return Object(r.a)({url:"bzy-reports/personFallCity/queryBigAreaReport",method:"post",data:t})}function o(t){return Object(r.a)({url:"bzy-reports/personFallCity/queryCityReport",method:"post",data:t})}function s(t){return Object(r.a)({url:"bzy-reports/theaterReport/sign/theater",method:"get",params:t})}function u(t){return Object(r.a)({url:"bzy-reports/theaterReport/sign/city",method:"get",params:t})}function c(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/hotel",method:"get",params:t})}function d(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/cityDetail",method:"get",params:t})}function p(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averGmv/theater",method:"get",params:t})}function m(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averGmv/city",method:"get",params:t})}function h(t){return Object(r.a)({url:"bzy-reports/theaterReport/revenue/theater",method:"get",params:t})}function b(t){return Object(r.a)({url:"bzy-reports/theaterReport/revenue/city",method:"get",params:t})}function f(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averAdr/theater",method:"get",params:t})}function y(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averAdr/city",method:"get",params:t})}function v(t){return Object(r.a)({url:"bzy-reports/theaterReport/dataExplain",method:"get",params:t})}}}]);