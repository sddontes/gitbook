(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5c80"],{"2gup":function(t,e,a){},"360E":function(t,e,a){"use strict";a("EJiy");var i=a("P2sY"),n=a.n(i),r=a("rfXi"),o=a.n(r),s=a("jWXv"),l=a.n(s),c=a("14Xm"),u=a.n(c),d=a("sk9p"),f=a.n(d),p=a("D3Ub"),h=a.n(p),v={name:"FormView",props:{dataSetting:{type:Object,required:!0,default:function(){return{title:"",list:[]}}},dataIsbtngroup:{type:Boolean,default:function(){return!1}},dataIsrequired:{type:Boolean,default:function(){return!1}},dataOperationtype:{type:Number,default:function(){return 1}},dataBankindex:{type:Number,default:function(){return null}}},data:function(){return{select:"",title:this.dataSetting.title,form:{},rules:this.createRules(),formList:this.dataSetting.list,isBtnGroup:this.dataIsbtngroup,loadingFlag:!1,propsSingle:{value:"code",label:"name",expandTrigger:"hover"},city:[],bankInfo:this.dataBankindex}},computed:{formListFilter:function(){if(this.formList){return this.formList.filter(function(t){return t.label})}}},watch:{dataSetting:function(t){t&&(this.title=t.title,this.form=this.formObj(),this.rules=this.createRules(),this.formList=this.dataSetting.list)},dataIsbtngroup:function(t){this.isBtnGroup=t},dataIsrequired:function(t){t&&this.validateForm()},bankInfo:function(t){var e=this;null!==t&&this.formList.forEach(function(a){"selectInput"===a.type&&2!==e.dataOperationtype&&(e.form.bankCode=a.options[t].code,e.form.bankName=a.options[t].value)})},dataBankindex:function(t){this.bankInfo=t}},created:function(){this.form=this.formObj()},mounted:function(){var t=this;this.$nextTick(function(){t.iptChange()})},methods:{formObj:function(){var t=this;if(this.dataSetting.list){var e={};return this.dataSetting.list.forEach(function(a){e[a.key]=a.value,"coverAreaList"===a.key&&3===t.dataOperationtype&&t.selAreaFun(a)}),3!==this.dataOperationtype&&2!==this.dataOperationtype||void 0!==e.region&&this.cityChange(e),e}},createRules:function(){var t=this;if(2===this.dataOperationtype)return{};if(this.dataSetting.list){var e={};return this.dataSetting.list.forEach(function(a){if(a.isRequired)switch(e[a.key]=[],a.validate){case"mobile":e[a.key].push({required:!0,validator:t.validatePhone(),trigger:"blur"});break;case"email":e[a.key].push({required:!0,validator:t.checkEmail(),trigger:"blur"});break;case"select":e[a.key].push({required:!0,message:a.placeholder,trigger:"change"});break;case"greaterZero":e[a.key].push({required:!0,validator:t.greaterZero(),trigger:"change"});break;default:e[a.key].push({required:!0,message:a.placeholder,trigger:"blur"})}}),e}},validatePhone:function(){return function(t,e,a){if(!e)return a(new Error("请输入手机号/电话"));/^1[3|4|5|6|7|8|9]\d{9}$/.test(e)||/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(e)?a():a(new Error("请输入正确的手机号/电话"))}},checkEmail:function(){return function(t,e,a){if(!e)return a(new Error("请输入邮箱"));/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(e)?a():a(new Error("请输入正确的邮箱格式"))}},greaterZero:function(){return function(t,e,a){if(!e&&0!==e)return a(new Error("当前输入框不能为空"));setTimeout(function(){/^[0-9]+$/.test(e)?a():a(new Error("请输入整数并且不能是负数"))},500)}},cityChange:function(t){var e=this;return h()(u.a.mark(function a(){var i,n,r,o,s;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.form=t),i=e.form,a.next=4,e.getNameByCode(i.region);case 4:n=a.sent,r=f()(n,2),o=r[0],s=r[1],i.proviceCode=i.region[0],i.cityCode=i.region[1],i.proviceName=o,i.cityName=s;case 12:case"end":return a.stop()}},a,e)}))()},changeBindData:function(t,e){var a=this;return h()(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("city"!==t){i.next=3;break}return i.next=3,a.cityChange();case 3:if("cityMultiple"!==t){i.next=6;break}return i.next=6,a.selAreaFun(e);case 6:a.iptChange();case 7:case"end":return i.stop()}},i,a)}))()},validateForm:function(){var t=this;this.$refs.form.validate(function(e){e?t.$emit("isSubmit",!0):t.$emit("isSubmit",!1)})},save:function(){this.$emit("save",!0)},goBack:function(){this.$router.go(-1)},getNameByCode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],a=JSON.parse(localStorage.getItem("areaList")).find(function(e){return e.code===t[0]}),i=a.children.find(function(e){return e.code===t[1]}),n=i?i.name:"";return e.push(a.name),e.push(n),e},cancel:function(){this.$router.go(-1)},selAreaFun:function(t){var e=new l.a,a=new l.a,i=new l.a;return void 0===this.form[t.key]&&(this.form[t.key]=t.value),this.form[t.key].forEach(function(t){e.add(t[0]),a.add(t[1]),t.length>2&&i.add(t[2])}),this.repetitionFilter(t.options,o()(e),o()(a))},repetitionFilter:function(t,e,a){var i=n()([],e),r=n()([],a);i.forEach(function(i){var n=0;t.forEach(function(t){t.code===i&&(n=t.children.length)});var o=0;r.forEach(function(t){t.startsWith(i)&&(o+=1)}),n===o?a=a.filter(function(t){return!t.startsWith(i)}):e=e.filter(function(t){return t!==i})}),this.form.proviceCodeList=e,this.form.cityCodeList=a},iptChange:function(){this.$emit("input",this.form)}}},m=(a("EylR"),a("KHd+")),g=Object(m.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formView",staticStyle:{"border-bottom":"20px solid #f8f9fa"}},[t._t("header"),t._v(" "),"HotelManageView"!==t.$route.name&&2!==t.dataOperationtype?a("el-form",{ref:"form",staticClass:"edit",staticStyle:{"padding-left":"20px","max-width":"630px","padding-right":"20px"},attrs:{rules:t.rules,model:t.form,"label-position":"left","label-width":"173px"}},[a("div",{staticClass:"infoList"},[t._l(t.formListFilter,function(e){return a("el-form-item",{key:e.key,attrs:{label:e.label,prop:e.key}},["input"===e.type||"number"===e.type?a("el-input",{style:{width:e.width?e.width:"100%"},attrs:{type:"input"===e.type?"text":e.type,placeholder:e.placeholder},on:{change:t.changeBindData},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,"string"==typeof a?a.trim():a)},expression:"form[item.key]"}}):t._e(),t._v(" "),"radio"===e.type?a("el-radio-group",{model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:"form[item.key]"}},t._l(e.options,function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})):t._e(),t._v(" "),"region"===e.type?a("el-cascader",{style:{width:e.width?e.width:"100%"},attrs:{options:e.options,props:t.propsSingle,placeholder:e.placeholder,multiline:"",clearable:"",filterable:""},on:{change:function(e){t.changeBindData("city")}},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:"form[item.key]"}}):t._e(),t._v(" "),"cityMultiple"===e.type?a("el-cascader",{style:{width:e.width?e.width:"100%"},attrs:{options:e.options,props:{multiple:!0,value:"code",label:"name",expandTrigger:"hover"},placeholder:"请选择",filterable:"","collapse-tags":"",clearable:""},on:{change:function(a){t.changeBindData("cityMultiple",e)}},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:"form[item.key]"}}):t._e(),t._v(" "),"select"===e.type?a("el-select",{style:{width:e.width?e.width:"100%"},attrs:{placeholder:e.placeholder},on:{change:t.changeBindData},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:"form[item.key]"}},t._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})):t._e(),t._v(" "),"selectInput"===e.type?a("div",[a("el-select",{staticStyle:{width:"46.1%"},attrs:{placeholder:e.placeholder,filterable:"",clearable:""},on:{change:t.changeBindData},model:{value:t.bankInfo,callback:function(e){t.bankInfo=e},expression:"bankInfo"}},t._l(e.options,function(t,e){return a("el-option",{key:t.value,attrs:{label:t.value,value:e}})})),t._v(" "),a("el-input",{staticStyle:{width:"52.53%"},attrs:{disabled:null===t.bankInfo},on:{change:t.changeBindData},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:"form[item.key]"}})],1):t._e()],1)}),t._v(" "),t.isBtnGroup?a("el-form-item",[a("el-button",{attrs:{loading:t.loadingFlag,type:"primary"},on:{click:t.save}},[t._v("保 存")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1):t._e()],2)]):t._e(),t._v(" "),"HotelManageView"!==t.$route.name&&2===t.dataOperationtype?a("el-form",{staticStyle:{"padding-left":"20px"},attrs:{model:t.form,"label-position":"left","label-width":"173px"}},[a("div",{staticClass:"infoList"},t._l(t.formListFilter,function(e){return a("el-form-item",{key:e.key,attrs:{label:e.label,prop:e.key}},[a("span",{staticClass:"viewInfo"},[t._v(t._s(t.form[e.key]))])])}))]):t._e()],2)},[],!1,null,"1af76fca",null);g.options.__file="index.vue";e.a=g.exports},Ac2l:function(t,e,a){},EylR:function(t,e,a){"use strict";var i=a("LyGT");a.n(i).a},GU1d:function(t,e,a){"use strict";var i=a("YijU");a.n(i).a},Hj2Z:function(t,e,a){},Idy5:function(t,e,a){"use strict";var i=a("Ac2l");a.n(i).a},LyGT:function(t,e,a){},Otkd:function(t,e,a){"use strict";var i=a("Hj2Z");a.n(i).a},T6lI:function(t,e,a){"use strict";var i=a("2gup");a.n(i).a},VKFn:function(t,e,a){a("bBy9"),a("FlQf"),t.exports=a("ldVq")},YijU:function(t,e,a){},"k/8l":function(t,e,a){t.exports={default:a("VKFn"),__esModule:!0}},lV9q:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"a",function(){return r});var i=a("CcjM");function n(t){return Object(i.a)({url:"bzy-sk/tour/getUserGroupList",method:"post",data:t})}function r(t){return Object(i.a)({url:"bzy-sk/tour/getSingnHotelInfoList",method:"post",data:t})}},ldVq:function(t,e,a){var i=a("QMMT"),n=a("UWiX")("iterator"),r=a("SBuE");t.exports=a("WEpk").isIterable=function(t){var e=Object(t);return void 0!==e[n]||"@@iterator"in e||r.hasOwnProperty(i(e))}},sk9p:function(t,e,a){"use strict";e.__esModule=!0;var i=r(a("k/8l")),n=r(a("FyfS"));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return function(t,e){var a=[],i=!0,r=!1,o=void 0;try{for(var s,l=(0,n.default)(t);!(i=(s=l.next()).done)&&(a.push(s.value),!e||a.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},u6ZN:function(t,e,a){"use strict";a.r(e);var i=a("P2sY"),n=a.n(i),r=a("lV9q"),o={name:"PatrolShopCard",props:{dataSetting:{type:Object,required:!0,default:function(){return{}}},dataIspitchon:{type:Boolean,required:!0,default:function(){return!1}}},data:function(){return{info:this.dataSetting,isPitchOn:this.dataIspitchon}},watch:{dataSetting:function(t){this.info=t},dataIspitchon:function(t){this.isPitchOn=t}}},s=(a("GU1d"),a("KHd+")),l=Object(s.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"patrolShopCard",class:t.isPitchOn?"active":""},[t._m(0),t._v(" "),a("div",{staticClass:"right"},[a("p",{staticClass:"hotelName"},[t._v(t._s(t.info.hotelName))]),t._v(" "),a("p",{staticClass:"tourTime"},[t._v(t._s(t.info.tourTime))])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("i",{staticClass:"iconfont iconxundian-weixuanzhong"})])}],!1,null,"68a117bc",null);l.options.__file="Card.vue";var c={name:"DetailsList",components:{PatrolshopCard:l.exports},props:{dataUserinfo:{type:Object,required:!0,default:function(){return{}}},dataSetting:{type:Array,required:!0,default:function(){return[]}},dataTotal:{type:Number,default:0}},data:function(){return{pagerCount:5,active:0,userInfo:this.dataUserinfo,dataList:this.dataSetting,total:this.dataTotal}},watch:{dataUserinfo:function(t){this.userInfo=t},dataSetting:function(t){this.dataList=t},dataTotal:function(t){this.total=t}},methods:{viewDetail:function(t){this.active=t,this.$emit("active",t)},handleCurrentChange:function(t){this.viewDetail(0),this.$emit("pageChange",t)}}},u=(a("Otkd"),Object(s.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailsList"},[a("div",{staticClass:"top"},[a("div",{staticClass:"userInfo"},[a("span",[t._v(t._s(t.userInfo.name))]),t._v(" "),a("span",[t._v(t._s(t.userInfo.jobNumber))])]),t._v(" "),a("div",{staticClass:"region"},[t._v(t._s(t.userInfo.provinceName+t.userInfo.cityName))])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"content"},t._l(t.dataList,function(e,i){return a("div",{key:e.id,staticClass:"list-item",on:{click:function(e){t.viewDetail(i)}}},[a("PatrolshopCard",{attrs:{"data-setting":e,"data-ispitchon":t.active===i}})],1)})),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-size":5,"pager-count":t.pagerCount,total:t.total,small:"",layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)])])},[],!1,null,"8fd3ff7c",null));u.options.__file="Left.vue";var d=u.exports,f=a("14Xm"),p=a.n(f),h=a("GQeE"),v=a.n(h),m=a("D3Ub"),g=a.n(m),y={name:"DetailsRight",components:{FormView:a("360E").a},props:{dataSetting:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{dialogVisible:!1,isInit:!1,info:this.dataSetting,patrolDetails:{title:"巡店详情",list:[{label:"签到时间",key:"tourTime",value:""},{label:"签到地址",key:"checkAddress",value:""},{label:"酒店ID/名称",key:"hotelName",value:""},{label:"酒店地址",key:"detailAddress",value:""}]},patrolFeedback:{title:"巡店反馈",list:[{label:"业主沟通",key:"ownerCommunite",value:""},{label:"前台服务",key:"reception",value:""},{label:"内务检查",key:"houseCheck",value:""},{label:"酒店安全",key:"hotelSafe",value:""}]},showTitle:{title:"经纬拍照图片",list:[]}}},watch:{dataSetting:function(t){this.info=t,this.init()}},created:function(){this.init()},methods:{handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},init:function(){var t=this;return g()(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isInit=!1,a=v()(t.dataSetting),e.next=4,a.forEach(function(e){t.patrolDetails.list.forEach(function(a){e===a.key&&(a.value="detailAddress"===e?t.dataSetting.provinceName+t.dataSetting.cityName+t.dataSetting.districName+t.dataSetting.detailAddress:t.dataSetting[e],"hotelName"===a.key&&(a.value=t.dataSetting.hotelCode+" / "+a.value))}),t.patrolFeedback.list.forEach(function(a){e===a.key&&(a.value=t.dataSetting[e])})});case 4:t.isInit=!0;case 5:case"end":return e.stop()}},e,t)}))()}}},b=(a("Idy5"),Object(s.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isInit?a("div",{staticClass:"detailsRight"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("FormView",{staticStyle:{"border-bottom":"1px solid rgb(248, 249, 250)"},attrs:{"data-setting":t.patrolDetails,"data-operationtype":2}},[a("div",{staticClass:"item-warp",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"item-title"},[t._v(t._s(t.patrolDetails.title))])])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16,lg:16,md:24,sm:24,xs:24}},[a("FormView",{staticStyle:{"border-bottom":"0"},attrs:{"data-setting":t.patrolFeedback,"data-operationtype":2}},[a("div",{staticClass:"item-warp",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"item-title"},[t._v(t._s(t.patrolFeedback.title))])])])],1),t._v(" "),a("el-col",{attrs:{span:8,lg:8,md:24,sm:24,xs:24}},[a("div",{staticClass:"item-warp"},[a("div",{staticClass:"item-title"},[t._v(t._s(t.showTitle.title))])]),t._v(" "),a("el-upload",{attrs:{"on-preview":t.handlePictureCardPreview,"file-list":[{uid:111111,url:t.info.imageUrl}],action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{src:t.info.imageUrl,width:"100%"}})])],1):t._e()},[],!1,null,"6fc6eec8",null));b.options.__file="Right.vue";var k={name:"PatrolShopRecordDetails",components:{detailsLeft:d,detailsRight:b.exports},data:function(){return{userInfo:{},active:0,postData:{size:5,page:1},tableData:[],total:0}},computed:{infoData:function(){var t=n()({},this.tableData[this.active]);for(var e in t)t[e]||(t[e]="");return t}},created:function(){this.userInfo=JSON.parse(this.$route.query.info),n()(this.postData,JSON.parse(this.$route.query.postData))},mounted:function(){this._getPatrolShopDetails()},methods:{pageChange:function(t){this.postData.page=t,this._getPatrolShopDetails()},receiveActive:function(t){this.active=t},_getPatrolShopDetails:function(){var t=this;Object(r.a)(this.postData).then(function(e){t.tableData=e.data.list,t.total=e.data.total})}}},_=(a("T6lI"),Object(s.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.tableData.length>0?a("div",{staticClass:"hotel layout",attrs:{id:"patrolShopRecordDetails"}},[a("div",{staticClass:"content"},[a("detailsLeft",{attrs:{"data-setting":t.tableData,"data-userinfo":t.userInfo,"data-total":t.total},on:{active:t.receiveActive,pageChange:t.pageChange}}),t._v(" "),a("detailsRight",{staticClass:"detailsRight",attrs:{"data-setting":t.infoData}})],1)]):t._e()},[],!1,null,"38f3d0a0",null));_.options.__file="details.vue";e.default=_.exports}}]);