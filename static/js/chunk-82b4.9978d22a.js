(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-82b4"],{"4x3K":function(t,e,a){"use strict";var r=a("vPyg");a.n(r).a},RFNt:function(t,e,a){"use strict";e.a={data:function(){return{warZoneList:[],list:[{label:"全部",value:0},{label:"一战区",value:1},{label:"二战区",value:2},{label:"三战区",value:3},{label:"四战区",value:4},{label:"五战区",value:5},{label:"六战区",value:6},{label:"七战区",value:7},{label:"八战区",value:8}]}},created:function(){this.getWarZoneList()},computed:{identity:function(){var t=[],e=null;return this.$store.state.user.info.roles.map(function(e){t.push(e.alias)}),-1!==t.indexOf("chaojiguanliyuan")&&(e=1),-1!==t.indexOf("zongcaiban")&&(e=1),-1!==t.indexOf("shangyefenxizu")&&(e=1),-1!==t.indexOf("zongbushujuyunying")&&(e=1),-1!==t.indexOf("yewu")&&(e=1),-1!==t.indexOf("yewufazhanbu")&&(e=1),-1!==t.indexOf("zongbuyunyingguanli")&&(e=1),-1!==t.indexOf("RGM")&&(e=2),e}},methods:{getWarZoneList:function(t){var e=this,a=[];return t&&0!==t.length&&t.map(function(t){e.list.map(function(e){t===e.value&&a.push(e)})}),a.unshift({label:"全部",value:0}),this.warZoneList=a,a},getSummaries:function(t){var e=t.columns,a=t.data,r=[];return e.forEach(function(t,e){if(0!==e){var n=a.map(function(e){return Number(e[t.property])});n.every(function(t){return isNaN(t)})||(r[e]=n.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),-1!==t.label.indexOf("完成率")||-1!==t.label.indexOf("时间进度")?r[e]="--":-1!==t.label.indexOf("环比")?r[e]="--":r[e]=Math.floor(100*r[e])/100)}else r[e]="总计"}),r},getStyle:function(t){if(t<0)return"error-text"},rowStyle:function(t){if("总计"===t.row.cityName)return"color:#006072;"},formatter:function(t){}}}},hWGj:function(t,e,a){"use strict";a.r(e);var r=a("pfto"),n=a("RFNt"),s=a("v1zl"),l=Object(r.a)(new Date).slice(0,-3),i={mixins:[n.a],data:function(){return{areaRank:null,activeNames:0,typeVal:"1",selMonth:l,formInputWidth:"168px",warZoneList:[{label:"全部",value:0}],warZone:[0],tableData:[],getData:[],getWarZone:[]}},created:function(){this.search()},methods:{saveDataExplain:function(t,e,a){var r=this,n={bigAreaIds:this.warZone.includes(0)?this.getWarZone:this.warZone,monthWeekRank:t,queryTime:this.selMonth+"-01",remark:e,remarkType:a};Object(s.o)(n).then(function(t){r.$message({message:"保存成功",type:"success"})})},selRadio:function(t){this.getData=[],this.search()},filterSelect:function(t){this[t].includes(0)&&(this[t]=[0])},toCityDetail:function(t,e,a){var r=this.$router.resolve({name:"hotelManagementDetail",query:{bigAreaId:t,num:e,selMonth:a,type:this.typeVal}});window.open(r.href,"_blank")},search:function(){var t=this;if(this.getData=[],this.selMonth){var e={bigAreaIds:this.warZone.includes(0)?[]:this.warZone,queryTime:this.selMonth+"-01"},a="";if(1===this.identity)switch(this.typeVal){case"1":a=s.k;break;default:a="2"===this.typeVal?s.d:s.c}if(2===this.identity)switch(e.isBigAreaManager=this.identity,this.typeVal){case"1":a=s.h;break;case"2":a=s.f;break;default:a=s.e}a(e).then(function(e){"1"!==t.typeVal?(t.getWarZoneList(e.data.bigAreaIds),t.getWarZone=e.data.bigAreaIds):(t.getWarZoneList(e.data.theaterIds),t.getWarZone=e.data.theaterIds);var a=e.data.vos;t.areaRank=e.data.areaRank,t.getData=a.map(function(t){return{num:t.monthWeekRank,arr:t.vos,needExplain:t.needExplain,remark:t.remark}}),t.getData.reverse()})}else this.$message.error("请选择月份")}}},o=(a("4x3K"),a("KHd+")),u=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"zone"}},[a("div",{staticClass:"layout"},[a("div",{staticClass:"tab-head"},[a("div",{staticClass:"budget_sty tab-head-list bor_sty",staticStyle:{"margin-bottom":"16px","padding-bottom":"16px","border-bottom":"1px dotted #E9E9E9"}},[a("el-radio-group",{on:{change:t.selRadio},model:{value:t.typeVal,callback:function(e){t.typeVal=e},expression:"typeVal"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("GMV完成率（MTD）")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("店均GMV（OCC）")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("店均ADR（RevPAR）")])],1)],1),t._v(" "),a("div",{staticClass:"tab-head-list"},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("战区")]),t._v(" "),a("el-select",{style:{width:t.formInputWidth},attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:function(e){t.filterSelect("warZone")}},model:{value:t.warZone,callback:function(e){t.warZone=e},expression:"warZone"}},t._l(t.warZoneList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"tab-list-item"},[a("span",{staticClass:"left_label"},[t._v("月份")]),t._v(" "),a("el-date-picker",{style:{width:t.formInputWidth},attrs:{clearable:!1,editable:!1,"value-format":"yyyy-MM",type:"month",placeholder:"选择月"},model:{value:t.selMonth,callback:function(e){t.selMonth=e},expression:"selMonth"}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"tab-list-item"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1)],1)]),t._v(" "),2===t.identity&&t.areaRank?a("div",{staticClass:"btn-right"},[a("span",{attrs:{icon:"el-icon-plus"}},[a("i",{staticClass:"iconfont iconpaihangbang",staticStyle:{color:"rgb(103, 201, 180)"}}),t._v("\n        战区排名第"+t._s(t.areaRank)+"\n      ")])]):t._e(),t._v(" "),a("div",{staticClass:"container"},[0===t.getData.length?a("div",{staticClass:"emptyData"},[t._v("暂无数据")]):t._e(),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[t._l(t.getData,function(e,r){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.typeVal,expression:"typeVal==='1'"}],key:e.key,attrs:{name:r}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月第"+t._s(e.num)+"周（ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{data:e.arr,"row-style":t.rowStyle}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(r.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(r.row.bigAreaName))])]}}])}):a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekGmvmtd",label:"GMV完成率（MTD）","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(parseFloat(100*e.row.currentWeekGmvmtd).toFixed(2))+"%")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekGmvmtd",label:"上周GMV完成率（MTD）","min-width":"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(parseFloat(100*e.row.lastWeekGmvmtd).toFixed(2))+"%")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekGmvmtd",label:"上上周GMV完成率（MTD）","min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(parseFloat(100*e.row.beforeLastWeekGmvmtd).toFixed(2))+"%")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"circumferentialRatio",label:"环比","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("number"==typeof e.row.circumferentialRatio?parseFloat(100*e.row.circumferentialRatio).toFixed(2)+"%":"--"))]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"timeSchedule",label:"时间进度","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(parseFloat(100*e.row.timeSchedule).toFixed(2))+"%")]}}])})],1)],t._v(" "),2===t.identity?[a("p",{staticClass:"input_title"},[a("span",[a("i",{staticClass:"circle"}),t._v("数据解释\n              ")]),t._v(" "),a("span",{staticClass:"input_btn"},[e.needExplain?a("span",{staticClass:"input_save",on:{click:function(a){t.saveDataExplain(e.num,e.remark,"GMVMTD")}}},[t._v("保存")]):t._e()])]),t._v(" "),a("el-input",{attrs:{rows:2,disabled:!e.needExplain,type:"textarea",placeholder:"请输入"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})]:t._e()],2)}),t._v(" "),t._l(t.getData,function(e,r){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"2"===t.typeVal,expression:"typeVal==='2'"}],key:e.key,attrs:{name:r}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月第"+t._s(e.num)+"周（ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{"show-summary":1!==t.identity,"summary-method":t.getSummaries,"row-style":t.rowStyle,data:e.arr}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(r.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(r.row.bigAreaName))])]}}])}):a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekAvergmv",label:"店均GMV（OCC）","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(e.row.currentWeekAvergmv))]),t._v(" "),a("span",[t._v("（"+t._s(parseFloat(100*e.row.currentWeekOcc).toFixed(2))+"%)")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekAvergmv",label:"上周店均GMV（OCC）","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(e.row.lastWeekAvergmv))]),t._v(" "),a("span",[t._v("（"+t._s(parseFloat(100*e.row.lastWeekOcc).toFixed(2))+"%)")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekGavergmv",label:"上上周店均GMV（OCC）","min-width":"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(e.row.beforeLastWeekGavergmv))]),t._v(" "),a("span",[t._v("（"+t._s(parseFloat(100*e.row.beforeLastWeekOcc).toFixed(2))+"%)")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"circumferentialRatioAvergmv",label:"店均GMV环比（OCC）","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(parseFloat(100*e.row.circumferentialRatioAvergmv).toFixed(2))+"%")]),t._v(" "),a("span",[t._v("（"+t._s(parseFloat(100*e.row.circumferentialRatioOcc).toFixed(2))+"%)")])])]}}])})],1)],t._v(" "),2===t.identity?[a("p",{staticClass:"input_title"},[a("span",[a("i",{staticClass:"circle"}),t._v("数据解释\n              ")]),t._v(" "),a("span",{staticClass:"input_btn"},[e.needExplain?a("span",{staticClass:"input_save",on:{click:function(a){t.saveDataExplain(e.num,e.remark,"GMVOCC")}}},[t._v("保存")]):t._e()])]),t._v(" "),a("el-input",{attrs:{rows:2,disabled:!e.needExplain,type:"textarea",placeholder:"请输入"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})]:t._e()],2)}),t._v(" "),t._l(t.getData,function(e,r){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"3"===t.typeVal,expression:"typeVal==='3'"}],key:e.key,attrs:{name:r}},[a("template",{slot:"title"},[a("span",{staticClass:"shu_icon"}),t._v("\n            "+t._s(t.selMonth.slice(0,-3))+"年"+t._s(t.selMonth.slice(-2))+"月第"+t._s(e.num)+"周（ "+t._s(e.arr[0].weekStartDate)+"至"+t._s(e.arr[0].weekEndDate)+" ）\n          ")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{"row-style":t.rowStyle,data:e.arr,"show-summary":1!==t.identity,"summary-method":t.getSummaries}},[1===t.identity?a("el-table-column",{attrs:{prop:"bigAreaName",label:"战区","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("span",{staticClass:"link",on:{click:function(a){t.toCityDetail(r.row.bigAreaId,e.num,t.selMonth)}}},[t._v(t._s(r.row.bigAreaName))])]}}])}):a("el-table-column",{attrs:{prop:"cityName",label:"城市","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"currentWeekAdr",label:"店均ADR（RevPAR）","min-width":"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(e.row.currentWeekAdr))]),t._v(" "),a("span",[t._v("（"+t._s(e.row.currentWeekRevpar)+"）")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"lastWeekAdr",label:"上周店均ADR（RevPAR）","min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(e.row.lastWeekAdr))]),t._v(" "),a("span",[t._v("（"+t._s(e.row.lastWeekRevpar)+"）")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"beforeLastWeekAdr",label:"上上周店均ADR（RevPAR）","min-width":"290"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(e.row.beforeLastWeekAdr))]),t._v(" "),a("span",[t._v("（"+t._s(e.row.beforeLastWeekRevpar)+"）")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"circumferentialRatioAdr",label:"店均ADR环比（RevPAR）","min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"td_sty"},[a("span",[t._v(t._s(parseFloat(100*e.row.circumferentialRatioAdr).toFixed(2))+"%")]),t._v(" "),a("span",[t._v("（"+t._s(parseFloat(100*e.row.circumferentialRatioRevpar).toFixed(2))+"%）")])])]}}])})],1)],t._v(" "),2===t.identity?[a("p",{staticClass:"input_title"},[a("span",[a("i",{staticClass:"circle"}),t._v("数据解释\n              ")]),t._v(" "),a("span",{staticClass:"input_btn"},[e.needExplain?a("span",{staticClass:"input_save",on:{click:function(a){t.saveDataExplain(e.num,e.remark,"ADR")}}},[t._v("保存")]):t._e()])]),t._v(" "),a("el-input",{attrs:{rows:2,disabled:!e.needExplain,type:"textarea",placeholder:"请输入"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})]:t._e()],2)})],2)],1)])])},[],!1,null,"6fe667b6",null);u.options.__file="index.vue";e.default=u.exports},pfto:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return i});var r=a("4d7F"),n=a.n(r);function s(t){var e=new Date(t);return e.getFullYear()+"-"+(1===(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(1===e.getDate().toString().length?"0"+e.getDate():e.getDate())}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new n.a(function(a,r){var n=new Date;n.setDate(n.getDate()-t);var l=new Date;l.setDate(l.getDate()-e);var i=[n=s(n),l=s(l)];i[1]&&a(i)})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Date,a=e.getFullYear(),r=e.getMonth()+1-t;return a+"-"+(r=r<10?"0"+r:r)}},v1zl:function(t,e,a){"use strict";a.d(e,"n",function(){return n}),a.d(e,"g",function(){return s}),a.d(e,"j",function(){return l}),a.d(e,"i",function(){return i}),a.d(e,"m",function(){return o}),a.d(e,"l",function(){return u}),a.d(e,"b",function(){return c}),a.d(e,"a",function(){return d}),a.d(e,"d",function(){return p}),a.d(e,"f",function(){return m}),a.d(e,"k",function(){return v}),a.d(e,"h",function(){return f}),a.d(e,"c",function(){return b}),a.d(e,"e",function(){return _}),a.d(e,"o",function(){return h});var r=a("CcjM");function n(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/theater",method:"get",params:t})}function s(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/city",method:"get",params:t})}function l(t){return Object(r.a)({url:"bzy-reports/personFallCity/queryBigAreaReport",method:"post",data:t})}function i(t){return Object(r.a)({url:"bzy-reports/personFallCity/queryCityReport",method:"post",data:t})}function o(t){return Object(r.a)({url:"bzy-reports/theaterReport/sign/theater",method:"get",params:t})}function u(t){return Object(r.a)({url:"bzy-reports/theaterReport/sign/city",method:"get",params:t})}function c(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/hotel",method:"get",params:t})}function d(t){return Object(r.a)({url:"bzy-reports/theaterReport/area/cityDetail",method:"get",params:t})}function p(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averGmv/theater",method:"get",params:t})}function m(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averGmv/city",method:"get",params:t})}function v(t){return Object(r.a)({url:"bzy-reports/theaterReport/revenue/theater",method:"get",params:t})}function f(t){return Object(r.a)({url:"bzy-reports/theaterReport/revenue/city",method:"get",params:t})}function b(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averAdr/theater",method:"get",params:t})}function _(t){return Object(r.a)({url:"bzy-reports/theaterReport/hotel/averAdr/city",method:"get",params:t})}function h(t){return Object(r.a)({url:"bzy-reports/theaterReport/dataExplain",method:"get",params:t})}},vPyg:function(t,e,a){}}]);